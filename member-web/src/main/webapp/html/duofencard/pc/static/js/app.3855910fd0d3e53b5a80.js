webpackJsonp([1],{"3Brj":function(e,t,a){"use strict";t.a=function(e){for(var t=1,a=arguments.length;t<a;t++){var n=arguments[t]||{};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];void 0!==r&&(e[i]=r)}}return e}},"5b71":function(e,t){},"8vEe":function(e,t,a){"use strict";var n=a("VCXJ"),i=a("3Brj"),r=(a("hRKE"),n.default.prototype.$isServer),o=(r||Number(document.documentMode),function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});!r&&document.addEventListener,!r&&document.removeEventListener;function s(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function l(e,t){if(e){for(var a=e.className,n=(t||"").split(" "),i=0,r=n.length;i<r;i++){var o=n[i];o&&(e.classList?e.classList.add(o):s(e,o)||(a+=" "+o))}e.classList||(e.className=a)}}function c(e,t){if(e&&t){for(var a=t.split(" "),n=" "+e.className+" ",i=0,r=a.length;i<r;i++){var l=a[i];l&&(e.classList?e.classList.remove(l):s(e,l)&&(n=n.replace(" "+l+" "," ")))}e.classList||(e.className=o(n))}}var u=!1,d=function(){if(!n.default.prototype.$isServer){var e=p.modalDom;return e?u=!0:(u=!1,e=document.createElement("div"),p.modalDom=e,e.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),e.addEventListener("click",function(){p.doOnModalClick&&p.doOnModalClick()})),e}},m={},p={zIndex:2e3,modalFade:!0,getInstance:function(e){return m[e]},register:function(e,t){e&&t&&(m[e]=t)},deregister:function(e){e&&(m[e]=null,delete m[e])},nextZIndex:function(){return p.zIndex++},modalStack:[],doOnModalClick:function(){var e=p.modalStack[p.modalStack.length-1];if(e){var t=p.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,a,i,r){if(!n.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=r;for(var o=this.modalStack,s=0,m=o.length;s<m;s++){if(o[s].id===e)return}var p=d();if(l(p,"v-modal"),this.modalFade&&!u&&l(p,"v-modal-enter"),i)i.trim().split(/\s+/).forEach(function(e){return l(p,e)});setTimeout(function(){c(p,"v-modal-enter")},200),a&&a.parentNode&&11!==a.parentNode.nodeType?a.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:i})}},closeModal:function(e){var t=this.modalStack,a=d();if(t.length>0){var n=t[t.length-1];if(n.id===e){if(n.modalClass)n.modalClass.trim().split(/\s+/).forEach(function(e){return c(a,e)});t.pop(),t.length>0&&(a.style.zIndex=t[t.length-1].zIndex)}else for(var i=t.length-1;i>=0;i--)if(t[i].id===e){t.splice(i,1);break}}0===t.length&&(this.modalFade&&l(a,"v-modal-leave"),setTimeout(function(){0===t.length&&(a.parentNode&&a.parentNode.removeChild(a),a.style.display="none",p.modalDom=void 0),c(a,"v-modal-leave")},200))}};!n.default.prototype.$isServer&&window.addEventListener("keydown",function(e){if(27===e.keyCode&&p.modalStack.length>0){var t=p.modalStack[p.modalStack.length-1];if(!t)return;var a=p.getInstance(t.id);a.closeOnPressEscape&&a.close()}});var f=p,v=1,h=[],g=void 0,_={mixins:[{props:{value:{type:Boolean,default:!1},transition:{type:String,default:""},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},created:function(){this.transition&&function(e){if(-1===h.indexOf(e)){var t=function(e){var t=e.__vue__;if(!t){var a=e.previousSibling;a.__vue__&&(t=a.__vue__)}return t};n.default.transition(e,{afterEnter:function(e){var a=t(e);a&&a.doAfterOpen&&a.doAfterOpen()},afterLeave:function(e){var a=t(e);a&&a.doAfterClose&&a.doAfterClose()}})}}(this.transition)},beforeMount:function(){this._popupId="popup-"+v++,f.register(this._popupId,this)},beforeDestroy:function(){f.deregister(this._popupId),f.closeModal(this._popupId),this.modal&&null!==this.bodyOverflow&&"hidden"!==this.bodyOverflow&&(document.body.style.overflow=this.bodyOverflow,document.body.style.paddingRight=this.bodyPaddingRight),this.bodyOverflow=null,this.bodyPaddingRight=null},data:function(){return{opened:!1,bodyOverflow:null,bodyPaddingRight:null,rendered:!1}},watch:{value:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,n.default.nextTick(function(){t.open()}))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0,this.$emit("input",!0));var a=Object(i.a)({},this,e,this.$props);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var n=Number(a.openDelay);n>0?this._openTimer=setTimeout(function(){t._openTimer=null,t.doOpen(a)},n):this.doOpen(a)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0,this.visible=!0,this.$emit("input",!0);var t=function e(t){return 3===t.nodeType&&e(t=t.nextElementSibling||t.nextSibling),t}(this.$el),a=e.modal,i=e.zIndex;if(i&&(f.zIndex=i),a&&(this._closing&&(f.closeModal(this._popupId),this._closing=!1),f.openModal(this._popupId,f.nextZIndex(),t,e.modalClass,e.modalFade),e.lockScroll)){this.bodyOverflow||(this.bodyPaddingRight=document.body.style.paddingRight,this.bodyOverflow=document.body.style.overflow),g=function(){if(!n.default.prototype.$isServer){if(void 0!==g)return g;var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var a=document.createElement("div");a.style.width="100%",e.appendChild(a);var i=a.offsetWidth;return e.parentNode.removeChild(e),t-i}}();var r=document.documentElement.clientHeight<document.body.scrollHeight;g>0&&r&&(document.body.style.paddingRight=g+"px"),document.body.style.overflow="hidden"}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=f.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.transition||this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout(function(){e._closeTimer=null,e.doClose()},t):this.doClose()}},doClose:function(){var e=this;this.visible=!1,this.$emit("input",!1),this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(function(){e.modal&&"hidden"!==e.bodyOverflow&&(document.body.style.overflow=e.bodyOverflow,document.body.style.paddingRight=e.bodyPaddingRight),e.bodyOverflow=null,e.bodyPaddingRight=null},200),this.opened=!1,this.transition||this.doAfterClose()},doAfterClose:function(){f.closeModal(this._popupId),this._closing=!1}}}],data:function(){return{materialUrl:""}},props:{imageboxUrl:{type:String,default:"https://suc.deeptel.com.cn/common/material.do"},modal:{default:!0},selecType:{default:!1},width:{default:820},height:{default:500},url:{type:String,default:""},showClose:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0}},methods:{doClose:function(){var e=this;this.value=!1,this._closing=!0,this.onClose&&this.onClose(),setTimeout(function(){e.modal&&"hidden"!==e.bodyOverflow&&(document.body.style.overflow=e.bodyOverflow,document.body.style.paddingRight=e.bodyPaddingRight),e.bodyOverflow=null,e.bodyPaddingRight=null},200),this.opened=!1,window.image&&(window.image="",delete window.image),window.go_back&&(window.go_back="",delete window.go_back),this.transition||this.doAfterClose()},handleAction:function(e){var t=this.callback;this.value=!1,t(e)},onClose:function(){this.callback("cancel")}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("transition",{attrs:{name:"msgbox-bounce"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.value,expression:"value"}],staticClass:"mint-msgbox",style:{width:e.width+"px",height:e.height+"px"}},[a("iframe",{staticClass:"material",attrs:{src:e.materialUrl,width:e.width,height:e.height}})])])],1)},staticRenderFns:[]};var y=a("X4nt")(_,b,!1,function(e){a("OAV+")},null,null);t.a=y.exports},"9AEk":function(e,t){},BD3D:function(e,t){},GZpK:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("VCXJ"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("X4nt")({name:"app"},i,!1,function(e){a("Rs03")},null,null).exports,o=a("zO6J"),s=a("3cXf"),l=a.n(s),c=a("a3Yh"),u=a.n(c),d=a("tra3"),m=a.n(d),p=a("2sCs"),f=a.n(p),v=a("hRKE"),h=a.n(v),g=Object.prototype.toString,_={ajax:function(e){var t=e||{};if(!t.url)return alert("请填写接口地址"),!1;f()({method:t.type||"POST",url:t.url,params:t.data||{},header:t.header||{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},baseURL:"",timeout:t.time||1e5,responseType:t.dataType||"json"}).then(function(e){200==e.status?(0==e.data.code&&t.success&&t.success(e.data,e),1==e.data.code&&t.error&&t.error(e.data,e),e.data.code>1&&t.warning&&t.warning(e.data,e)):data.error?t.error(error):alert("好多人在访问呀，请重新试试[timeout]")}).catch(function(e){console.log(e),t.error?t.error(e):console.log("好多人在访问呀，请重新试试[timeout]")})},$ajax:function(e){m.a.ajax({type:e.type||"POST",url:e.url,data:e.data,dataType:e.dataType||"JSON",header:e.header||{"Content-Type":"application/json"},success:function(t){0==t.code&&e.succCallback&&e.succCallback(t),1==t.code&&e.errorCallback&&e.errorCallback(t),t.code>1&&e.warningCallback&&e.warningCallback(t)},error:function(e){alert("请求失败！")}})},formatTime:function(e){var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return[t,a,n].map(this.formatNumber).join("-")+" "+[i,r,o].map(this.formatNumber).join(":")},formatDateTime:function(e){return[(e=new Date(e)).getFullYear(),e.getMonth()+1,e.getDate()].map(this.formatNumber).join("-")},formatNumber:function(e){return(e=e.toString())[1]?e:"0"+e},isArrayLike:function(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var a=g.call(e).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(a))return!1;if("Array"===a)return!0;try{return!1!=={}.propertyIsEnumerable.call(e,"length")||/^\s?function/.test(e.item||e.callee)}catch(t){return!e.window}}return!1},each:function(e,t){if(e){var a=0;if(this.isArrayLike(e))for(var n=e.length;a<n&&!1!==t(a,e[a]);a++);else for(a in e)if(e.hasOwnProperty(a)&&!1===t(a,e[a]))break}},getUrlQuery:function(e,t){var a=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i"),n=t||location.href;return a.test(n)?unescape(RegExp.$2.replace(/\+/g," ")):""},copy:function(e){var t=e.constructor===Array?[]:{};for(var a in e)e.hasOwnProperty(a)&&("object"==h()(e[a])?t[a]=this.copy(e[a]):t[a]=e[a]);return t},findMemberVideoUrl:function(e,t){this.ajax({url:memberAPI.activeAPI.findMemberVideoUrl,data:{params:{model:e}},success:function(e){t(e)}})},exportExcel:"",$:m.a},b={name:"select-type",data:function(){var e,t=this,a=function(e,t,a){t?new RegExp("^\\+?[1-9][0-9]*$").exec(t)?t>9999?a(new Error("请填写小于10000的有效天数!")):a():a(new Error("请输入大于零的整数!")):a(new Error("请填写有效天数!"))};return e={editor1:null,data:null,stepActive:0,useType:0,cardType:1,pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()}},sectionMonthOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],sectionDayOptions:[],sectionDayNoRepeat:[],sectionDayCompare:[],connectArray:[],active:0,holidayData:[],ruleForm:{periodDateType:1,startTime:null,endTime:null,title:null,discount:null,fixedTerm:0,fixedBeginTerm:null,useTime:0,defaultDetail:null,gift:null,cashLeastCost:null,reduceCost:null,type:0,otherTime:0,fixedavailableDate:null,moreFunction:!1,addUser:0,canShare:0,isSendMsg:0,phone:null,isOwnUse:0,otherTimeSet:[{month_start:1,day_start:1,month_end:1,day_end:1}],week:[1,2,3,4,5,6,0],holidays:0},rules:{title:[{validator:function(e,a,n){var i=t.cardType;1==i?a?n():n(new Error("折扣券名称不能为空")):2==i?a?n():n(new Error("代金券名称不能为空")):3==i?a?n():n(new Error("礼品兑换券名称不能为空")):4==i?a?n():n(new Error("自定义券名称不能为空")):n()}},{max:9,message:"您已超出字数上线"}],discount:[{required:!0,message:"折扣额度不能为空",trigger:"blur"},{validator:function(e,t,a){t?t<=9.9&&new RegExp("^[1-9]+(.[0-9]{1})$").exec(t)?a():a(new Error(" ")):a()},trigger:"blur"}],gift:[{required:!0,message:"兑换物品名称不能为空",trigger:"blur"}],defaultDetail:[{required:!0,message:"您还未输入优惠券详情",trigger:"blur"}],fixedTerm:[{required:!0,message:"请填写有效天数",trigger:"blur"},{validator:a,trigger:"blur"}],fixedBeginTerm:[{required:!0,message:"请填写有效天数",trigger:"blur"},{validator:a,trigger:"blur"}],cashLeastCost:[{validator:function(e,t,a){null!=t?t>0&&t<1e4?a():a(new Error("请输入小于10000的数值")):a(new Error("请输入抵扣条件!"))},trigger:"blur"}],reduceCost:[{validator:function(e,t,a){""==t?a(new Error("减免额度不能为空!")):new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于零的数值!")):t>9999?a(new Error("请输入小于10000的数值")):a():a(new Error("请输入大于零的数值!"))},trigger:"blur"}],type:[{validator:function(e,a,n){t.ruleForm.fixedavailableDate?n():n(new Error("请选择时间范围!"))},trigger:"blur"}],week:[{type:"array",required:!0,message:"请选择使用时段"}],phone:[{validator:function(e,t,a){Mobilephone(t)?a():a(new Error("您还未设置短信接收号码"))},trigger:"blur"},{required:!0,message:"您还未设置短信接收号码",trigger:"blur"}]},ruleForm1:{textImageList:[{imageDetail:"",textDetail:""}],color:"#20a0ff",loginUrl:null,iconUrlList:null,input1:null,servicePhone:null,brandName:null,summary:null,description:null,descriptionState:!1},rules1:{servicePhone:[{required:!0,message:"您还未设置客服电话",trigger:"blur"},{validator:function(e,t,a){t?phone(t)?a():a(new Error("请输入正确的电话格式")):a(new Error("您还未设置客服电话"))},trigger:"blur"}],loginUrl:[{validator:function(e,a,n){t.ruleForm1.loginUrl?n():n(new Error("您还未上传图片!"))}}],brandName:[{required:!0,message:"图片说明不能为空",trigger:"blur"}],iconUrlList:[{validator:function(e,a,n){t.ruleForm1.iconUrlList?n():n(new Error("您还未上传图片!"))}}],summary:[{required:!0,message:"封面图说明不能为空",trigger:"blur"}]}},u()(e,"pickerOptions1",{disabledDate:function(e){return e.getTime()<Date.now()}}),u()(e,"tipArray",[]),u()(e,"ruleForm2",{number:null,isBuy:1,couponSendFlag:0,isReceiveNum:0,limitNum:null,limitType:0,buyMoney:null,isJifen:null,isFenbi:null,isDiscount:null,isRecommend:null,fenbi:null,jifen:null,flow:null,money:null,discountType:[1,2,3],reward:[0,1,2,3],giftBuyMoney:[{limiteData:"",money:""}]}),u()(e,"rules2",{number:[{validator:function(e,t,a){t?new RegExp("^\\+?[1-9][0-9]*$").exec(t)?t>99999?a(new Error("请输入小于10000的数值")):a():a(new Error("请输入大于0的整数")):a()},trigger:"blur"}],buyMoney:[{validator:function(e,t,a){t?"0"==t?a(new Error("请输入大于0的数值")):new RegExp("^[0-9]+(.[0-9]{1,2})?$").exec(t)?t>99999?a(new Error("请输入小于100000的数值")):a():a(new Error("请输入大于0的数值")):a(new Error("请输入大于0的数值"))},trigger:"blur"},{required:!0,message:"请输入大于0的数值",trigger:"blur"}],limitNum:[{validator:function(e,a,n){""!=t.ruleForm2.number?""==a?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(a)?a>t.ruleForm.number?n(new Error("请输入小于总数的数量")):a<=0?n(new Error("输入0时：请输入大于0的整数")):a>99999?n(new Error("请输入小于100000的数值")):n():n(new Error("请输入大于0的数值")):n():new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(a)?a>99999?n(new Error("请输入小于100000的数值")):n():n(new Error("请输入大于0的数值"))},trigger:"blur"},{required:!0,message:"请输入小于总数的整数",trigger:"blur"}],jifen:[{required:!0,message:"请设置赠送积分数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^[+]{0,1}(\\d+)$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的整数")):a()},trigger:"blur"}],fenbi:[{required:!0,message:"请设置赠送粉币数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的数值")):a()},trigger:"blur"}],flow:[{required:!0,message:"请设置赠送流量数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^[+]{0,1}(\\d+)$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的整数")):a()},trigger:"blur"}],money:[{required:!0,message:"请设置赠送金额",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的数值")):a()},trigger:"blur"}]}),e},beforeMount:function(){this.setDays()},mounted:function(){var e=this;e.$nextTick(function(){var t=new wangEditor("editor-trigger");e.editor1=t,t.create()})},methods:{allCommon:function(){this.useType=0},designate:function(){this.useType=1},discont:function(){this.cardType=1},voucher:function(){this.cardType=2},gift:function(){this.cardType=3},common:function(){this.cardType=4},validTimeClear:function(){this.ruleForm.fixedavailableDate=null,this.ruleForm.fixedTerm=0,this.ruleForm.fixedBeginTerm=null},useTimeClear:function(){this.ruleForm.week=[1,2,3,4,5,6,0],this.ruleForm.holidays=0,this.ruleForm.otherTime=0},sectionMonthChange:function(e){this.monthNum=e,this.setDays()},setDays:function(){this.sectionDayOptions=[];for(var e=[31,28,31,30,31,30,31,31,30,31,30,31][this.monthNum-1],t=1;t<=e;t++)this.sectionDayOptions.push({value:""+t,label:""+t})},addSectionTime:function(e){this.ruleForm.otherTimeSet.length<20&&this.ruleForm.otherTimeSet.push({month_start:1,day_start:1,month_end:1,day_end:1})},removeSectionTime:function(e){this.ruleForm.otherTimeSet.splice(e,1)},disableOtherData:function(e){var t=this,a=[],n=[],i=[];return e.forEach(function(e,n){var r=e.month_start,o=e.day_start,s=e.month_end,l=e.day_end,c=(r<10?"0"+r:r)+(o<10?"0"+o:o),u=(s<10?"0"+s:s)+(l<10?"0"+l:l);a[n]=[c,u],u<c?i.push(!1):i.push(!0),t.sectionDayCompare=i}),a.forEach(function(e,t){var i=e[0],r=e[1],o=!0;a.forEach(function(e,a){var n=e[0],s=e[1];t>a>0&&(o=i>s||r<n)}),1==o?n.push(!0):n.push(!1)}),t.sectionDayNoRepeat=n,t.sectionDayCompare=i,t.connectArray=t.sectionDayNoRepeat.concat(t.sectionDayCompare),t.connectArray},moreFunctionButton:function(){this.ruleForm.moreFunction=!this.ruleForm.moreFunction},RichTextEditor:function(){var e=this.editor1.$txt.html();this.ruleForm1.description=e},addPictureLogo:function(){var e=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(t){e.ruleForm1.loginUrl=t[0].url}).catch(function(e){console.log(e)})},addPictureCover:function(){var e=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(t){e.ruleForm1.iconUrlList=t[0].url,console.log(e.ruleForm1.iconUrlList)}).catch(function(e){console.log(e)})},addPictureIntroduce:function(e){var t=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(a){t.ruleForm1.textImageList[e].imageDetail=a[0].url,t.ruleForm1.textImageList.splice(1,0)}).catch(function(e){console.log(e)})},addImageTextDescription:function(e){this.ruleForm1.textImageList.length<10&&this.ruleForm1.textImageList.push({imageDetail:"",textDetail:""})},deleteImageTextDescription:function(e){this.ruleForm1.textImageList.length>1&&this.ruleForm1.textImageList.splice(e,1)},arraySplit:function(e){var t=e.indexOf("upload")+8;return e.substring(t)},addCurrentprices:function(e){this.ruleForm2.giftBuyMoney.length<10&&this.ruleForm2.giftBuyMoney.push({limiteData:"",money:""})},noReapeatDate:function(e){var t=[],a=[];return e.forEach(function(e,t){var n=e.limiteData[0].getFullYear(),i=e.limiteData[0].getMonth()+1,r=Number(i);if(0<r<10)var o="0"+r;else o=r;var s=e.limiteData[0].getDate();if(0<s<10)var l="0"+s;else l=s;var c=Number(n+o+l),u=e.limiteData[1].getFullYear(),d=e.limiteData[1].getMonth()+1,m=Number(d);if(0<m<10)var p="0"+m;else p=m;var f=e.limiteData[1].getDate();if(0<f<10)var v="0"+f;else v=f;var h=Number(u+p+v);a[t]=[c,h]}),a.forEach(function(e,n){var i=e[0],r=e[1],o=!0;a.forEach(function(e,t){var a=e[0],s=e[1];if(n>t>0){if(!(i>s||r<a))return o=!1,!1;o=!0}}),1==o&&t.push(!0),0==o&&t.push(!1)}),this.tipArray=t,t},deleteCurrentprices:function(e){this.ruleForm2.giftBuyMoney.splice(e,1)},isBuyClear:function(){this.ruleForm2.buyMoney=null,this.ruleForm2.discountType=[1,2,3]},isReceiveNumClear:function(){this.ruleForm2.limitNum=null},isRecommendClear:function(){this.ruleForm2.jifen=null,this.ruleForm2.fenbi=null,this.ruleForm2.flow=null,this.ruleForm2.money=null},refresh:function(){window.location.reload()},holidayForbidDay:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/getLegalHolidays",type:"get",data:{},success:function(t){null!=(t=t.data)&&t!=[]&&""!=t&&t.forEach(function(t,a){var n={name:null,forbidTime:null};n.name=t.name,n.forbidTime=t.startTime+"至"+t.endTime,console.log(t.startTime),e.holidayData.push(n),console.log(e.holidayData)})},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},saveForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;if(3==a.cardType){if(a.noReapeatDate(a.ruleForm2.giftBuyMoney),-1!=a.tipArray.indexOf(!1))return!1;a.saveCoupon(),t.stepActive++>3&&(t.stepActive=0)}else a.saveCoupon(),t.stepActive++>3&&(t.stepActive=0)})},saveCoupon:function(){var e=this,t=_.formatDateTime(e.ruleForm.fixedavailableDate[0]),a=_.formatDateTime(e.ruleForm.fixedavailableDate[1]),n=e.ruleForm.week.join(","),i=[];if(3==e.cardType){e.ruleForm2.giftBuyMoney.forEach(function(e,t){var a={startTime:_.formatDateTime(e.limiteData[0]),endTime:_.formatDateTime(e.limiteData[1]),money:e.money};i.push(a)});var r=l()(i)}else r=null;-1!=e.ruleForm2.discountType.indexOf(1)?e.ruleForm2.isJifen=1:e.ruleForm2.isJifen=0,-1!=e.ruleForm2.discountType.indexOf(2)?e.ruleForm2.isFenbi=1:e.ruleForm2.isFenbi=0,-1!=e.ruleForm2.discountType.indexOf(2)?e.ruleForm2.isDiscount=1:e.ruleForm2.isDiscount=0;var o=[];e.ruleForm1.textImageList.forEach(function(t,a){var n={imageDetail:e.arraySplit(t.imageDetail),textDetail:t.textDetail};o.push(n)});var s=l()(o);if(null==e.ruleForm.cashLeastCost&&(e.ruleForm.cashLeastCost=0),e.ruleForm.fixedTerm||(e.ruleForm.fixedTerm=0),0==e.ruleForm.otherTime)var c=null;else c=l()(e.ruleForm.otherTimeSet);var u={useType:e.useType,cardType:e.cardType,title:e.ruleForm.title,discount:e.ruleForm.discount,gift:e.ruleForm.gift,defaultDetail:e.ruleForm.defaultDetail,cashLeastCost:e.ruleForm.cashLeastCost,reduceCost:e.ruleForm.reduceCost,type:e.ruleForm.type,beginTimestamp:t,endTimestamp:a,fixedTerm:e.ruleForm.fixedTerm,fixedBeginTerm:e.ruleForm.fixedBeginTerm,useTime:e.ruleForm.useTime,week:n,holidays:e.ruleForm.holidays,otherTime:e.ruleForm.otherTime,otherTimeSet:c,addUser:e.ruleForm.addUser,canShare:e.ruleForm.canShare,isSendMsg:e.ruleForm.isSendMsg,phone:e.ruleForm.phone,isOwnUse:e.ruleForm.isOwnUse,loginUrl:e.arraySplit(e.ruleForm1.loginUrl),brandName:e.ruleForm1.brandName,color:e.ruleForm1.color,servicePhone:e.ruleForm1.servicePhone,iconUrlList:e.arraySplit(e.ruleForm1.iconUrlList),summary:e.ruleForm1.summary,description:e.ruleForm1.description,textImageList:s,number:Number(e.ruleForm2.number),isBuy:e.ruleForm2.isBuy,buyMoney:e.ruleForm2.buyMoney,isJifen:e.ruleForm2.isJifen,isFenbi:e.ruleForm2.isFenbi,isDiscount:e.ruleForm2.isDiscount,giftBuyMoney:r,isReceiveNum:e.ruleForm2.isReceiveNum,limitType:e.ruleForm2.limitType,limitNum:e.ruleForm2.limitNum,isRecommend:e.ruleForm2.isRecommend,jifen:e.ruleForm2.jifen,fenbi:e.ruleForm2.fenbi,flow:e.ruleForm2.flow,money:e.ruleForm2.money};_.ajax({url:"/memberPc/duofenCoupon/addCoupon",type:"post",data:u,dataType:"json",success:function(t){t&&e.$message({message:t.msg,type:"success"})},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1==a.ruleForm.otherTime){if(a.disableOtherData(a.ruleForm.otherTimeSet),-1!=a.connectArray.indexOf(!1))return!1;t.stepActive++>3&&(t.stepActive=0)}else t.stepActive++>3&&(t.stepActive=0)})},submitForm1:function(e){var t=this,a=this;this.$refs[e].validate(function(e){return a.RichTextEditor(),""==a.ruleForm1.description||"<p><br></p>"==a.ruleForm1.description?(a.ruleForm1.descriptionState=!0,m()(".wangEditor-container").css("border-color","#f56c6c"),!1):(a.ruleForm1.descriptionState=!1,m()(".wangEditor-container").css("border-color","#dfe6ec"),!!e&&void(t.stepActive++>3&&(t.stepActive=0)))})},nextStep:function(){this.holidayForbidDay(),this.stepActive++>3&&(this.stepActive=0)},previousStep:function(){this.stepActive>0&&this.stepActive--}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createCoupon"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("优惠券管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("创建多粉类型")])],1),e._v(" "),a("el-steps",{staticClass:"marginTop20",attrs:{active:e.stepActive,"align-center":""}},[a("el-step",{attrs:{title:"选择优惠券类型"}}),e._v(" "),a("el-step",{attrs:{title:"填写基本信息"}}),e._v(" "),a("el-step",{attrs:{title:"进行页面设置"}}),e._v(" "),a("el-step",{attrs:{title:"进行发布设置"}}),e._v(" "),a("el-step",{attrs:{title:"完成设置"}})],1),e._v(" "),0==e.stepActive?a("div",{staticClass:"selectType"},[e._e(),e._v(" "),a("el-row",{staticClass:"style marginBottom30 marginTop10"},[a("el-col",{staticClass:"colorGray marginTop20",attrs:{span:4}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),a("span",{staticStyle:{"font-size":"14px"}},[e._v("选择类型：")])]),e._v(" "),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"discont",style:{borderColor:1==e.cardType?"#20a0ff":"#dddddd"},on:{click:e.discont}},[a("div",{staticClass:"middle"},[a("p",[e._v("折扣券")]),e._v(" "),a("span",[e._v("消费者领取后可用于消费时获取折扣")])]),e._v(" "),1==e.cardType?a("i",{staticClass:"iconfont colorBlue fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"voucher",style:{borderColor:2==e.cardType?"#20a0ff":"#dddddd"},on:{click:e.voucher}},[a("div",{staticClass:"middle"},[a("p",[e._v("代金券")]),e._v(" "),a("span",[e._v("提供满减设置，消费者领取后可用于抵扣现金")])]),e._v(" "),2==e.cardType?a("i",{staticClass:"iconfont colorBlue fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"gift",style:{borderColor:3==e.cardType?"#20a0ff":"#dddddd"},on:{click:e.gift}},[a("div",{staticClass:"middle"},[a("p",[e._v("礼品兑换券")]),e._v(" "),a("span",[e._v("消费者购买或领取后可用于兑换商品")])]),e._v(" "),3==e.cardType?a("i",{staticClass:"iconfont colorBlue fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"common",style:{borderColor:4==e.cardType?"#20a0ff":"#dddddd"},on:{click:e.common}},[a("div",{staticClass:"middle"},[a("p",[e._v("自定义券")]),e._v(" "),a("span",[e._v("当以上模板无法满足所设优惠需求时，提供更灵活的优惠设置")])]),e._v(" "),4==e.cardType?a("i",{staticClass:"iconfont colorBlue fontSize26"},[e._v("")]):e._e()])])],1),e._v(" "),a("div",{staticClass:"nextStep textCenter lineHeight buttonPosition"},[a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.stepActive,expression:"stepActive==1"}],staticClass:"WriteCoupon"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content marginRight55"},[a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginLeft55 marginBottom30"},[a("span",{staticClass:"marginLeft30"},[e._v("优惠券信息")])]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"180px"}},[1==e.cardType?a("div",[a("el-form-item",{attrs:{label:"折扣券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：95折优惠券"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣额度：",prop:"discount"}},[a("el-input",{attrs:{placeholder:"请输入折扣额度"},model:{value:e.ruleForm.discount,callback:function(t){e.$set(e.ruleForm,"discount",e._n(t))},expression:"ruleForm.discount"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("请填写1-9.8之间的数字，精确到小数点后1位")])],1)],1):e._e(),e._v(" "),2==e.cardType?a("div",{staticClass:"cashCouponName"},[a("el-form-item",{attrs:{label:"代金券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：十元代金券或满100减20元"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"减免额度：",required:""}},[a("el-form-item",[a("div",{staticClass:"cashBox"},[a("div",[a("span",{staticClass:"marginRight10"},[e._v("满")]),e._v(" "),a("el-form-item",{attrs:{prop:"cashLeastCost"}},[a("el-input",{staticClass:"width120",model:{value:e.ruleForm.cashLeastCost,callback:function(t){e.$set(e.ruleForm,"cashLeastCost",e._n(t))},expression:"ruleForm.cashLeastCost"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10"},[e._v("元，减")])],1),e._v(" "),a("div",{staticClass:"marginLeft15"},[a("el-form-item",{attrs:{prop:"reduceCost"}},[a("el-input",{staticClass:"width120 marginRight10",attrs:{placeholder:"请输入减免金额"},model:{value:e.ruleForm.reduceCost,callback:function(t){e.$set(e.ruleForm,"reduceCost",e._n(t))},expression:"ruleForm.reduceCost"}})],1)],1),e._v(" "),a("div",[a("span",[e._v("元")]),e._v(" "),a("span",{staticClass:"marginLeft10 colorLowerGray",style:{fontSize:"12px",color:"#999999"}},[e._v("抵扣金额不输入时默认0元：消费任意金额皆可用券")])])])])],1)],1):e._e(),e._v(" "),3==e.cardType?a("div",[a("el-form-item",{attrs:{label:"礼品兑换券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：月饼兑换券"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),e._v(" "),a("el-tooltip",{staticClass:"item marginLeft5",attrs:{effect:"light",placement:"right-start"}},[a("div",{staticClass:"colorLowerGray",attrs:{slot:"content"},slot:"content"},[e._v("免费兑换示例：月饼兑换券"),a("br"),e._v("购买兑换示例1（单件礼品）：月饼礼品券；"),a("br"),e._v("购买兑换示例2（多件礼品）：月饼大礼包 "),a("br"),e._v(" 字数上限为9个汉字")]),e._v(" "),a("i",{staticClass:"iconfont iconColor"},[e._v("")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"兑换物品名称：",prop:"gift"}},[a("el-input",{attrs:{placeholder:"请输入物品兑换名称"},model:{value:e.ruleForm.gift,callback:function(t){e.$set(e.ruleForm,"gift",t)},expression:"ruleForm.gift"}})],1)],1):e._e(),e._v(" "),4==e.cardType?a("div",[a("el-form-item",{attrs:{label:"自定义券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：美容体验券"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft5 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠详情：",prop:"defaultDetail"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入优惠详情"},model:{value:e.ruleForm.defaultDetail,callback:function(t){e.$set(e.ruleForm,"defaultDetail",t)},expression:"ruleForm.defaultDetail"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"validTime"},[a("el-form-item",{attrs:{label:"有效期：",required:""}},[a("el-radio",{attrs:{label:0},on:{change:e.validTimeClear},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._v("固定时间有效")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.validTimeClear},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._v("领取后有效")])],1)],1),e._v(" "),0==e.ruleForm.type?a("div",{staticClass:"fixedBorder margin180 marginBottom22"},[a("el-form-item",{attrs:{prop:"type","label-width":"0px"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","picker-options":e.pickerOptions1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.fixedavailableDate,callback:function(t){e.$set(e.ruleForm,"fixedavailableDate",t)},expression:"ruleForm.fixedavailableDate"}})],1)],1):e._e(),e._v(" "),1==e.ruleForm.type?a("el-form-item",[a("div",{staticClass:"receiveBorder"},[a("div",[a("span",{staticClass:"marginRight10"},[e._v("领取")]),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"width110",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.fixedTerm,callback:function(t){e.$set(e.ruleForm,"fixedTerm",e._n(t))},expression:"ruleForm.fixedTerm"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10 marginRight10"},[e._v("后开始生效，有效天数为")])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"fixedBeginTerm"}},[a("el-input",{staticClass:"width110",model:{value:e.ruleForm.fixedBeginTerm,callback:function(t){e.$set(e.ruleForm,"fixedBeginTerm",e._n(t))},expression:"ruleForm.fixedBeginTerm"}})],1)],1),e._v(" "),a("div",[a("span",{staticClass:"marginLeft10"},[e._v("天")])])])]):e._e(),e._v(" "),a("div",{staticClass:"useTime"},[a("el-form-item",{attrs:{label:"使用时段选择："}},[a("el-radio",{attrs:{label:0},on:{change:e.useTimeClear},model:{value:e.ruleForm.useTime,callback:function(t){e.$set(e.ruleForm,"useTime",t)},expression:"ruleForm.useTime"}},[e._v("全部时段")]),e._v(" "),a("el-radio",{attrs:{label:1},on:{change:e.useTimeClear},model:{value:e.ruleForm.useTime,callback:function(t){e.$set(e.ruleForm,"useTime",t)},expression:"ruleForm.useTime"}},[e._v("部分时段")])],1)],1),e._v(" "),1==e.ruleForm.useTime?a("div",{staticClass:"fixedBorder margin180",style:{borderColor:e.ruleForm.week.length<=0?"#f56c6c":"#eeeeee"}},[a("div",{staticClass:"partTime"},[a("el-form-item",{attrs:{label:"选择可用日期：",prop:"week"}},[a("el-checkbox-group",{model:{value:e.ruleForm.week,callback:function(t){e.$set(e.ruleForm,"week",t)},expression:"ruleForm.week"}},[a("el-checkbox",{attrs:{label:1}},[e._v("周一")]),e._v(" "),a("el-checkbox",{attrs:{label:2}},[e._v("周二")]),e._v(" "),a("el-checkbox",{attrs:{label:3}},[e._v("周三")]),e._v(" "),a("el-checkbox",{attrs:{label:4}},[e._v("周四")]),e._v(" "),a("el-checkbox",{attrs:{label:5}},[e._v("周五")]),e._v(" "),a("el-checkbox",{attrs:{label:6}},[e._v("周六")]),e._v(" "),a("el-checkbox",{attrs:{label:0}},[e._v("周日")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"法定节假日不可以："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#20a0ff","inactive-color":"#bfcbd9"},model:{value:e.ruleForm.holidays,callback:function(t){e.$set(e.ruleForm,"holidays",t)},expression:"ruleForm.holidays"}}),e._v(" "),a("el-popover",{ref:"popover1",attrs:{placement:"right",title:"按钮开启后，以下相应的国家法定节假日不可用该优惠券",width:"525",height:"20",trigger:"hover"}},[a("el-table",{attrs:{data:e.holidayData}},[a("el-table-column",{attrs:{width:"160",property:"name",label:"法定节假日"}}),e._v(" "),a("el-table-column",{attrs:{property:"forbidTime",label:"休假时间"}})],1)],1),e._v(" "),a("span",{staticClass:"colorLowerGray"},[e._v("开启后，没逢国家法定节假日，该优惠券不可用"),a("i",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"iconfont icond4 fontSize14 marginLeft5"},[e._v("")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"其他不可用日期："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#20a0ff",disabled:0==e.ruleForm.week.length,"inactive-color":"#bfcbd9"},model:{value:e.ruleForm.otherTime,callback:function(t){e.$set(e.ruleForm,"otherTime",t)},expression:"ruleForm.otherTime"}}),e._v(" "),a("span",{staticClass:"colorLowerGray"},[e._v("开启后，可设置优惠券券的不可以日期")])],1),e._v(" "),e.ruleForm.week.length>0?a("div",{staticClass:"disableData"},[e.ruleForm.otherTime?a("el-form-item",{staticClass:"margin120",attrs:{prop:"otherTimeSet"}},e._l(e.ruleForm.otherTimeSet,function(t,n){return a("div",{key:n,staticClass:"marginTop20 otherTimePosition"},[a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择"},on:{change:e.sectionMonthChange},model:{value:t.month_start,callback:function(a){e.$set(t,"month_start",a)},expression:"item.month_start"}},e._l(e.sectionMonthOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                      月\n                      "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择"},model:{value:t.day_start,callback:function(a){e.$set(t,"day_start",a)},expression:"item.day_start"}},e._l(e.sectionDayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                      日  ——\n                      "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择"},on:{change:e.sectionMonthChange},model:{value:t.month_end,callback:function(a){e.$set(t,"month_end",a)},expression:"item.month_end"}},e._l(e.sectionMonthOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                      月\n                      "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择"},model:{value:t.day_end,callback:function(a){e.$set(t,"day_end",a)},expression:"item.day_end"}},e._l(e.sectionDayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                      日\n                      "),0==n&&e.ruleForm.otherTimeSet.length<20?a("el-button",{staticClass:"sectionAddBtn marginLeft10 fontSize32",on:{click:function(t){e.addSectionTime(n)}}},[a("i",{staticClass:"iconfont colorBlue fontSize40"},[e._v("")])]):e._e(),e._v(" "),0!=n?a("el-button",{staticClass:"sectionAddBtn fontSize34 marginLeft17",on:{click:function(t){e.removeSectionTime(n)}}},[a("i",{staticClass:"iconfont colorLowerGray fontSize24"},[e._v("")])]):e._e(),e._v(" "),0==e.sectionDayNoRepeat[n]?a("span",{staticClass:"otherTimeTipOne colorRed fontSize12"},[e._v("不能包含已被设置的日期")]):e._e(),e._v(" "),0==e.sectionDayCompare[n]?a("span",{staticClass:"otherTimeTipTwo colorRed fontSize12"},[e._v("请设置大于开始日期的结束日期")]):e._e()],1)})):e._e()],1):e._e()],1)]):e._e(),e._v(" "),a("div",{staticClass:"grid-content bg-purple-light vertical marginLeft55 marginBottom30 marginTop30"},[a("span",{staticClass:"marginLeft30",style:{color:"#333"}},[e._v("更多功能")]),e._v(" "),a("span",{staticClass:"textRight iconDirection"},[a("i",{staticClass:"el-dropdown__icon el-icon-arrow-down moreFunctionIcon",class:e.ruleForm.moreFunction?"rotateLeft":"rotateRight",on:{click:e.moreFunctionButton}})])]),e._v(" "),1==e.ruleForm.moreFunction?a("div",[2==e.cardType?a("el-form-item",{attrs:{label:"允许叠加使用："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.addUser,callback:function(t){e.$set(e.ruleForm,"addUser",e._n(t))},expression:"ruleForm.addUser"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，粉丝允许同时使用两张或以上代金券抵扣现金")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"允许分享："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.canShare,callback:function(t){e.$set(e.ruleForm,"canShare",t)},expression:"ruleForm.canShare"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("优惠券允许分享到朋友券、微信好友、qq好友等社交渠道")])],1),e._v(" "),a("el-form-item",{attrs:{label:"短信提示："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.isSendMsg,callback:function(t){e.$set(e.ruleForm,"isSendMsg",e._n(t))},expression:"ruleForm.isSendMsg"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时粉丝领取优惠券后，商家将收到短信通知")])],1),e._v(" "),1==e.ruleForm.isSendMsg?a("el-form-item",[a("div",{staticClass:"messageBox"},[a("el-form-item",{staticClass:"marginTop20",attrs:{label:"短信接收码：",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入商家手机号码"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",e._n(t))},expression:"ruleForm.phone"}}),e._v(" "),a("el-popover",{ref:"popover2",attrs:{placement:"top-start",width:"330",trigger:"hover",content:"短信内容示例：【多粉平台】尊敬的商家用户您好，您的一张卡券被粉丝领取，查看详情请登陆多年粉平台"}}),e._v(" "),a("i",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"iconfont iconColor"},[e._v("")])],1)],1)]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开启自助核销："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.isOwnUse,callback:function(t){e.$set(e.ruleForm,"isOwnUse",e._n(t))},expression:"ruleForm.isOwnUse"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，该优惠券除员工核销外，同时允许粉丝自助核销")])],1)],1):e._e()],1)],1)])],1),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"bottomButton textCenter buttonPosition"},[a("el-button",{staticClass:"marginRight15",attrs:{type:"primary"},on:{click:e.previousStep}},[e._v("上一步")]),e._v(" "),a("el-button",{staticClass:"marginLeft15",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下一步")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.stepActive,expression:"stepActive==2"}],staticClass:"pageSetup"},[a("el-form",{ref:"ruleForm1",staticClass:"marginLeft55",attrs:{model:e.ruleForm1,rules:e.rules1,"label-width":"170px"}},[a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginLeft55 marginBottom30"},[a("span",{staticClass:"marginLeft30"},[e._v("页面设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"LOGO编辑：",required:""}},[a("div",{staticClass:"pictureBox"},[a("div",{staticClass:"marginLeft20"},[a("el-form-item",{attrs:{prop:"loginUrl"}},[a("div",{staticClass:"Logo textCenter",on:{click:e.addPictureLogo}},[e.ruleForm1.loginUrl?a("img",{attrs:{src:e.ruleForm1.loginUrl}}):e._e(),e._v(" "),e.ruleForm1.loginUrl?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"72px",color:"#8c939d"}},[e._v("+")])])]),e._v(" "),a("div",[e._v("建议上传64*64尺寸的图片")])],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft20 marginBottom45",attrs:{prop:"brandName"}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.brandName,callback:function(t){e.$set(e.ruleForm1,"brandName",t)},expression:"ruleForm1.brandName"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券颜色：",required:""}},[a("el-color-picker",{model:{value:e.ruleForm1.color,callback:function(t){e.$set(e.ruleForm1,"color",t)},expression:"ruleForm1.color"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客服电话：",prop:"servicePhone"}},[a("el-input",{staticClass:"width220",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.servicePhone,callback:function(t){e.$set(e.ruleForm1,"servicePhone",t)},expression:"ruleForm1.servicePhone"}})],1),e._v(" "),a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginLeft55 marginBottom30"},[a("span",{staticClass:"marginLeft30"},[e._v("详情页设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"封面图文：",required:""}},[a("div",{staticClass:"pictureBox"},[a("div",{staticClass:"marginLeft20"},[a("el-form-item",{attrs:{prop:"iconUrlList"}},[a("div",{staticClass:"Logo textCenter",on:{click:e.addPictureCover}},[e.ruleForm1.iconUrlList?a("img",{attrs:{src:e.ruleForm1.iconUrlList}}):e._e(),e._v(" "),e.ruleForm1.iconUrlList?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"72px",color:"#8c939d"}},[e._v("+")])])]),e._v(" "),a("div",[e._v("建议上传64*64尺寸的图片")])],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft20",attrs:{prop:"summary"}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.summary,callback:function(t){e.$set(e.ruleForm1,"summary",t)},expression:"ruleForm1.summary"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券使用说明：",required:""}},[a("div",{attrs:{id:"editor-trigger"}}),e._v(" "),1==e.ruleForm1.descriptionState?a("div",{staticClass:"colorRed fontSize12 noUsePosition",style:{lineHeight:1,marginTop:"4px"}},[e._v("优惠券使用说明不能为空")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"图文介绍：",required:""}},[a("div",{staticClass:"pictureIntroduce"},e._l(e.ruleForm1.textImageList,function(t,n){return a("div",{key:n},[a("div",{staticClass:"Introduceuploaded"},[a("div",{staticClass:"pictureText textCenter",on:{click:function(t){e.addPictureIntroduce(n)}}},[a("el-form-item",{attrs:{prop:"textImageList."+n+".imageDetail",rules:[{required:!0,message:"您还未上传图片"}]}},[t.imageDetail?a("img",{attrs:{src:t.imageDetail,alt:""}}):e._e(),e._v(" "),t.imageDetail?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"70px",color:"#8c939d"}},[e._v("+")])])],1),e._v(" "),a("div",[e._v("建议上传680*300尺寸的图片")])]),e._v(" "),a("el-form-item",{staticClass:"marginLeft20",attrs:{prop:"textImageList."+n+".textDetail",rules:[{required:!0,message:"图片说明不能为空"}]}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:t.textDetail,callback:function(a){e.$set(t,"textDetail",a)},expression:"item.textDetail"}}),a("br")],1),e._v(" "),0==n&&e.ruleForm1.textImageList.length<20?a("el-button",{staticClass:"marginLeft20 marginTop45 marginBottom20",attrs:{type:"primary"},on:{click:function(t){e.addImageTextDescription(n)}}},[e._v("添加")]):e._e(),e._v(" "),n>0?a("el-button",{staticClass:"marginLeft20 marginTop45 marginBottom20",on:{click:function(t){e.deleteImageTextDescription(n)}}},[e._v("删除")]):e._e()],1)}))])],1),e._v(" "),a("div",{staticClass:"bottomButton textCenter buttonPosition"},[a("el-button",{staticClass:"marginRight15 editDescription",attrs:{type:"primary"},on:{click:e.previousStep}},[e._v("上一步")]),e._v(" "),a("el-button",{staticClass:"marginLeft15",attrs:{type:"primary"},on:{click:function(t){e.submitForm1("ruleForm1")}}},[e._v("下一步")])],1)],1),e._v(" "),3==e.stepActive?a("div",{staticClass:"publishSetup"},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm marginTop30",attrs:{model:e.ruleForm2,rules:e.rules2,"label-width":"150px"}},[a("div",{staticClass:"marginLeft55"},[a("el-form-item",{attrs:{label:"优惠券发行总数：",prop:"number"}},[a("el-input",{model:{value:e.ruleForm2.number,callback:function(t){e.$set(e.ruleForm2,"number",t)},expression:"ruleForm2.number"}}),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("不输入则默认发行优惠券不限张数")])],1),e._v(" "),a("el-form-item",{attrs:{label:"开启购买："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:e.isBuyClear},model:{value:e.ruleForm2.isBuy,callback:function(t){e.$set(e.ruleForm2,"isBuy",e._n(t))},expression:"ruleForm2.isBuy"}})],1),e._v(" "),1==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"buyFlagBox"},[a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"优惠券购买金额：",prop:"buyMoney"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm2.buyMoney,callback:function(t){e.$set(e.ruleForm2,"buyMoney",e._n(t))},expression:"ruleForm2.buyMoney"}},[a("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"marginTop20 marginLeft10",attrs:{label:" "}},[3!=e.cardType?a("el-checkbox-group",{model:{value:e.ruleForm2.discountType,callback:function(t){e.$set(e.ruleForm2,"discountType",t)},expression:"ruleForm2.discountType"}},[a("el-checkbox",{attrs:{label:1,name:"discountType"}},[e._v("购买时可享受会员折扣")]),a("br"),e._v(" "),a("el-checkbox",{attrs:{label:2,name:"discountType"}},[e._v("购买时可用积分做抵扣")]),a("br"),e._v(" "),a("el-checkbox",{attrs:{label:3,name:"discountType"}},[e._v("购买时可用粉币做抵扣")]),a("br")],1):e._e(),e._v(" "),3==e.cardType?a("div",e._l(e.ruleForm2.giftBuyMoney,function(t,n){return a("div",{key:n,staticClass:"giftDate"},[a("div",[a("el-form-item",{attrs:{prop:"giftBuyMoney."+n+".limiteData",rules:{required:!0,message:"请选择时间范围"}}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","picker-options":e.pickerOptions1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.limiteData,callback:function(a){e.$set(t,"limiteData",a)},expression:"item.limiteData"}}),e._v(" "),0==e.tipArray[n]?a("span",{staticClass:"colorRed datePosition"},[e._v("不能包含已被设置的日期")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"colorGray fontSize14"},[e._v("期间,礼品兑换券价格为")]),e._v(" "),a("div",{staticClass:"price"},[a("el-form-item",{attrs:{prop:"giftBuyMoney."+n+".money",rules:[{required:!0,message:"礼品兑换券价格不能为空"},{type:"number",min:0,message:"礼品兑换券价格必须为数字值"}]}},[a("el-input",{style:{width:"40px"},attrs:{placeholder:""},model:{value:t.money,callback:function(a){e.$set(t,"money",e._n(a))},expression:"item.money"}},[a("template",{slot:"prepend"},[e._v("￥")])],2),e._v("\n                      元\n                    ")],1)],1),e._v(" "),n>0?a("span",{staticClass:"deleteDataPrices",style:{color:"#20a0ff"},on:{click:function(t){e.deleteCurrentprices(n)}}},[e._v("删除")]):e._e(),e._v(" "),0==n?a("el-button",{staticClass:"marginLeft10",attrs:{type:"primary"},on:{click:function(t){e.addCurrentprices(n)}}},[e._v("添加时价")]):e._e()],1)})):e._e()],1)],1)]):e._e(),e._v(" "),0==e.ruleForm2.isBuy?a("el-form-item",{attrs:{label:"领取数量限制："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:e.isReceiveNumClear},model:{value:e.ruleForm2.isReceiveNum,callback:function(t){e.$set(e.ruleForm2,"isReceiveNum",e._n(t))},expression:"ruleForm2.isReceiveNum"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("关联”支付有礼赠送“活动时，请不要开启领取限制")])],1):e._e(),e._v(" "),1==e.ruleForm2.isReceiveNum&0==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"LimitNumBox"},[a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"最多领取数量规则："}},[a("el-radio-group",{model:{value:e.ruleForm2.limitType,callback:function(t){e.$set(e.ruleForm2,"limitType",e._n(t))},expression:"ruleForm2.limitType"}},[a("el-radio",{attrs:{label:0}},[e._v("每人每天最多领取")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("该优惠券每人最多领取")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"最多领取数量：",prop:"limitNum"}},[a("el-input",{model:{value:e.ruleForm2.limitNum,callback:function(t){e.$set(e.ruleForm2,"limitNum",e._n(t))},expression:"ruleForm2.limitNum"}})],1)],1)]):e._e(),e._v(" "),0==e.ruleForm2.isBuy?a("el-form-item",{attrs:{label:"推荐有奖："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:e.isRecommendClear},model:{value:e.ruleForm2.isRecommend,callback:function(t){e.$set(e.ruleForm2,"isRecommend",e._n(t))},expression:"ruleForm2.isRecommend"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，粉丝向他人推荐优惠券后可获得相应的奖励")])],1):e._e(),e._v(" "),1==e.ruleForm2.isRecommend&0==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"recommendBox"},[a("el-form-item",{attrs:{label:"赠送奖励：",prop:"reward"}},[a("el-checkbox-group",{model:{value:e.ruleForm2.reward,callback:function(t){e.$set(e.ruleForm2,"reward",t)},expression:"ruleForm2.reward"}},[a("el-checkbox",{attrs:{label:0,name:"reward"}},[e._v("积分")]),e._v(" "),a("el-checkbox",{attrs:{label:1,name:"reward"}},[e._v("粉币")]),e._v(" "),a("el-checkbox",{attrs:{label:2,name:"reward"}},[e._v("MB流量")]),e._v(" "),a("el-checkbox",{attrs:{label:3,name:"reward"}},[e._v("现金")])],1)],1),e._v(" "),e.ruleForm2.reward.length>0?a("el-form-item",{attrs:{label:"推荐成功后：",required:""}},[a("div",{staticClass:"recommendAfter fontSize14"},[-1!=e.ruleForm2.reward.indexOf(0)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10 marginLeft10 colorGray",style:{color:"#333"}},[e._v("赠送")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"jifen"}},[a("el-input",{model:{value:e.ruleForm2.jifen,callback:function(t){e.$set(e.ruleForm2,"jifen",e._n(t))},expression:"ruleForm2.jifen"}})],1),e._v(" "),a("span",{staticClass:"fl marginLeft10"},[e._v("积分，")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(1)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10"},[e._v("送粉币")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"fenbi"}},[a("el-input",{model:{value:e.ruleForm2.fenbi,callback:function(t){e.$set(e.ruleForm2,"fenbi",e._n(t))},expression:"ruleForm2.fenbi"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10"},[e._v("个")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(2)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10"},[e._v("送流量")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"flow"}},[a("el-input",{model:{value:e.ruleForm2.flow,callback:function(t){e.$set(e.ruleForm2,"flow",e._n(t))},expression:"ruleForm2.flow"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10"},[e._v("MB，")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(3)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10"},[e._v("送金额")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"money"}},[a("el-input",{model:{value:e.ruleForm2.money,callback:function(t){e.$set(e.ruleForm2,"money",e._n(t))},expression:"ruleForm2.money"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10"},[e._v("元")])],1):e._e()])]):e._e()],1)]):e._e()],1)]),e._v(" "),a("div",{staticClass:"bottomButton textCenter buttonPosition"},[a("el-button",{staticClass:"marginRight15",attrs:{type:"primary"},on:{click:e.previousStep}},[e._v("上一步")]),e._v(" "),a("el-button",{staticClass:"marginLeft15",attrs:{type:"primary"},on:{click:function(t){e.saveForm("ruleForm2")}}},[e._v("保存")])],1)],1):e._e(),e._v(" "),4==e.stepActive?a("div",{staticClass:"completeSetting"},[a("div",{staticClass:"successTip"},[a("div",{staticClass:"right"},[e._m(0),e._v(" "),1==e.cardType?a("p",{staticClass:"colorGray"},[e._v("折扣券创建成功")]):e._e(),e._v(" "),2==e.cardType?a("p",{staticClass:"colorGray"},[e._v("代金券创建成功")]):e._e(),e._v(" "),3==e.cardType?a("p",{staticClass:"colorGray"},[e._v("礼品兑换券创建成功")]):e._e(),e._v(" "),4==e.cardType?a("p",{staticClass:"colorGray"},[e._v("自定义券创建成功")]):e._e(),e._v(" "),1==e.useType?a("p",{style:{fontSize:"14px",color:"#999999"}},[e._v("请前往指定的ERP,商城等各多粉产品和应用选择优惠券，并设置相应的使用规则")]):e._e()])]),e._v(" "),a("div",{staticClass:"textCenter marginTop30"},[a("el-button",{staticClass:"marginLeft15 marginRight15",attrs:{type:"primary"},on:{click:e.previousStep}},[e._v("上一步")]),e._v(" "),a("router-link",{attrs:{to:"/createCoupon"}},[a("el-button",{staticClass:"marginLeft15 marginRight15",attrs:{type:"primary"},on:{click:e.refresh}},[e._v("继续创建")])],1),e._v(" "),a("router-link",{attrs:{to:"/couponMainMenu"}},[a("el-button",{staticClass:"marginLeft15"},[e._v("完成")])],1)],1)]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("i",{staticClass:"iconfont font44"},[this._v("")])])}]};var C=a("X4nt")(b,y,!1,function(e){a("Rmo/")},null,null).exports,w={data:function(){return{cardType:3,title:"礼品券",rowCount1:1,rowCount2:1,filterBusinessName:null,filterBusinessName1:null,filterBusinessName2:[],businessName1:null,businessName:null,useCondition:[{business_name:"",quantity:"",storeId:""}],iconState:!1,currentPage1:1,useLocationName:null,activeName:"second",searchContent2:null,searchContent1:null,input3:"",activeName2:"first",createPerson1:!1,QRcodeUrl:null,handleDelete1:!1,QRcode1:!1,buttonDisplay:!0,input:"",BusinessId:null,receiveCodeUrl:null,currentPage2:1,deleteId:null,subList:[{date:"2016-05-02 12:30:25",nickName:"12345678910",address:"9.5折券",tag:"谷通科技",tag2:"折扣券",tag3:"全场通用券",tag4:"车小算"},{date:"2016-05-02 12:30:25",nickName:"12345678910",address:"9.5折券",tag:"公司",tag2:"折扣券",tag3:"全场通用券",tag4:"车小算"},{date:"2016-05-02 12:30:25",nickName:"12345678910",address:"9.5折券",tag:"谷通科技",tag2:"折扣券",tag3:"全场通用券",tag4:"车小算"},{date:"2016-05-02 12:30:25",nickName:"12345678910",address:"9.5折券",tag:"谷通科技",tag2:"折扣券",tag3:"全场通用券",tag4:"车小算"}],subList1:[{nickName:"核销人员1",telephone:"12345678910",storeName:"谷通科技",state:"正常"},{nickName:"核销人员1",telephone:"12345678910",storeName:"谷通科技",state:"正常"},{nickName:"核销人员1",telephone:"12345678910",storeName:"谷通科技",state:"正常"},{nickName:"核销人员1",telephone:"12345678910",storeName:"谷通科技",state:"正常"}]}},beforeMount:function(){},mounted:function(){},methods:{moreDataIcon:function(){this.iconState=!this.iconState},keySearch2:function(){this.getVerification(this.searchContent2,this.currentPage2)},keyEnterSearch2:function(){this.getVerification(this.searchContent2,this.currentPage2)},keySearch1:function(){this.verificationList(this.searchContent1,this.currentPage1)},keyEnterSearch1:function(){this.verificationList(this.searchContent1,this.currentPage1)},handleClick:function(e,t){var a=this;(2==e.index&&a.getVerification(a.searchContent2,a.currentPage2),1==e.index)&&((a=this).verificationList(a.searchContent1,a.currentPage1),a.couponUseCondition())},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e);this.verificationList(this.searchContent1,this.currentPage1)},handleSizeChange1:function(e){console.log("每页 "+e+" 条")},handleCurrentChange1:function(e){console.log("当前页: "+e),this.currentPage2=e,this.getVerification(this.searchContent2,this.currentPage2)},createPerson:function(){this.createPerson1=!0,this.getCreatePersonBusiness(),parent.window.postMessage("openMask()","*")},cancelCreate:function(){this.createPerson1=!1,this.QRcode1=!1,this.buttonDisplay=!0,this.BusinessId=null,parent.window.postMessage("closeMask()","*")},createNext:function(){var e=this;this.QRcode1=!0,this.buttonDisplay=!1,e.getCreatePersonCode(function(){console.log("coderq ",e.receiveCodeUrl),e.QRcodeUrl=_.exportExcel+"/memberPc/duofenCoupon/qrCode?content="+e.receiveCodeUrl})},handleDelete:function(e,t){console.log(e,t),this.handleDelete1=!0,this.deleteId=t.id},cancelDelete:function(){this.handleDelete1=!1,parent.window.postMessage("closeMask()","*")},deleteAlert:function(){var e=this;this.handleDelete1=!1,e.deleteAuthorization(e.deleteId),e.getVerification(e.searchContent2,e.currentPage2)},filterTag:function(e,t){return t.businessName1===e},filterTag2:function(e,t){return t.cardType===e},filterTagBusiness:function(e,t){return t.businessName===e},couponUseCondition:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/authorization/usageStatistics",type:"get",data:{},success:function(t){if(null!=(t=t.data)&&t!==[]){var a=[];t.forEach(function(e,t){var n={business_name:null,quantity:null};n.business_name=e.business_name+"：",n.quantity=e.quantity+"张",a.push(n)}),e.useCondition=a}},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},noRepeatArray:function(e){for(var t=[e[0]],a=[],n=1;n<e.length;n++)-1==t.indexOf(e[n])&&t.push(e[n]);return t.forEach(function(e,t){a.push({text:e,value:e})}),a},noRepeatSelect:function(e){for(var t=[e[0]],a=1;a<e.length;a++)-1==t.indexOf(e[a])&&t.push(e[a]);return t},getVerification:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/authorization/getAuthorizationUser",type:"get",data:{searchContent:e,curPage:t},success:function(e){if(e){e=e.data;if(a.rowCount2=e.rowCount,null!=e.subList&&e.subList.length>0){var t=[],n=[];e.subList.forEach(function(e,a){var i={id:null,nickname:null,phone:null,businessName:null,status:null};i.id=e.id,i.nickname=e.nickname,i.phone=e.phone,void 0==e.businessName||null==e.businessName?i.businessName="无":i.businessName=e.businessName,i.status=e.status,0==e.status?i.status="正常":i.status="异常",t.push(i),n.push(e.businessName)}),a.subList1=t,a.filterBusinessName=a.noRepeatArray(n)}}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},getCreatePersonBusiness:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/getWxshops",type:"GET",data:{},success:function(t){var a=[];(t=t.data).forEach(function(e,t){var n={BusinessId:null,businessName:null};n.BusinessId=e.id,n.businessName=e.businessName,a.push(n)}),e.filterBusinessName2=e.noRepeatSelect(a)},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},getCreatePersonCode:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/authorization/getAddAuthUserUrl",type:"GET",data:{shopId:t.BusinessId},success:function(a){t.receiveCodeUrl=a.data.url,e()},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},deleteAuthorization:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/authorization/deleteById",type:"post",data:{id:e},success:function(e){t.$message({message:"删除成功",type:"success"})},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},verificationList:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/authorization/usageList",type:"post",data:{searchContent:e,curPage:t},success:function(e){a.rowCount1=e.data.rowCount;var t=[];if(null!=e.data.subList){var n=[];(e=e.data).subList.length>0?(e.subList.forEach(function(e,a){var i={operateDate:null,businessName:null,code:null,title:null,cardType:null,useLocationName:null};i.operateDate=_.formatTime(e.operateDate),i.businessName1=e.businessName,i.code=e.code,i.title=e.title,1==e.cardType&&(i.cardType="折扣券"),2==e.cardType&&(i.cardType="代金券"),3==e.cardType&&(i.cardType="礼品兑换券"),4==e.cardType&&(i.cardType="自定义券"),i.useLocationName=e.useLocationName,n.push(i.businessName1),t.push(i)}),a.subList=t):a.subList=[],a.filterBusinessName1=a.noRepeatArray(n)}else a.subList=[]},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},exportExcel:function(){var e=_.exportExcel+"/memberPc/duofenCoupon/exportExcel?type=5";window.location.href=e}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"authority"},[a("div",{staticClass:"mainContain"},[a("el-tabs",{staticClass:"marginTop30",attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticClass:"firstStep",attrs:{label:"优惠券核销",name:"first"}},[a("div",{staticClass:"search textCenter marginTop20"},[a("el-input",{attrs:{placeholder:"用扫码枪扫描或键盘输入"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),e._v(" "),a("div",{staticClass:"couponMiddle"},[a("div",[a("p",[e._v("优惠券名称：")]),e._v(" "),a("p",[e._v("优惠券类型：")]),e._v(" "),a("p",[e._v("优惠券名称：")]),e._v(" "),a("p",[e._v("优惠券类型：")])]),e._v(" "),a("div",[a("p",[e._v("9.5折券 ")]),e._v(" "),a("p",[e._v("9.5折券 ")]),e._v(" "),a("p",[e._v("9.5折券 ")]),e._v(" "),a("p",[e._v("9.5折券  ")])])]),e._v(" "),a("div",{staticClass:"money"},[a("div",[a("p",[e._v("消费金额：")]),e._v(" "),a("p",[e._v("应收金额：")])]),e._v(" "),a("div",[a("p",[a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}},[a("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),a("p",[a("span",{style:{color:"#f00",fontSize:"26px"}},[e._v("￥6587")])])])]),e._v(" "),a("div",{staticClass:"sureV"},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("确认核销")])],1)]),e._v(" "),a("el-tab-pane",{staticClass:"secondStep",attrs:{label:"核销列表",name:"second"}},[a("div",{staticClass:"useCondition marginTop20"},[a("p",{staticClass:"fontSize16 colorGray",style:{color:"#333"}},[e._v("门店优惠券使用情况")]),e._v(" "),e._l(e.useCondition,function(t,n){return a("div",{key:n,staticClass:"displayFlex"},[n>1&&1==e.iconState||n<2?a("p",[e._v(e._s(t.business_name)+e._s(t.quantity))]):e._e(),e._v(" "),null!=e.useCondition&&e.useCondition.length>2&&1==n?a("p",{staticClass:"fontSize14 morePosition"},[e._v("查看更多"),a("i",{staticClass:"el-dropdown__icon el-icon-arrow-down fontSize14 colorLowerGray",class:e.iconState?"rotateTop":"rotateBottom",on:{click:e.moreDataIcon}})]):e._e()])})],2),e._v(" "),a("div",{staticClass:"list"},[e._v("优惠券核销列表")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入优惠券码/名称",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch1(t)}},model:{value:e.searchContent1,callback:function(t){e.searchContent1=t},expression:"searchContent1"}}),e._v(" "),a("i",{staticClass:"iconfont iconColor",on:{click:e.keySearch1}},[e._v("")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:e.exportExcel}},[e._v("导出")]),e._v(" "),a("div",{staticClass:"marginTop20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList}},[a("el-table-column",{attrs:{prop:"operateDate",label:"时间",sortable:"","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessName1",label:"核销店铺","min-width":"100",filters:e.filterBusinessName1,"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.businessName1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"优惠券码","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"150",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"自定义券",value:"自定义券"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"useLocationName",label:"使用场景","min-width":"180"}})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage1,total:e.rowCount1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage1=t}}})],1)],1),e._v(" "),a("el-tab-pane",{staticClass:"thirdStep",attrs:{label:"核销权限管理",name:"third"}},[a("div",{staticClass:"create marginTop20"},[a("el-input",{staticClass:"marginLeft55",attrs:{placeholder:"请输入核销员手机号",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch2(t)}},model:{value:e.searchContent2,callback:function(t){e.searchContent2=t},expression:"searchContent2"}}),a("i",{staticClass:"iconfont iconColor",on:{click:e.keySearch2}},[e._v("")]),a("br"),e._v(" "),a("el-button",{staticClass:"marginLeft55 marginTop10 createBtn",attrs:{type:"text",size:"small"},on:{click:e.createPerson}},[e._v("新增核销员")])],1),e._v(" "),a("div",{staticClass:"nameList"},[e._v("核销人员名单")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList1}},[a("el-table-column",{attrs:{prop:"nickname",label:"昵称","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessName","min-width":"150",label:"门店",filters:e.filterBusinessName,"filter-method":e.filterTagBusiness,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.businessName))])]}}])},[e._v("\n          >\n          ")]),e._v(" "),a("el-table-column",{attrs:{prop:"status","min-width":"150",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage2,layout:"prev, pager, next, jumper",total:e.rowCount2},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPage2=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增授权",visible:e.createPerson1,"before-close":e.cancelCreate},on:{"update:visible":function(t){e.createPerson1=t}}},[a("div",{staticClass:"store"},[a("div",{staticClass:"textRight"},[e._v("选择门店：")]),e._v(" "),a("div",{staticClass:"selectStore"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.BusinessId,callback:function(t){e.BusinessId=t},expression:"BusinessId"}},e._l(e.filterBusinessName2,function(e){return a("el-option",{key:e.id,attrs:{label:e.businessName,value:e.BusinessId}})}))],1)]),e._v(" "),e.QRcode1?a("div",{staticClass:"QRcode marginTop30"},[a("div",{staticClass:"textRight marginRight20"},[e._v("二维码：")]),e._v(" "),a("div",[a("img",{attrs:{src:e.QRcodeUrl}})]),e._v(" "),a("div",[e._v("请用新增的核销人员手机扫描此二维码")])]):e._e(),e._v(" "),e.buttonDisplay?a("div",{staticClass:"marginTop210"},[a("el-button",{staticClass:"marginLeft20 marginTop20 fr",on:{click:e.cancelCreate}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"marginTop20 fr",attrs:{type:"primary"},on:{click:function(t){e.createNext()}}},[e._v("下一步")])],1):e._e(),e._v(" "),a("div",{staticClass:"clear"})]),e._v(" "),a("div",{staticClass:"deleteCoupon"},[a("el-dialog",{attrs:{title:"提示",visible:e.handleDelete1},on:{"update:visible":function(t){e.handleDelete1=t}}},[a("div",{staticClass:"fontIcon"},[a("i",{staticClass:"iconfont",style:{fontSize:"36px",color:"#f7ba2a"}},[e._v("")])]),e._v(" "),a("div",{staticClass:"wordTip"},[a("div",[e._v("此操作将永久删除该核销人员信息，是否继续？")]),e._v(" "),a("div",{style:{color:"#999"}},[e._v("点击确认后，就不可以恢复哦~")])]),e._v(" "),a("div",[a("el-button",{staticClass:"fr marginLeft20",on:{click:function(t){e.cancelDelete()}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.deleteAlert()}}},[e._v("确 定")])],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var T=a("X4nt")(w,x,!1,function(e){a("9AEk")},null,null).exports,S={components:{couponVerification:T},name:"Coupon-admin",data:function(){return{input:null,currentPage1:1,currentPage2:1,currentPage3:1,currentPage4:1,currentPage5:1,activeName2:"first",dialogStepsVisible:!1,handleGo1:!1,handleStop1:!1,handleCode1:!1,codeUrl:null,downLoadCode:null,handleDelete1:!1,handleStart1:!1,couponName:null,couponCast:[],cardStatus:null,deleteId:null,stopId:null,startId:null,tabIndex:0,rowCount1:1,rowCount2:1,rowCount3:1,rowCount4:1,rowCount5:1,codeText:null,auditQuantity:null,auditingQuantity:null,auditedQuantity:null,expiredQuantity:null,couponQuantity:null,subList1:[],subList2:[],subList3:[],subList4:[],subList:[{id:"",title:"9.5折券",useType:"全场通用",cardType:"折扣券",availableDate:"2016-09-13至2016-09-15",couponSendReceive:"1000张/100张",isBuy:"购买",cardStatus:0,forbidden:0,cardStatusWord:null},{id:"",title:"9.5折券",useType:"全场通用",cardType:"折扣券",availableDate:"2016-09-13至2016-09-15",couponSendReceive:"1000张/100张",isBuy:"免费",cardStatus:1,forbidden:0,cardStatusWord:null},{id:"",title:"9.5折券",useType:"全场通用",cardType:"折扣券",availableDate:"2016-09-13至2016-09-15",couponSendReceive:"1000张/100张",isBuy:"购买",cardStatus:2,forbidden:0,cardStatusWord:null},{id:"",title:"9.5折券",useType:"全场通用",cardType:"折扣券",availableDate:"2016-09-13至2016-09-15",couponSendReceive:"1000张/100张",isBuy:"购买",cardStatus:3,forbidden:0,cardStatusWord:null},{id:"",title:"9.5折券",useType:"全场通用",cardType:"折扣券",availableDate:"2016-09-13至2016-09-15",couponSendReceive:"1000张/100张",isBuy:"购买",cardStatus:4,forbidden:0,cardStatusWord:null}]}},beforeMount:function(){this.businessCouponNum(),this.firstContentData(this.couponName,1)},mounted:function(){},methods:{handleClick:function(e,t){if((n=this).tabIndex=e.index,n.couponName=null,0==e.index){var a=1;n.firstContentData(n.couponName,a)}if(1==e.index){a=1;n.secondContentData(n.couponName,a)}if(2==e.index){a=1;n.thirdContentData(n.couponName,a)}if(3==e.index){a=1;n.forthContentData(n.couponName,a)}if(4==e.index){var n;a=1;(n=this).allContentData(n.couponName,a)}},handleSizeChange:function(e){},keySearch:function(){var e=this;null!=e.couponName&&0==e.tabIndex&&e.firstContentData(e.couponName,e.currentPage1),1==e.tabIndex&&e.secondContentData(e.couponName,e.currentPage2),2==e.tabIndex&&e.thirdContentData(e.couponName,e.currentPage3),3==e.tabIndex&&e.forthContentData(e.couponName,e.currentPage4),4==e.tabIndex&&e.allContentData(e.couponName,e.currentPage5)},keyEnterSearch:function(){var e=this;0==e.tabIndex&&e.firstContentData(e.couponName,e.currentPage1),1==e.tabIndex&&e.secondContentData(e.couponName,e.currentPage2),2==e.tabIndex&&e.thirdContentData(e.couponName,e.currentPage3),3==e.tabIndex&&e.forthContentData(e.couponName,e.currentPage4),4==e.tabIndex&&e.allContentData(e.couponName,e.currentPage5)},handleCurrentChange:function(e){this.currentPage1=e,this.firstContentData(this.couponName,this.currentPage1)},handleCurrentChange1:function(e){this.currentPage2=e,this.secondContentData(this.couponName,this.currentPage2)},handleCurrentChange2:function(e){this.currentPage3=e,this.thirdContentData(this.couponName,this.currentPage3)},handleCurrentChange3:function(e){this.currentPage4=e,this.forthContentData(this.couponName,this.currentPage4)},handleCurrentChange4:function(e){this.currentPage5=e,this.allContentData(this.couponName,this.currentPage5)},handleCardStatus:function(e,t){var a=this;a.cardStatus=1,a.id=t.id,a.sendCardStatus(a.id),0==a.tabIndex&&a.firstContentData(a.couponName,a.currentPage1),1==a.tabIndex&&a.secondContentData(a.couponName,a.currentPage2),2==a.tabIndex&&a.thirdContentData(a.couponName,a.currentPage3),3==a.tabIndex&&a.forthContentData(a.couponName,a.currentPage4),4==a.tabIndex&&a.allContentData(a.couponName,a.currentPage5)},handleEdit:function(e,t){this.$router.push({path:"/editCoupon",query:{cardStatus:t.cardStatus,isReceiveNum:t.isReceiveNum,id:t.id}})},handleDelete:function(e,t){this.deleteId=t.id,this.handleDelete1=!this.handleDelete1,1==this.handleDelete1?parent.window.postMessage("openMask()","*"):0==this.handleDelete1&&parent.window.postMessage("closeMask()","*")},handleGo:function(e,t){this.handleGo1=!this.handleGo1,1==this.handleGo1?parent.window.postMessage("openMask()","*"):0==this.handleGo1&&parent.window.postMessage("closeMask()","*")},handleCode:function(e,t){this.handleCode1=!0,this.codeUrl=_.exportExcel+"/memberPc/duofenCoupon/qrCode?content="+t.receiveCouponUrl,this.codeText=t.receiveCouponUrl,this.downLoadCode=_.exportExcel+"/memberPc/duofenCoupon/downLoadQrCode?content="+t.receiveCouponUrl,parent.window.postMessage("openMask()","*")},downLoadQRCode:function(){var e=this.downLoadCode;window.location.href=e},handleDetail:function(e,t){this.$router.push({path:"/couponDetail",query:{id:t.id}})},handleStop:function(e,t){this.handleStop1=!0,parent.window.postMessage("openMask()","*"),this.stopId=t.id},handleStart:function(e,t){this.handleStart1=!0,parent.window.postMessage("openMask()","*"),this.startId=t.id},startAlert:function(){var e=this;this.handleStart1=!1,parent.window.postMessage("closeMask()","*"),e.startCoupon(e.startId),0==e.tabIndex&&e.firstContentData(e.couponName,e.currentPage1),1==e.tabIndex&&e.secondContentData(e.couponName,e.currentPage2),2==e.tabIndex&&e.thirdContentData(e.couponName,e.currentPage3),3==e.tabIndex&&e.forthContentData(e.couponName,e.currentPage4),4==e.tabIndex&&e.allContentData(e.couponName,e.currentPage5)},deleteAlert:function(){var e=this;this.handleDelete1=!1,e.deleteCoupon(e.deleteId),0==e.tabIndex&&e.firstContentData(e.couponName,e.currentPage1),1==e.tabIndex&&e.secondContentData(e.couponName,e.currentPage2),2==e.tabIndex&&e.thirdContentData(e.couponName,e.currentPage3),3==e.tabIndex&&e.forthContentData(e.couponName,e.currentPage4),4==e.tabIndex&&e.allContentData(e.couponName,e.currentPage5),parent.window.postMessage("closeMask()","*")},stopAlert:function(){var e=this;this.handleStop1=!1,parent.window.postMessage("closeMask()","*"),e.stopCoupon(e.stopId),0==e.tabIndex&&e.firstContentData(e.couponName,e.currentPage1),1==e.tabIndex&&e.secondContentData(e.couponName,e.currentPage2),2==e.tabIndex&&e.thirdContentData(e.couponName,e.currentPage3),3==e.tabIndex&&e.forthContentData(e.couponName,e.currentPage4),4==e.tabIndex&&e.allContentData(e.couponName,e.currentPage5)},formatter:function(e,t){return e.address},filterTag:function(e,t){return t.useType===e},filterTag1:function(e,t){return t.cardType===e},filterTag2:function(e,t){return t.isBuy===e},linkCopy:function(e){m()(e).select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"})},firstContentData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponListByBusId",type:"get",data:{cardStatus:"0,3",couponName:e,curPage:t},success:function(e){if(null!=e.data.subList){a.rowCount1=e.data.rowCount;var t=[];e.data.subList.forEach(function(e,a){var n={id:null,title:null,useType:null,cardType:null,availableDate:null,couponSendReceive:null,isBuy:null,cardStatus:null,forbidden:null,isReceiveNum:null,examinedDetail:null,passTime:null,cardStatusWord:null},i=e.beginTimestamp,r=e.endTimestamp;n.availableDate=i+"至"+r,n.id=e.id,n.title=e.title,n.isReceiveNum=e.isReceiveNum,1==e.useType&&(n.useType="通用券"),2==e.useType&&(n.useType="指定券"),1==e.cardType&&(n.cardType="折扣券"),2==e.cardType&&(n.cardType="代金券"),3==e.cardType&&(n.cardType="礼品兑换券 "),3==e.cardType&&(n.cardType="自定义券 "),n.couponSendReceive=e.number+"/"+e.isReceiveNum,n.isBuy=e.isBuy,1==e.isBuy&&(n.isBuy="购买"),0==e.isBuy&&(n.isBuy="免费领取"),0==e.cardStatus&&(n.cardStatusWord="未审核"),1==e.cardStatus&&(n.cardStatusWord="审核中"),2==e.cardStatus&&(n.cardStatusWord="已审核"),3==e.cardStatus&&(n.cardStatusWord="审核未通过"),4==e.cardStatus&&(n.cardStatusWord="已过期"),n.cardStatus=e.cardStatus,n.forbidden=e.forbidden,n.examinedDetail=e.examinedDetail,n.passTime=_.formatTime(e.passTime),t.push(n)}),a.subList=t}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},secondContentData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponListByBusId",type:"get",data:{couponName:e,cardStatus:1,curPage:t},success:function(e){if(null!=e.data.subList&&e.data.subList!=[]&&""!=e.data.subList){a.rowCount2=e.data.rowCount;var t=[];e.data.subList.forEach(function(e,a){var n={id:null,title:null,useType:null,cardType:null,availableDate:null,couponSendReceive:null,isBuy:null,cardStatus:null,forbidden:null,isReceiveNum:null},i=e.beginTimestamp,r=e.endTimestamp;n.availableDate=i+"至"+r,n.id=e.id,n.title=e.title,n.isReceiveNum=e.isReceiveNum,1==e.useType&&(n.cardType="通用券"),2==e.useType&&(n.cardType="指定券"),1==e.cardType&&(n.cardType="折扣券"),2==e.cardType&&(n.cardType="代金券"),3==e.cardType&&(n.cardType="礼品兑换券 "),3==e.cardType&&(n.cardType="自定义券 "),n.couponSendReceive=e.number+"/"+e.isReceiveNum,n.isBuy=e.isBuy,1==e.isBuy&&(n.isBuy="购买"),0==e.isBuy&&(n.isBuy="免费领取"),0==e.cardStatus&&(n.cardStatusWord="未审核"),1==e.cardStatus&&(n.cardStatusWord="审核中"),2==e.cardStatus&&(n.cardStatusWord="已审核"),3==e.cardStatus&&(n.cardStatusWord="审核未通过"),4==e.cardStatus&&(n.cardStatusWord="已过期"),n.cardStatus=e.cardStatus,n.forbidden=e.forbidden,t.push(n)}),a.subList1=t}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},thirdContentData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponListByBusId",type:"get",data:{couponName:e,cardStatus:2,curPage:t},success:function(e){if(null!=e.data.subList&&e.data.subList!=[]&&""!=e.data.subList){a.rowCount3=e.data.rowCount;var t=[];e.data.subList.forEach(function(e,a){var n={id:null,title:null,useType:null,cardType:null,availableDate:null,couponSendReceive:null,isBuy:null,cardStatus:null,forbidden:null,isReceiveNum:null,cardStatusWord:null,receiveCouponUrl:null},i=e.beginTimestamp,r=e.endTimestamp;n.availableDate=i+"至"+r,n.id=e.id,n.title=e.title,n.isReceiveNum=e.isReceiveNum,1==e.useType&&(n.cardType="通用券"),2==e.useType&&(n.cardType="指定券"),1==e.cardType&&(n.cardType="折扣券"),2==e.cardType&&(n.cardType="代金券"),3==e.cardType&&(n.cardType="礼品兑换券 "),3==e.cardType&&(n.cardType="自定义券 "),n.couponSendReceive=e.number+"/"+e.isReceiveNum,n.isBuy=e.isBuy,1==e.isBuy&&(n.isBuy="购买"),0==e.isBuy&&(n.isBuy="免费领取"),0==e.cardStatus&&(n.cardStatusWord="未审核"),1==e.cardStatus&&(n.cardStatusWord="审核中"),2==e.cardStatus&&(n.cardStatusWord="已审核"),3==e.cardStatus&&(n.cardStatusWord="审核未通过"),4==e.cardStatus&&(n.cardStatusWord="已过期"),n.cardStatus=e.cardStatus,n.forbidden=e.forbidden,n.receiveCouponUrl=e.receiveCouponUrl,t.push(n)}),a.subList2=t}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},forthContentData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponListByBusId",type:"get",data:{cardStatus:4,curPage:t},success:function(e){if(null!=e.data.subList&&e.data.subList!=[]&&""!=e.data.subList){var t=[];a.rowCount4=e.data.rowCount,e.data.subList.forEach(function(e,a){var n={id:null,title:null,useType:null,cardType:null,availableDate:null,couponSendReceive:null,isBuy:null,cardStatus:null,forbidden:null,isReceiveNum:null,cardStatusWord:null},i=e.beginTimestamp,r=e.endTimestamp;n.availableDate=i+"至"+r,n.id=e.id,n.title=e.title,n.isReceiveNum=e.isReceiveNum,1==e.useType&&(n.cardType="通用券"),2==e.useType&&(n.cardType="指定券"),1==e.cardType&&(n.cardType="折扣券"),2==e.cardType&&(n.cardType="代金券"),3==e.cardType&&(n.cardType="礼品兑换券 "),3==e.cardType&&(n.cardType="自定义券 "),n.couponSendReceive=e.number+"/"+e.isReceiveNum,n.isBuy=e.isBuy,1==e.isBuy&&(n.isBuy="购买"),0==e.isBuy&&(n.isBuy="免费领取"),0==e.cardStatus&&(n.cardStatusWord="未审核"),1==e.cardStatus&&(n.cardStatusWord="审核中"),2==e.cardStatus&&(n.cardStatusWord="已审核"),3==e.cardStatus&&(n.cardStatusWord="审核未通过"),4==e.cardStatus&&(n.cardStatusWord="已过期"),n.cardStatus=e.cardStatus,n.forbidden=e.forbidden,t.push(n)}),a.subList3=t}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},allContentData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponListByBusId",type:"get",data:{couponName:e,currentPage:t},success:function(e){if(null!=e.data.subList&&e.data.subList!=[]&&""!=e.data.subList){var t=[];a.rowCount5=e.data.rowCount,e.data.subList.forEach(function(e,a){var n={id:null,title:null,useType:null,cardType:null,availableDate:null,couponSendReceive:null,isBuy:null,cardStatus:null,forbidden:null,isReceiveNum:null,examinedDetail:null,passTime:null,cardStatusWord:null,receiveCouponUrl:null},i=e.beginTimestamp,r=e.endTimestamp;n.availableDate=i+"至"+r,n.id=e.id,n.title=e.title,n.isReceiveNum=e.isReceiveNum,1==e.useType&&(n.useType="通用券"),2==e.useType&&(n.useType="指定券"),1==e.cardType&&(n.cardType="折扣券"),2==e.cardType&&(n.cardType="代金券"),3==e.cardType&&(n.cardType="礼品兑换券 "),3==e.cardType&&(n.cardType="自定义券 "),n.couponSendReceive=e.number+"/"+e.isReceiveNum,n.isBuy=e.isBuy,1==e.isBuy&&(n.isBuy="购买"),0==e.isBuy&&(n.isBuy="免费领取"),0==e.cardStatus&&(n.cardStatusWord="未审核"),1==e.cardStatus&&(n.cardStatusWord="审核中"),2==e.cardStatus&&(n.cardStatusWord="已审核"),3==e.cardStatus&&(n.cardStatusWord="审核未通过"),4==e.cardStatus&&(n.cardStatusWord="已过期"),n.cardStatus=e.cardStatus,n.forbidden=e.forbidden,n.examinedDetail=e.examinedDetail,n.passTime=e.passTime,n.receiveCouponUrl=e.receiveCouponUrl,t.push(n)}),a.subList4=t}},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})},sendCardStatus:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/updateCouponNewById",type:"POST",data:{id:e,cardStatus:1},success:function(e){},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},deleteCoupon:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/deleteByCouponId",type:"POST",data:{id:e},success:function(e){t.$message({message:e.msg,type:"error"})},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},stopCoupon:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/updateCouponPublishById",type:"post",data:{id:e,forbidden:1},success:function(e){t.$message({message:e.msg,type:"success"})},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},startCoupon:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/updateCouponPublishById",type:"post",data:{id:e,forbidden:0},success:function(e){t.$message({message:e.msg,type:"success"})},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},businessCouponNum:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponQuantity",type:"get",data:{},success:function(t){if(0==t.code&&null!=t.data&&t.data!={}){t=t.data;e.auditingQuantity=t.auditingQuantity,e.auditedQuantity=t.auditedQuantity,e.auditQuantity=t.auditQuantity,e.expiredQuantity=t.expiredQuantity,e.couponQuantity=t.couponQuantity}},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"coupon"}},[a("div",{staticClass:"mainContent"},[0==e.couponQuantity||null==e.couponQuantity?a("div",[a("div",{staticClass:"search"},[a("router-link",{attrs:{to:"/createCoupon"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("新增优惠券")])],1),e._v(" "),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("帮助")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogStepsVisible=!1}}},[a("i",{staticClass:"iconfont iconColor"},[e._v("")])]),e._v(" "),a("div",{staticClass:"video"},[a("el-button",{attrs:{type:"warning",size:"small"}},[a("i",{staticClass:"iconfont fontSize12"},[e._v("  ")]),e._v("视频教程")])],1)],1),e._v(" "),a("div",{staticClass:"createTip"},[e._m(0),e._v(" "),a("p",{staticClass:"colorLowerGray"},[e._v("暂时没有已创建的优惠券，快去 "),a("router-link",{style:{color:"#20a0ff"},attrs:{to:"/createCoupon"}},[e._v("创建优惠券")])],1)])]):e._e(),e._v(" "),a("div",[a("div",{staticClass:"search"},[a("el-button",{staticClass:"video",attrs:{type:"warning",size:"small"}},[a("i",{staticClass:"iconfont fontSize12"},[e._v("  ")]),e._v("视频教程")]),e._v(" "),a("router-link",{attrs:{to:"/createCoupon"}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("新增优惠券")])],1),e._v(" "),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("帮助")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogStepsVisible=!0}}},[a("i",{staticClass:"iconfont iconColor"},[e._v("")])])],1),e._v(" "),a("div",{staticClass:"TabManage marginLeft55 marginTop20 marginRight55"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"待送审("+e.auditQuantity+")",name:"first"}},[a("div",{staticClass:"searchList"},[a("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch(t)}},model:{value:e.couponName,callback:function(t){e.couponName="string"==typeof t?t.trim():t},expression:"couponName"}}),e._v(" "),a("i",{staticClass:"iconfont colorLowerGray searchPosiotion",on:{click:e.keySearch}},[e._v(" ")])],1),e._v(" "),a("div",{staticClass:"form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList}},[a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"125",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"自定义券",value:"自定义券"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"availableDate",label:"优惠券有效期","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponSendReceive",label:"发行总数/已领取","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isBuy",label:"领取方式","min-width":"105",filters:[{text:"免费",value:"免费"},{text:"购买",value:"购买"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.isBuy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardStatusWord",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.cardStatus?a("div",[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("审核时间: "+e._s(t.row.passTime))]),e._v(" "),a("p",[e._v("不通过理由: "+e._s(t.row.examinedDetail))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{staticStyle:{color:"#f56c6c"},attrs:{size:"medium"}},[e._v(e._s(t.row.cardStatusWord))])],1)])],1):a("div",[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.cardStatusWord))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleCardStatus(t.$index,t.row)}}},[e._v("送审")]):e._e(),e._v(" "),4!=t.row.cardStatus?a("el-button",{attrs:{size:"mini",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e._e(),e._v(" "),2==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.forbidden},on:{click:function(a){e.handleCode(t.$index,t.row)}}},[e._v("领券二维码")]):e._e(),e._v(" "),2==t.row.cardStatus||3==t.row.cardStatus||4==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),2==t.row.cardStatus&&0==t.row.forbidden?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStop(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.cardStatus&&1==t.row.forbidden?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStart(t.$index,t.row)}}},[e._v("启用")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":10,background:"",total:e.rowCount1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage1=t}}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"审核中("+e.auditingQuantity+")",name:"second"}},[a("div",{staticClass:"searchList"},[a("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch()}},model:{value:e.couponName,callback:function(t){e.couponName="string"==typeof t?t.trim():t},expression:"couponName"}}),e._v(" "),a("i",{staticClass:"iconfont colorLowerGray searchPosiotion",on:{click:e.keySearch}},[e._v(" ")])],1),e._v(" "),a("div",{staticClass:"form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList1}},[a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"125",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"通用券",value:"通用券"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType)+"\n                      ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"availableDate",label:"优惠券有效期","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponSendReceive",label:"发行总数/已领取","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isBuy",label:"领取方式","min-width":"105",filters:[{text:"免费",value:"免费"},{text:"购买",value:"购买"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.isBuy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardStatusWord",label:"状态","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleCardStatus(t.$index,t.row)}}},[e._v("送审")]):e._e(),e._v(" "),4!=t.row.cardStatus?a("el-button",{attrs:{size:"mini",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e._e(),e._v(" "),2==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.forbidden},on:{click:function(a){e.handleCode(t.$index,t.row)}}},[e._v("领券二维码")]):e._e(),e._v(" "),2==t.row.cardStatus||3==t.row.cardStatus||4==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),2==t.row.cardStatus&&0==t.row.forbidden?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStop(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.cardStatus&&1==t.row.forbidden?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStart(t.$index,t.row)}}},[e._v("启用")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-size":10,background:"",total:e.rowCount2},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage2=t}}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"已审核("+e.auditedQuantity+")",name:"third"}},[a("div",{staticClass:"searchList"},[a("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch()}},model:{value:e.couponName,callback:function(t){e.couponName="string"==typeof t?t.trim():t},expression:"couponName"}}),e._v(" "),a("i",{staticClass:"iconfont colorLowerGray searchPosiotion",on:{click:e.keySearch}},[e._v(" ")])],1),e._v(" "),a("div",{staticClass:"form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList2}},[a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"125",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"通用券",value:"通用券"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"availableDate",label:"优惠券有效期","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponSendReceive",label:"发行总数/已领取","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isBuy",label:"领取方式","min-width":"105",filters:[{text:"免费",value:"免费"},{text:"购买",value:"购买"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.isBuy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardStatusWord",label:"状态","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleCardStatus(t.$index,t.row)}}},[e._v("送审")]):e._e(),e._v(" "),4!=t.row.cardStatus?a("el-button",{attrs:{size:"mini",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e._e(),e._v(" "),2==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.forbidden},on:{click:function(a){e.handleCode(t.$index,t.row)}}},[e._v("领券二维码")]):e._e(),e._v(" "),2==t.row.cardStatus||3==t.row.cardStatus||4==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),2==t.row.cardStatus&&0==t.row.forbidden?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStop(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.cardStatus&&1==t.row.forbidden?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStart(t.$index,t.row)}}},[e._v("启用")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage3,"page-size":10,background:"",total:e.rowCount3},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage3=t}}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"已过期("+e.expiredQuantity+")",name:"forth"}},[a("div",{staticClass:"searchList"},[a("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch()}},model:{value:e.couponName,callback:function(t){e.couponName="string"==typeof t?t.trim():t},expression:"couponName"}}),e._v(" "),a("i",{staticClass:"iconfont colorLowerGray searchPosiotion",on:{click:e.keySearch}},[e._v(" ")])],1),e._v(" "),a("div",{staticClass:"form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList3}},[a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"125",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"通用券",value:"通用券"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"availableDate",label:"优惠券有效期","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponSendReceive",label:"发行总数/已领取","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isBuy",label:"领取方式","min-width":"105",filters:[{text:"免费",value:"免费"},{text:"购买",value:"购买"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.isBuy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardStatusWord",label:"状态","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleCardStatus(t.$index,t.row)}}},[e._v("送审")]):e._e(),e._v(" "),4!=t.row.cardStatus?a("el-button",{attrs:{size:"mini",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e._e(),e._v(" "),2==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.forbidden},on:{click:function(a){e.handleCode(t.$index,t.row)}}},[e._v("领券二维码")]):e._e(),e._v(" "),2==t.row.cardStatus||3==t.row.cardStatus||4==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),2==t.row.cardStatus&&0==t.row.forbidden?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStop(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.cardStatus&&1==t.row.forbidden?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStart(t.$index,t.row)}}},[e._v("启用")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-size":10,background:"",total:e.rowCount4},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange3,"update:currentPage":function(t){e.currentPage4=t}}})],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"全部("+e.couponQuantity+")",name:"fifth"}},[a("div",{staticClass:"searchList"},[a("el-input",{attrs:{placeholder:"请输入搜索关键词",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keyEnterSearch()}},model:{value:e.couponName,callback:function(t){e.couponName="string"==typeof t?t.trim():t},expression:"couponName"}}),e._v(" "),a("i",{staticClass:"iconfont colorLowerGray searchPosiotion",on:{click:e.keySearch}},[e._v(" ")])],1),e._v(" "),a("div",{staticClass:"form"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList4}},[a("el-table-column",{attrs:{prop:"title",label:"优惠券名称","min-width":"100"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"cardType",label:"优惠券类型","min-width":"125",filters:[{text:"折扣券",value:"折扣券"},{text:"代金券",value:"代金券"},{text:"礼品兑换券",value:"礼品兑换券"},{text:"通用券",value:"通用券"}],"filter-method":e.filterTag1,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.cardType)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"availableDate",label:"优惠券有效期","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"couponSendReceive",label:"发行总数/已领取","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isBuy",label:"领取方式","min-width":"105",filters:[{text:"免费",value:"免费"},{text:"购买",value:"购买"}],"filter-method":e.filterTag2,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{"close-transition":""}},[e._v(e._s(t.row.isBuy))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cardStatusWord",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.cardStatus?a("div",[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("审核时间: "+e._s(t.row.passTime))]),e._v(" "),a("p",[e._v("不通过理由: "+e._s(t.row.examinedDetail))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{staticStyle:{color:"red"},attrs:{size:"medium"}},[e._v(e._s(t.row.cardStatusWord))])],1)])],1):a("div",[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.cardStatusWord))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleCardStatus(t.$index,t.row)}}},[e._v("送审")]):e._e(),e._v(" "),4!=t.row.cardStatus?a("el-button",{attrs:{size:"mini",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),0==t.row.cardStatus||1==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.cardStatus},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e(),e._v(" "),e._e(),e._v(" "),2==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary",disabled:1==t.row.forbidden},on:{click:function(a){e.handleCode(t.$index,t.row)}}},[e._v("领券二维码")]):e._e(),e._v(" "),2==t.row.cardStatus||3==t.row.cardStatus||4==t.row.cardStatus?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleDetail(t.$index,t.row)}}},[e._v("详情")]):e._e(),e._v(" "),2==t.row.cardStatus&&0==t.row.forbidden?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStop(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.cardStatus&&1==t.row.forbidden?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStart(t.$index,t.row)}}},[e._v("启用")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block textRight marginTop20 pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage5,"page-size":10,background:"",total:e.rowCount5},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange4,"update:currentPage":function(t){e.currentPage5=t}}})],1)])],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"优惠券创建流程",visible:e.dialogStepsVisible},on:{"update:visible":function(t){e.dialogStepsVisible=t}}},[a("div",[a("div",{staticStyle:{height:"400px"}},[a("div",{staticClass:"el-steps el-steps--vertical",style:{margin:0,padding:0,border:"none"}},[a("div",{staticClass:"el-step is-vertical",staticStyle:{"flex-basis":"50%"}},[a("div",{staticClass:"el-step__head is-finish"},[a("div",{staticClass:"el-step__line",staticStyle:{"margin-right":"0px"}},[a("i",{staticClass:"el-step__line-inner",staticStyle:{"transition-delay":"0ms","border-width":"0px",height:"0%"}})]),e._v(" "),a("div",{staticClass:"el-step__icon is-text"},[a("div",{staticClass:"el-step__icon-inner"},[e._v("1")])])]),e._v(" "),a("div",{staticClass:"el-step__main"},[a("div",{staticClass:"el-step__title is-finish"},[e._v("步骤1")]),e._v(" "),a("div",{staticClass:"el-step__description is-finish marginBottom10",style:{lineHeight:"25px"}},[e._v("创建优惠券")]),e._v(" "),a("div",{staticClass:"el-step__description"},[e._v("点击「新增优惠券」即可进行优惠券的创建"),a("br"),e._v("全场通用券：全场通用，所有门店通用通兑，线上与线下通用。"),a("br"),e._v(" 指定券：可指定特定商品或服务")])])]),e._v(" "),a("div",{staticClass:"el-step is-vertical",staticStyle:{"flex-basis":"50%"}},[a("div",{staticClass:"el-step__head is-finish"},[a("div",{staticClass:"el-step__line",staticStyle:{"margin-right":"0px"}},[a("i",{staticClass:"el-step__line-inner",staticStyle:{"transition-delay":"0ms","border-width":"0px",height:"0%"}})]),e._v(" "),a("div",{staticClass:"el-step__icon is-text"},[a("div",{staticClass:"el-step__icon-inner"},[e._v("2")])])]),e._v(" "),a("div",{staticClass:"el-step__main"},[a("div",{staticClass:"el-step__title is-finish"},[e._v("步骤2")]),e._v(" "),a("div",{staticClass:"el-step__description is-finish"},[e._v("设置使用规则")]),e._v(" "),a("div",{staticClass:"el-step__description"},[e._v("全场通用券无需设置使用规则"),a("br"),e._v("指定需前往指定的ERP、商城等各多粉产品和应用选择优惠券，并设置相应的使用规则")])])]),e._v(" "),a("div",{staticClass:"el-step is-vertical",staticStyle:{"flex-basis":"50%"}},[a("div",{staticClass:"el-step__head is-finish"},[a("div",{staticClass:"el-step__line",staticStyle:{"margin-right":"0px"}},[a("i",{staticClass:"el-step__line-inner",staticStyle:{"transition-delay":"0ms","border-width":"0px",height:"0%"}})]),e._v(" "),a("div",{staticClass:"el-step__icon is-text"},[a("div",{staticClass:"el-step__icon-inner"},[e._v("3")])])]),e._v(" "),a("div",{staticClass:"el-step__main"},[a("div",{staticClass:"el-step__title is-finish"},[e._v("步骤3")]),e._v(" "),a("div",{staticClass:"el-step__description is-finish"},[e._v("粉丝使用核销")]),e._v(" "),a("div",{staticClass:"el-step__description"},[e._v("粉丝将在相应的渠道领取商家投放的优惠券，并根据相应设置在商家指引下进行自助核销或扫码核销；"),a("br"),e._v("\n                商家可在「优惠券核销」页面对优惠券进行核销；"),a("br"),e._v("\n                商家在「核销权限管理」页面使用微信扫码进行授权核销权限后，该微信账号可用手机直接核销优惠券")])])])])])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogStepsVisible=!1}}},[e._v("我知道了")])],1)]),e._v(" "),a("div",{staticClass:"goCoupon"},[a("el-dialog",{attrs:{title:"前往指定",visible:e.handleGo1},on:{"update:visible":function(t){e.handleGo1=t}}},[a("div",[e._v("选择指定应用/多粉产品")]),e._v(" "),a("div",{style:{color:"#999"}},[e._v("提示：选择要指定的应用/多粉产品后，需前往该应用/多粉产品进行使用规则的设置")]),e._v(" "),a("div",{staticClass:"select marginTop20"},[a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("优惠买单"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])]),e._v(" "),a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("车小算"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])]),e._v(" "),a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("康小厨"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])]),e._v(" "),a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("翼店"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])])]),e._v(" "),a("div",{staticClass:"select"},[a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("小红十"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])]),e._v(" "),a("div",{staticClass:"selectBox",style:{borderColor:"#20a0ff"}},[e._v("揽胜家园"),a("i",{staticClass:"iconfont colorBlue fontSize24 commonIcon"},[e._v("")])])]),e._v(" "),a("div",{staticClass:"clear marginTop30"}),e._v(" "),a("el-button",{staticClass:"fr marginLeft20",on:{click:function(t){e.handleGo1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.handleGo1=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"stopCoupon"},[a("el-dialog",{attrs:{title:"",visible:e.handleCode1},on:{"update:visible":function(t){e.handleCode1=t}}})],1),e._v(" "),a("div",{staticClass:"deleteCoupon"},[a("el-dialog",{attrs:{title:"提示",visible:e.handleDelete1},on:{"update:visible":function(t){e.handleDelete1=t}}},[a("div",{staticClass:"fontIcon"},[a("i",{staticClass:"iconfont",style:{fontSize:"36px",color:"#f7ba2a"}},[e._v("")])]),e._v(" "),a("div",{staticClass:"wordTip"},[a("div",[e._v("确定删除优惠券吗？")]),e._v(" "),a("div",{style:{color:"#999"}},[e._v("点击确认后，就不可以恢复哦~")])]),e._v(" "),a("el-button",{staticClass:"fr marginLeft20",on:{click:function(t){e.handleDelete1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){e.deleteAlert()}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"startCoupon"},[a("el-dialog",{attrs:{visible:e.handleStart1},on:{"update:visible":function(t){e.handleStart1=t}}},[a("div",[e._v("是否开启该优惠券")]),e._v(" "),a("el-button",{staticClass:"marginLeft20 marginTop20 fr",on:{click:function(t){e.handleStart1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"marginTop20 fr",attrs:{type:"primary"},on:{click:function(t){e.startAlert()}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"stopCoupon"},[a("el-dialog",{attrs:{visible:e.handleStop1},on:{"update:visible":function(t){e.handleStop1=t}}},[a("div",[e._v("是否停用该优惠券")]),e._v(" "),a("el-button",{staticClass:"marginLeft20 marginTop20 fr",on:{click:function(t){e.handleStop1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"marginTop20 fr",attrs:{type:"primary"},on:{click:function(t){e.stopAlert()}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"receiveCode"},[a("el-dialog",{attrs:{title:"领券二维码",visible:e.handleCode1},on:{"update:visible":function(t){e.handleCode1=t}}},[a("div",{staticClass:"QRcodeBox"},[a("div",{staticClass:"width100 textRight"},[e._v("二维码：")]),e._v(" "),a("div",[a("img",{style:{width:"160px"},attrs:{src:e.codeUrl}})]),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.downLoadQRCode}},[e._v("下载二维码")])],1)]),e._v(" "),a("div",{staticClass:"couponLink"},[a("div",{staticClass:"width100 textRight"},[e._v("\n          优惠券链接：\n        ")]),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"请输入内容",size:"small",id:"copy"},model:{value:e.codeText,callback:function(t){e.codeText=t},expression:"codeText"}})],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.linkCopy("#copy")}}},[e._v("复制")])],1)])])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("i",{staticClass:"iconfont iconColor fontSize32"},[this._v("")])])}]};var F=a("X4nt")(S,k,!1,function(e){a("WUmY")},null,null).exports,D={name:"coupon-detail",data:function(){return{useType:1,cardType:null,title:null,discount:null,reduceCost:null,gift:null,defaultDetail:null,couponDescription:null,type:null,createDate:null,beginTimestamp:null,endTimestamp:null,fixedTerm:null,fixedBeginTerm:null,servicePhone:null,number:null,canShare:null,addUser:null,jifen:null,fenbi:null,flow:null,money:null,isSendMsg:null,isOwnUse:null,receiveNum:null,usedQuantity:null,receiveQuantity:null,isBuy:0,buyMoney:null,week:[],limitType:null,limitNum:null,integral:null,useFenbi:null,changeFlow:null,discountMoney:null,searchContent:null,currentPage3:1,totalMoney:null,discountAfterMoney:null,paymentNames:null,rowCount:null,pageSize:10,subList:[],dialogVisible:!1}},beforeMount:function(){this.getDetailData(),this.getTelData(this.searchContent,this.currentPage3)},methods:{handleClick:function(e,t){console.log(e,t)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage3=e,this.getTelData(this.searchContent,this.currentPage3)},handleClose:function(e){this.dialogVisible=!1,parent.window.postMessage("closeMask()","*")},handleSatrt:function(){this.dialogVisible=!0,parent.window.postMessage("openMask()","*")},stringToArray:function(e){return e.split(",").map(function(e){return parseInt(e)})},searchKeyCode:function(){this.getTelData(this.searchContent,this.currentPage3)},searchClick:function(){this.getTelData(this.searchContent,this.currentPage3)},exportClick:function(){if(1==this.isBuy){var e=_.exportExcel+"/memberPc/duofenCoupon/exportExcel?type=6";window.location.href=e+"&couponId="+this.$route.query.id}if(0==this.isBuy){var t=_.exportExcel+"/memberPc/duofenCoupon/exportExcel?type=7";window.location.href=t+"&couponId="+this.$route.query.id}},detailData:function(e){var t=e.code;console.log(t),this.handleSatrt(),this.getBuyDetailData(t)},getDetailData:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/findCouponDetail",type:"get",data:{id:e.$route.query.id},success:function(t){console.log(void 0===t?"undefined":h()(t)),console.log("second数据===",t),console.log("second数据===",t.data.number),t.data&&(console.log(t.data),e.useType=t.data.useType,e.cardType=t.data.cardType,e.title=t.data.title,e.type=t.data.type,e.createDate=_.formatDateTime(t.data.createDate),1==t.data.cardType&&(e.couponDescription="可打"+t.data.discount+"折"),2==t.data.cardType&&(e.couponDescription="可减"+t.data.reduceCost+"元"),3==t.data.cardType&&(null==t.data.gift||""==t.data.gift?e.couponDescription="可兑换无":e.couponDescription="可兑换"+t.data.gift),4==t.data.cardType&&(e.couponDescription=t.data.reduceCost.couponDescription),e.fixedTerm=t.data.fixedTerm,e.fixedBeginTerm=t.data.fixedBeginTerm,e.beginTimestamp=t.data.beginTimestamp,e.endTimestamp=t.data.endTimestamp,e.week=e.stringToArray(t.data.week),e.servicePhone=t.data.servicePhone,e.usedQuantity=t.data.usedQuantity,e.receiveQuantity=t.data.receiveQuantity,e.number=t.data.number,e.isBuy=t.data.isBuy,e.buyMoney=t.data.buyMoney,e.canShare=t.data.canShare,e.isSendMsg=t.data.isSendMsg,e.isOwnUse=t.data.isOwnUse,e.addUser=t.data.addUser,e.limitType=t.data.limitType,e.limitNum=t.data.limitNum,null==t.data.jifen?e.jifen:e.jifen=t.data.jifen,null==t.data.fenbi?e.fenbi:e.fenbi=t.data.fenbi,null==t.data.flow?e.flow:e.flow=t.data.flow,null==t.data.money?e.money:e.money=t.data.money)},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},getBuyDetailData:function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/getPaymentDetailById",type:"get",data:{id:this.$route.query.id,code:e},success:function(e){console.log(e),e&&(t.totalMoney=e.data.totalMoney,t.discountAfterMoney=e.data.discountAfterMoney,t.paymentNames=e.data.paymentNames,null==e.data.integral&&(t.integral=0),null==e.data.fenbi&&(t.useFenbi=0),null==e.data.discountMoney&&(t.discountMoney=0),t.integral=e.data.integral,t.useFenbi=e.data.fenbi,console.log(e))},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})},getTelData:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/getReceiveCouponListById",type:"get",data:{couponId:a.$route.query.id,curPage:t,searchContent:e},success:function(e){if(console.log(e),a.rowCount=e.data.rowCount,a.pageSize=e.data.pageSize,null!=e.data.subList&&e.data.subList!=[]&&""!=e.data.subList){var t=[];e.data.subList.forEach(function(e,a){var n={code:null,startTime:null,nickname:null,phone:null,state:null,endTime:null};n.code=e.code,n.startTime=_.formatDateTime(e.startTime),n.nickname=e.nickname,n.phone=e.phone,0==e.state?n.state="未使用":n.state="已使用",n.endTime=_.formatDateTime(e.endTime),t.push(n)}),a.subList=t}else a.subList=[]},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"couponDetail"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("优惠券")]),e._v(" "),a("el-breadcrumb-item",[e._v("查看优惠券详情")])],1),e._v(" "),a("div",{staticClass:"couponInfo",style:{fontSize:"14px"}},[a("p",{style:{fontWeight:"bold",color:"#333"}},[e._v("优惠券信息")]),e._v(" "),a("div",{staticClass:"content colorLowerGray"},[a("div",{staticClass:"firstBox"},[a("div",[e._e(),e._v(" "),a("p",[e._v("类型：")]),e._v(" "),a("p",[e._v("名称：")]),e._v(" "),a("p",[e._v("优惠详情：")]),e._v(" "),a("p",[e._v("创建时间：")]),e._v(" "),a("p",[e._v("有效期：")]),e._v(" "),a("p",[e._v("使用时段：")])]),e._v(" "),a("div",[e._e(),e._v(" "),a("p",[1==e.cardType?a("span",[e._v("折扣券")]):e._e(),2==e.cardType?a("span",[e._v("代金券")]):e._e(),3==e.cardType?a("span",[e._v("礼品兑换券 ")]):e._e(),4==e.cardType?a("span",[e._v("自定义券")]):e._e()]),e._v(" "),a("p",[e._v(e._s(e.title))]),e._v(" "),a("p",[e._v(e._s(e.couponDescription))]),e._v(" "),a("p",[e._v(e._s(e.createDate))]),e._v(" "),a("p",[0==e.type?a("span",[e._v(e._s(e.beginTimestamp)+"至"+e._s(e.endTimestamp))]):e._e(),1==e.type?a("span",[e._v("领取后"+e._s(e.fixedTerm)+"天生效，有效天数为"+e._s(e.fixedBeginTerm)+"天")]):e._e()]),e._v(" "),a("p",[7==e.week.length?a("span",[e._v("周一至周日")]):e._e(),e.week.length<7?a("span",[-1!=e.week.indexOf(1)?a("span",[e._v("周一、")]):e._e(),-1!=e.week.indexOf(2)?a("span",[e._v("周二、")]):e._e(),-1!=e.week.indexOf(3)?a("span",[e._v("周三、")]):e._e(),-1!=e.week.indexOf(4)?a("span",[e._v("周四、")]):e._e(),-1!=e.week.indexOf(5)?a("span",[e._v("周五、")]):e._e(),-1!=e.week.indexOf(6)?a("span",[e._v("周六、")]):e._e(),-1!=e.week.indexOf(0)?a("span",[e._v("周日")]):e._e()]):e._e()])])]),e._v(" "),a("div",{staticClass:"secondBox"},[a("div",[a("p",[e._v("客服电话：")]),e._v(" "),a("p",[e._v("发行总数/已领数/已使用数：")]),e._v(" "),a("p",[e._v("已开启功能：")]),e._v(" "),a("p",[e._v("领取方式：")]),e._v(" "),1==e.isBuy?a("p",[e._v("购买金额：")]):e._e(),e._v(" "),0==e.isBuy?a("p",[e._v("领取规则：")]):e._e(),e._v(" "),0==e.isBuy?a("p",[e._v("推荐后奖励：")]):e._e()]),e._v(" "),a("div",[a("p",[e._v(e._s(e.servicePhone)+" ")]),e._v(" "),a("p",[e.number?e._e():a("span",[e._v("无限")]),e.number?a("span",[e._v(e._s(e.number))]):e._e(),e._v("张/"+e._s(e.receiveQuantity)+"张/"+e._s(e.usedQuantity)+"张")]),e._v(" "),a("p",[1==e.addUser?a("span",[e._v("允许叠加使用、")]):e._e(),1==e.canShare?a("span",[e._v("允许分享、")]):e._e(),1==e.isSendMsg?a("span",[e._v("短信提示、")]):e._e(),a("span",{staticClass:"isOwnUse==1"},[e._v("自助核销")])]),e._v(" "),a("p",[0==e.isBuy?a("span",[e._v("免费领取")]):e._e(),1==e.isBuy?a("span",[e._v("购买")]):e._e()]),e._v(" "),1==e.isBuy?a("p",[e._v(e._s(e.buyMoney)+"元")]):e._e(),e._v(" "),0==e.isBuy?a("p",[0==e.limitType?a("span",[e._v("每人每天最多领取")]):e._e(),1==e.limitType?a("span",[e._v("该优惠券每人最多领取")]):e._e(),e._v(e._s(e.limitNum)+"张")]):e._e(),e._v(" "),0==e.isBuy?a("p",[e.jifen?e._e():a("span",[e._v(e._s(e.jifen))]),e._v("积分、"),e.fenbi?e._e():a("span",[e._v(e._s(e.fenbi))]),e._v("粉币、"),e.flow?e._e():a("span",[e._v(e._s(e.flow))]),e._v("MB流量、 "),e.money?e._e():a("span",[e._v(e._s(e.money))]),e._v("元、  ")]):e._e()])])])]),e._v(" "),a("div",{staticClass:"receiveList"},[a("div",{staticClass:"nameListTitle"},[e._v("领取列表")]),e._v(" "),a("div",{staticClass:"inputSearch"},[a("el-input",{staticClass:"marginBottom20",attrs:{placeholder:"请输入手机号搜索",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.searchKeyCode(t)}},model:{value:e.searchContent,callback:function(t){e.searchContent="string"==typeof t?t.trim():t},expression:"searchContent"}}),e._v(" "),a("i",{staticClass:"iconfont iconColor",on:{click:e.searchClick}},[e._v("")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:e.exportClick}},[e._v("导出")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList}},[a("el-table-column",{attrs:{prop:"code",label:"优惠券码","min-width":"200"}}),e._v(" "),0==e.isBuy?a("el-table-column",{attrs:{prop:"startTime",label:"领取时间","min-width":"180"}}):e._e(),e._v(" "),1==e.isBuy?a("el-table-column",{attrs:{prop:"startTime",label:"购买时间","min-width":"180"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户名","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone","min-width":"180",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state","min-width":"180",label:"使用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime","min-width":"180",label:"使用时间"}}),e._v(" "),1==e.isBuy?a("el-table-column",{attrs:{"min-width":"180",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.detailData(t.row)}}},[e._v("详情")])]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"textRight marginTop20"},[a("el-pagination",{staticClass:"textRight marginTop20",attrs:{"current-page":e.currentPage3,"page-size":e.pageSize,background:"",total:e.rowCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage3=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"详情",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"detail"},[a("p",[e._v("应付金额：")]),e._v(" "),a("p",[e._v("￥"+e._s(e.totalMoney))])]),e._v(" "),a("div",{staticClass:"detail"},[a("p",[e._v("优惠金额：")]),e._v(" "),a("p",[e._v("￥"+e._s(e.discountMoney)+"（"),a("span",[e._v("积分：-￥"+e._s(e.integral)+"、")]),a("span",[e._v("粉币：-￥"+e._s(e.useFenbi)+"、")]),e._v("）")])]),e._v(" "),a("div",{staticClass:"detail"},[a("p",[e._v("实付金额：")]),e._v(" "),a("p",[e._v("￥"+e._s(e.discountAfterMoney))])]),e._v(" "),a("div",{staticClass:"detail"},[a("p",[e._v("支付方式：")]),e._v(" "),a("p",[e._v("￥"+e._s(e.paymentNames))])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1)],1)},staticRenderFns:[]};var L,$=a("X4nt")(D,E,!1,function(e){a("NbyU")},null,null).exports,N={name:"recommend",data:function(){return{activeName2:"first",searchContent1:null,searchContent2:null,currentPage1:1,currentPage2:1,lowestMoney:0,rowCount1:1,rowCount2:1,subList1:[],subList2:[]}},beforeMount:function(){this.getCouponRecommend(this.searchContent1,this.currentPage1)},methods:(L={handleClick:function(e,t){var a=this;console.log(e,t),0==e.index&&a.getCouponRecommend(a.searchContent1,a.currentPage1),1==e.index&&a.getCommissionRecord(a.searchContent2,a.currentPage2)},handleReceive:function(e,t){this.$router.push({path:"/recommendList",query:{recommendId:t.id}})},keySearch1:function(){this.getCouponRecommend(this.searchContent1,this.currentPage1)},keySearch2:function(){this.getCommissionRecord(this.searchContent2,this.currentPage2)},handleCurrentChange1:function(e){console.log("每页 "+e+" 条")},handleSizeChange:function(e){console.log("每页 "+e+" 条")}},u()(L,"handleCurrentChange1",function(e){console.log("当前页: "+e);this.currentPage1=e,this.getCouponRecommend(this.searchContent1,this.currentPage1)}),u()(L,"handleCurrentChange2",function(e){console.log("当前页: "+e);this.getCommissionRecord(this.searchContent2,this.currentPage2)}),u()(L,"saveMoney",function(){this.postLowestMoney(this.lowestMoney)}),u()(L,"getCouponRecommend",function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/recommend/recommendList",type:"get",data:{searchContent:e,curPage:t},success:function(e){e=e.data;a.rowCount1=e.rowCount,console.log(e),null!=e.subList&&e.subList!=[]&&e.subList.length>0?(e.subList.forEach(function(t,a){e.subList[a].datetime=_.formatTime(e.subList[a].datetime)}),a.subList1=e.subList):a.subList1=[]},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})}),u()(L,"getCommissionRecord",function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/recommend/withdrawList",type:"get",data:{searchContent:e,curPage:t},success:function(e){e=e.data;console.log(e),a.rowCount2=e.rowCount,null!=e.subList&&e.subList!=[]&&e.subList.length>0?(e.subList.forEach(function(t,a){e.subList[a].pickDate=_.formatTime(e.subList[a].pickDate)}),a.subList2=e.subList):a.subList2=[]},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})}),u()(L,"postLowestMoney",function(e){var t=this;_.ajax({url:"/memberPc/duofenCoupon/recommend/withdrawMoneySet",type:"POST",data:{money:e},error:function(e){t.$message({message:e.msg,type:"error"})},warning:function(e){t.$message({message:"请联系客服",type:"warning"})}})}),L)},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommend marginLeft55 marginTop30 marginRight55"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticClass:"firstTab",attrs:{label:"优惠券推荐",name:"first"}},[e._e(),e._v(" "),a("div",{staticClass:"marginTop20"},[a("div",{staticClass:"inputSearch"},[a("el-input",{staticClass:"marginBottom20",attrs:{placeholder:"请输入手机号/券码",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keySearch1(t)}},model:{value:e.searchContent1,callback:function(t){e.searchContent1=t},expression:"searchContent1"}}),e._v(" "),a("i",{staticClass:"iconfont iconColor",on:{click:e.keySearch1}},[e._v("")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList1}},[a("el-table-column",{attrs:{prop:"datetime",label:"推荐时间","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname1",label:"推荐人姓名","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userPhone",label:"推荐人手机","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardName",label:"优惠券名","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"integral","min-width":"120",label:"奖励积分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flow","min-width":"120",label:"奖励流量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fenbi","min-width":"120",label:"奖励粉币"}}),e._v(" "),a("el-table-column",{attrs:{prop:"money","min-width":"120",label:"奖励金额"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleReceive(t.$index,t.row)}}},[e._v("领取列表")])]}}])})],1),e._v(" "),a("div",{staticClass:"textRight marginTop20"},[a("el-pagination",{staticClass:"textRight marginTop20",attrs:{"current-page":e.currentPage1,background:"",total:e.rowCount1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPage1=t}}})],1)],1)]),e._v(" "),a("el-tab-pane",{staticClass:"secondTab",attrs:{label:"佣金提现记录",name:"second"}},[e._e(),e._v(" "),a("div",{staticClass:"marginTop20"},[a("div",{staticClass:"inputSearch"},[a("el-input",{staticClass:"marginBottom20",attrs:{placeholder:"请输入手机号/券码",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keySearch2(t)}},model:{value:e.searchContent2,callback:function(t){e.searchContent2=t},expression:"searchContent2"}}),e._v(" "),a("i",{staticClass:"iconfont iconColor",on:{click:e.keySearch2}},[e._v("")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList2}},[a("el-table-column",{attrs:{prop:"pickDate",label:"提现时间","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname2",label:"姓名","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号码","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pickMoney",label:"提现金额","min-width":"140"}})],1),e._v(" "),a("div",{staticClass:"textRight marginTop20"},[a("el-pagination",{staticClass:"textRight marginTop20",attrs:{"current-page":e.currentPage1,background:"",layout:"prev, pager, next, jumper,total",total:e.rowCount2},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.currentPage1=t}}})],1)],1)]),e._v(" "),a("el-tab-pane",{staticClass:"thirdTab",attrs:{label:"提现设置",name:"third"}},[a("div",{staticClass:"marginTop5 cashRule"},[a("span",[e._v("推荐你提现规则：")]),e._v(" "),a("span",{staticClass:"marginLeft30px"},[e._v("奖励金额达")]),e._v(" "),a("el-input",{staticClass:"marginLeft10 marginRight10",attrs:{size:"small"},model:{value:e.lowestMoney,callback:function(t){e.lowestMoney=t},expression:"lowestMoney"}}),e._v(" "),a("span",[e._v("元时可提现")])],1),e._v(" "),a("el-button",{staticClass:"marginTop60",attrs:{type:"primary",size:"small"},on:{click:e.saveMoney}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var P=a("X4nt")(N,M,!1,function(e){a("GZpK")},null,null).exports,R={name:"recommend-list",data:function(){return{searchContent1:null,subList:[],rowCount1:null,currentPage1:1,subList1:[]}},beforeMount:function(){this.getRecommendList(this.searchContent1,this.currentPage1)},methods:{keySearch1:function(){},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange1:function(e){console.log("当前页: "+e)},getRecommendList:function(e,t){var a=this;_.ajax({url:"/memberPc/duofenCoupon/recommend/recommendReceiveList",type:"get",data:{recommendId:a.$route.query.recommendId,searchContent:e,curPage:t},success:function(e){e=e.data;a.rowCount1=e.rowCount,console.log(e),null!=e.subList&&e.subList!=[]&&e.subList.length>0?a.subList1=e.subList:a.subList1=[],a.$message({message:"成功",type:"success"})},error:function(e){a.$message({message:e.msg,type:"error"})},warning:function(e){a.$message({message:"请联系客服",type:"warning"})}})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommendList"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("优惠券")]),e._v(" "),a("el-breadcrumb-item",[e._v("推荐管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("领取列表")])],1),e._v(" "),a("div",{staticClass:"marginRight55 marginLeft55"},[a("div",{staticClass:"receiveList"},[e._v("\n      领取列表\n    ")]),e._v(" "),a("div",{staticClass:"marginTop20"},[a("div",{staticClass:"inputSearch"},[a("el-input",{staticClass:"marginBottom20",attrs:{placeholder:"请输入手机号/券码",size:"small"},nativeOn:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.keySearch1(t)}},model:{value:e.searchContent1,callback:function(t){e.searchContent1=t},expression:"searchContent1"}}),e._v(" "),a("i",{staticClass:"iconfont iconColor searchIcon",on:{click:e.keySearch1}},[e._v("")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subList}},[a("el-table-column",{attrs:{prop:"code",label:"优惠券码","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"getDate",label:"领取时间","min-width":"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户名","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"使用状态","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operateDate",label:"使用时间","min-width":"140"}})],1),e._v(" "),a("div",{staticClass:"textRight marginTop20"},[a("el-pagination",{staticClass:"textRight marginTop20",attrs:{"current-page":e.currentPage1,background:"",total:e.rowCount1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange1,"update:currentPage":function(t){e.currentPage1=t}}})],1)],1)],1)},staticRenderFns:[]};var O=a("X4nt")(R,B,!1,function(e){a("pbeH")},null,null).exports,I=a("fkRY"),z=a.n(I),U={name:"data-statistics",data:function(){return{}},mounted:function(){var e=document.getElementById("myChart");z.a.init(e).setOption({title:{text:"近七个月卡券趋势图"},tooltip:{trigger:"item"},toolbox:{},grid:{left:"3%",right:"4%",bottom:"3%"},xAxis:[{type:"category",boundaryGap:!1,data:["第一季度","第二季度","第三季度","第四季度"]}],yAxis:[{type:"value"}],series:[{name:"苹果",type:"line",stack:"销量",data:[1270,6382,2091,1034],color:["#f00"]},{name:"香蕉",type:"line",stack:"销量",data:[69,100,686,7823]}]})},method:{echartInit:function(){}}},A={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dataStatistics"},[a("div",{staticClass:"useCondition"},[a("p",[e._v("使用概况")])]),e._v(" "),a("div",{staticClass:"selectInfo"}),e._v(" "),a("div",{staticClass:"dataDetail"}),e._v(" "),a("div",{staticClass:"echartBox marginRight55 marginLeft55"},[a("div",[e._v("近七个月卡券趋势图")]),e._v(" "),a("div",{attrs:{id:"myChart"}})])])}]};var q=a("X4nt")(U,A,!1,function(e){a("vY0I")},null,null).exports,j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{type:"text"},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}})])])},staticRenderFns:[]};var W=a("X4nt")({name:"test1",data:function(){return{data:""}},methods:{aaa:function(){}}},j,!1,function(e){a("mazs")},"data-v-1d268622",null).exports,V={name:"coupon-main-menu",components:{couponVerification:T,couponAdmin:F,recommend:P,dataStatistics:q},data:function(){return{activeName:"first"}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"优惠券管理",name:"first"}},["first"==e.activeName?a("couponAdmin"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"优惠券核销",name:"second"}},["second"==e.activeName?a("couponVerification"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"推荐管理",name:"third"}},["third"==e.activeName?a("recommend"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"数据统计",name:"forth"}},[a("dataStatistics")],1)],1)],1)])],1)],1)},staticRenderFns:[]};var G=a("X4nt")(V,H,!1,function(e){a("BD3D")},null,null).exports,Q={name:"select-type",data:function(){var e,t=this,a=function(e,t,a){t?new RegExp("^\\+?[1-9][0-9]*$").exec(t)?t>9999?a(new Error("请填写小于10000的有效天数!")):a():a(new Error("请输入大于零的整数!")):a(new Error("请填写有效天数!"))};return e={ReceiveNum:null,activeName2:"first",editor1:null,queryCardStatus:this.$route.query.cardStatus,stepActive:0,useType:1,cardType:1,pickerOptions1:{disabledDate:function(e){return e.getTime()<Date.now()}},sectionMonthOptions:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"},{value:"11",label:"11"},{value:"12",label:"12"}],sectionDayOptions:[],sectionDayNoRepeat:[],sectionDayCompare:[],connectArray:[],holidayData:[],active:0,bb:!0,ruleForm:{periodDateType:1,startTime:null,endTime:null,title:null,discount:null,fixedTerm:0,fixedBeginTerm:null,useTime:0,defaultDetail:null,gift:null,cashLeastCost:0,reduceCost:null,type:0,otherTime:0,fixedavailableDate:null,moreFunction:!1,addUser:0,canShare:0,isSendMsg:0,phone:null,isOwnUse:0,otherTimeSet:[{month_start:"1",day_start:"1",month_end:"1",day_end:"1"}],week:[1,2,3,4,5,6,0],holidays:0},rules:{title:[{validator:function(e,a,n){var i=t.cardType;1==i?a?n():n(new Error("折扣券名称不能为空")):2==i?a?n():n(new Error("代金券名称不能为空")):3==i?a?n():n(new Error("礼品兑换券名称不能为空")):4==i?a?n():n(new Error("自定义券名称不能为空")):n()},trigger:"blur"},{max:9,message:"您已超出字数上线",trigger:"blur"}],discount:[{required:!0,message:"折扣额度不能为空",trigger:"blur"},{validator:function(e,t,a){t?t<=9.9&&new RegExp("^[1-9]+(.[0-9]{1})$").exec(t)?a():a(new Error(" ")):a()},trigger:"blur"}],gift:[{required:!0,message:"兑换物品名称不能为空",trigger:"blur"}],defaultDetail:[{required:!0,message:"您还未输入优惠券详情",trigger:"blur"}],fixedTerm:[{required:!0,message:"请填写有效天数",trigger:"blur"},{validator:a,trigger:"blur"}],fixedBeginTerm:[{required:!0,message:"请填写有效天数",trigger:"blur"},{validator:a,trigger:"blur"}],cashLeastCost:[{validator:function(e,t,a){""==t?a(new Error("请输入大于0的数值!")):t>=0&&t<1e4?a():a(new Error("请输入小于10000的数值"))},trigger:"blur"}],reduceCost:[{validator:function(e,t,a){""==t?a(new Error("减免额度不能为空!")):new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于零的数值!")):t>9999?a(new Error("请输入小于10000的数值")):a():a(new Error("请输入大于零的数值!"))},trigger:"blur"}],type:[{validator:function(e,a,n){t.ruleForm.fixedavailableDate?n():n(new Error("请选择时间范围!"))},trigger:"blur"}],week:[{type:"array",required:!0,message:"请选择使用时段"}],phone:[{validator:function(e,t,a){Mobilephone(t)?a():a(new Error("您还未设置短信接收号码"))},trigger:"blur"},{required:!0,message:"您还未设置短信接收号码",trigger:"blur"}]},ruleForm1:{textImageList:[{imageDetail:"",textDetail:""}],color:"#20a0ff",loginUrl:null,iconUrlList:null,input1:null,servicePhone:null,brandName:null,summary:null,description:null,descriptionState:!1},rules1:{servicePhone:[{required:!0,message:"您还未设置客服电话",trigger:"blur"},{min:7,message:"请输入正确的电话格式",trigger:"blur"}],loginUrl:[{validator:function(e,a,n){t.ruleForm1.loginUrl?n():n(new Error("您还未上传图片!"))}}],brandName:[{required:!0,message:"图片说明不能为空",trigger:"blur"}],iconUrlList:[{validator:function(e,a,n){t.ruleForm1.iconUrlList?n():n(new Error("您还未上传图片!"))}}],summary:[{required:!0,message:"封面图说明不能为空",trigger:"blur"}]}},u()(e,"pickerOptions1",{disabledDate:function(e){return e.getTime()<Date.now()}}),u()(e,"tipArray",[]),u()(e,"ruleForm2",{number:null,isBuy:1,couponSendFlag:0,isReceiveNum:0,limitNum:null,limitType:null,buyMoney:null,isJifen:null,isFenbi:null,isDiscount:null,isRecommend:null,fenbi:null,jifen:null,flow:null,money:null,discountType:[1,2,3],reward:[0,1,2,3],giftBuyMoney:[{limiteData:"",money:""}]}),u()(e,"rules2",{number:[{validator:function(e,a,n){var i=t;a?new RegExp("^\\+?[1-9][0-9]*$").exec(a)?a>99999?n(new Error("请输入小于10000的数值")):null!=i.ReceiveNum&&a<i.ReceiveNum?n(new Error("发行总数不能小于已被领取的数量")):n():n(new Error("请输入大于0的整数")):n()},trigger:"blur"}],buyMoney:[{validator:function(e,t,a){t?"0"==t?a(new Error("请输入大于0的数值")):new RegExp("^[0-9]+(.[0-9]{1,2})?$").exec(t)?t>99999?a(new Error("请输入小于100000的数值")):a():a(new Error("请输入大于0的数值")):a(new Error("请输入大于0的数值"))},trigger:"blur"},{required:!0,message:"请输入大于0的数值",trigger:"blur"}],limitNum:[{validator:function(e,a,n){""!=t.ruleForm2.number?""==a?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(a)?a>t.ruleForm.number?n(new Error("请输入小于总数的数量")):a<=0?n(new Error("输入0时：请输入大于0的整数")):a>99999?n(new Error("请输入小于100000的数值")):n():n(new Error("请输入大于0的数值")):n():new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(a)?a>99999?n(new Error("请输入小于100000的数值")):n():n(new Error("请输入大于0的数值"))},trigger:"blur"},{required:!0,message:"请输入小于总数的整数",trigger:"blur"}],jifen:[{required:!0,message:"请设置赠送积分数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^[+]{0,1}(\\d+)$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的整数")):a()},trigger:"blur"}],fenbi:[{required:!0,message:"请设置赠送粉币数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的数值")):a()},trigger:"blur"}],flow:[{required:!0,message:"请设置赠送流量数",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^[+]{0,1}(\\d+)$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的整数")):a()},trigger:"blur"}],money:[{required:!0,message:"请设置赠送金额",trigger:"blur"},{validator:function(e,t,a){t?new RegExp("^([0-9]*)+(.[0-9]{1,2})?$").exec(t)?t<=0?a(new Error("请输入大于0的数值")):t>999?a(new Error("请输入小于1000的数值")):a():a(new Error("请输入大于0的数值")):a()},trigger:"blur"}]}),e},beforeMount:function(){this.setDays(),this.receiveEditCoupon(),this.holidayForbidDay()},mounted:function(){},methods:{stringToArr:function(e){var t=[];return e.split(",").forEach(function(e,a){var n=parseInt(e);t.push(n)}),t},handleClick:function(e,t){console.log(e,t)},allCommon:function(){this.useType=1},designate:function(){this.useType=2},discont:function(){this.cardType=1},voucher:function(){this.cardType=2},gift:function(){this.cardType=3},common:function(){this.cardType=4},validTimeClear:function(){this.ruleForm.fixedavailableDate=null,this.ruleForm.fixedTerm=0,this.ruleForm.fixedBeginTerm=null},useTimeClear:function(){this.ruleForm.week=[1,2,3,4,5,6,0],this.ruleForm.holidays=0,this.ruleForm.otherTime=0},sectionMonthChange:function(e){this.monthNum=e,this.setDays()},setDays:function(){this.sectionDayOptions=[];for(var e=[31,28,31,30,31,30,31,31,30,31,30,31][this.monthNum-1],t=1;t<=e;t++)this.sectionDayOptions.push({value:""+t,label:""+t})},addSectionTime:function(e){this.ruleForm.otherTimeSet.length<20&&this.ruleForm.otherTimeSet.push({month_start:"1",day_start:"1",month_end:"1",day_end:"1"})},removeSectionTime:function(e){this.ruleForm.otherTimeSet.splice(e,1)},disableOtherData:function(e){var t=this,a=[],n=[],i=[];return e.forEach(function(e,n){var r=e.month_start,o=e.day_start,s=e.month_end,l=e.day_end,c=(r<10?"0"+r:r)+(o<10?"0"+o:o),u=(s<10?"0"+s:s)+(l<10?"0"+l:l);a[n]=[c,u],u<c?i.push(!1):i.push(!0),t.sectionDayCompare=i}),a.forEach(function(e,t){var i=e[0],r=e[1],o=!0;a.forEach(function(e,a){var n=e[0],s=e[1];t>a>0&&(o=i>s||r<n)}),1==o?n.push(!0):n.push(!1)}),t.sectionDayNoRepeat=n,t.sectionDayCompare=i,t.connectArray=t.sectionDayNoRepeat.concat(t.sectionDayCompare),t.connectArray},moreFunctionButton:function(){this.ruleForm.moreFunction=!this.ruleForm.moreFunction},RichTextEditor:function(){var e=this.editor1.$txt.html();this.ruleForm1.description=e},addPictureLogo:function(){var e=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(t){e.ruleForm1.loginUrl=t[0].url}).catch(function(e){console.log(e)})},addPictureCover:function(){var e=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(t){e.ruleForm1.iconUrlList=t[0].url}).catch(function(e){console.log(e)})},addPictureIntroduce:function(e){var t=this;this.$material({imageboxUrl:"https://suc.deeptel.com.cn/common/material.do",modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!1,closeOnPressEscape:!0}).then(function(a){console.log(a),t.ruleForm1.textImageList[e].imageDetail=a[0].url,t.ruleForm1.textImageList.splice(1,0)}).catch(function(e){console.log(e)})},addImageTextDescription:function(e){this.ruleForm1.textImageList.length<10&&this.ruleForm1.textImageList.push({imageDetail:"",textDetail:""})},deleteImageTextDescription:function(e){this.ruleForm1.textImageList.length>1&&this.ruleForm1.textImageList.splice(e,1)},arraySplit:function(e){var t=e.indexOf("upload")+8;return e.substring(t)},addCurrentprices:function(e){this.ruleForm2.giftBuyMoney.length<10&&this.ruleForm2.giftBuyMoney.push({limiteData:"",money:""})},noReapeatDate:function(e){var t=[],a=[];return e.forEach(function(e,t){var n=e.limiteData[0].getFullYear(),i=e.limiteData[0].getMonth()+1,r=Number(i);if(0<r<10)var o="0"+r;else o=r;var s=e.limiteData[0].getDate();if(0<s<10)var l="0"+s;else l=s;var c=Number(n+o+l),u=e.limiteData[1].getFullYear(),d=e.limiteData[1].getMonth()+1,m=Number(d);if(0<m<10)var p="0"+m;else p=m;var f=e.limiteData[1].getDate();if(0<f<10)var v="0"+f;else v=f;var h=Number(u+p+v);a[t]=[c,h]}),a.forEach(function(e,n){var i=e[0],r=e[1],o=!0;a.forEach(function(e,t){var a=e[0],s=e[1];if(n>t>0){if(!(i>s||r<a))return o=!1,!1;o=!0}}),1==o&&t.push(!0),0==o&&t.push(!1)}),this.tipArray=t,t},deleteCurrentprices:function(e){this.ruleForm2.giftBuyMoney.splice(e,1)},saveForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;if(3==a.cardType){if(a.noReapeatDate(a.ruleForm2.giftBuyMoney),-1!=a.tipArray.indexOf(!1))return!1;t.stepActive++>3&&(t.stepActive=0)}else a.saveCoupon(),t.stepActive++>3&&(t.stepActive=0)})},isBuyClear:function(){this.ruleForm2.buyMoney=null},isReceiveNumClear:function(){this.ruleForm2.limitNum=null},isRecommendClear:function(){this.ruleForm2.jifen=null,this.ruleForm2.fenbi=null,this.ruleForm2.flow=null,this.ruleForm2.money=null},refresh:function(){window.location.reload()},receiveQuantity:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/getCouponReceiveQuantity",type:"get",data:{id:e.$route.query.id},success:function(t){0!=t.data||null!=t.data?e.receiveNum=t.data:e.receiveNum=0}})},holidayForbidDay:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/getLegalHolidays",type:"get",data:{},success:function(t){null!=(t=t.data)&&t!=[]&&""!=t&&t.forEach(function(t,a){var n={name:null,forbidTime:null};n.name=t.name,n.forbidTime=t.startTime+"至"+t.endTime,e.holidayData.push(n)})},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},saveEditorCoupon:function(){var e=this;e.receiveQuantity(),e.submitForm("ruleForm"),e.submitForm1("ruleForm1"),e.saveForm("ruleForm2");var t=_.formatDateTime(e.ruleForm.fixedavailableDate[0]),a=_.formatDateTime(e.ruleForm.fixedavailableDate[1]),n=e.ruleForm.week.join(","),i=[];if(3==e.cardType){e.ruleForm2.giftBuyMoney!=[]&&null!=e.ruleForm2.giftBuyMoney&&e.ruleForm2.giftBuyMoney.length>0&&e.ruleForm2.giftBuyMoney.forEach(function(e,t){var a={startTime:_.formatDateTime(e.limiteData[0]),endTime:_.formatDateTime(e.limiteData[1]),money:e.money};i.push(a)});var r=l()(i)}else r=null;-1!=e.ruleForm2.discountType.indexOf(1)?e.ruleForm2.isJifen=1:e.ruleForm2.isJifen=0,-1!=e.ruleForm2.discountType.indexOf(2)?e.ruleForm2.isFenbi=1:e.ruleForm2.isFenbi=0,-1!=e.ruleForm2.discountType.indexOf(2)?e.ruleForm2.isDiscount=1:e.ruleForm2.isDiscount=0;var o=[];e.ruleForm1.textImageList.forEach(function(t,a){var n={imageDetail:e.arraySplit(t.imageDetail),textDetail:t.textDetail};o.push(n)});var s=l()(o);e.ruleForm.cashLeastCost||(e.ruleForm.cashLeastCost=0),e.ruleForm.fixedTerm||(e.ruleForm.fixedTerm=0);var c={id:e.$route.query.id,useType:e.useType,cardType:e.cardType,title:e.ruleForm.title,discount:e.ruleForm.discount,gift:e.ruleForm.gift,defaultDetail:e.ruleForm.defaultDetail,cashLeastCost:e.ruleForm.cashLeastCost,reduceCost:e.ruleForm.reduceCost,type:e.ruleForm.type,beginTimestamp:t,endTimestamp:a,fixedTerm:e.ruleForm.fixedTerm,fixedBeginTerm:e.ruleForm.fixedBeginTerm,useTime:e.ruleForm.useTime,week:n,holidays:e.ruleForm.holidays,otherTime:e.ruleForm.otherTime,otherTimeSet:l()(e.ruleForm.otherTimeSet),addUser:e.ruleForm.addUser,canShare:e.ruleForm.canShare,isSendMsg:e.ruleForm.isSendMsg,phone:e.ruleForm.phone,isOwnUse:e.ruleForm.isOwnUse,loginUrl:e.arraySplit(e.ruleForm1.loginUrl),brandName:e.ruleForm1.brandName,color:e.ruleForm1.color,servicePhone:e.ruleForm1.servicePhone,iconUrlList:e.arraySplit(e.ruleForm1.iconUrlList),summary:e.ruleForm1.summary,description:e.ruleForm1.description,textImageList:s,number:Number(e.ruleForm2.number),isBuy:e.ruleForm2.isBuy,buyMoney:e.ruleForm2.buyMoney,isJifen:e.ruleForm2.isJifen,isFenbi:e.ruleForm2.isFenbi,isDiscount:e.ruleForm2.isDiscount,giftBuyMoney:r,isReceiveNum:e.ruleForm2.isReceiveNum,limitType:e.ruleForm2.limitType,limitNum:e.ruleForm2.limitNum,isRecommend:e.ruleForm2.isRecommend,jifen:e.ruleForm2.jifen,fenbi:e.ruleForm2.fenbi,flow:e.ruleForm2.flow,money:e.ruleForm2.money};e.data=c,_.ajax({url:"/memberPc/duofenCoupon/updateCouponById",type:"POST",data:c,success:function(t){t.data&&e.$message({message:t.msg,type:"success"})},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},receiveEditCoupon:function(){var e=this;_.ajax({url:"/memberPc/duofenCoupon/findCouponById",type:"get",data:{id:e.$route.query.id},success:function(t){if(null!=t.data){e.useType=t.data.useType,e.cardType=t.data.cardType,e.ruleForm.title=t.data.title,e.ruleForm.discount=t.data.discount,e.ruleForm.gift=t.data.gift,e.ruleForm.defaultDetail=t.data.defaultDetail,e.ruleForm.cashLeastCost=t.data.cashLeastCost,e.ruleForm.reduceCost=t.data.reduceCost,e.ruleForm.type=t.data.type;var a=new Date(t.data.beginTimestamp),n=new Date(t.data.endTimestamp),i=[];i.push(a,n),e.ruleForm.fixedavailableDate=i,e.ruleForm.fixedTerm=t.data.fixedTerm,e.ruleForm.fixedBeginTerm=t.data.fixedBeginTerm,e.ruleForm.useTime=t.data.useTime,e.ruleForm.week=e.stringToArr(t.data.week),e.ruleForm.holidays=t.data.holidays,e.ruleForm.otherTime=t.data.otherTime,e.ruleForm.otherTimeSet=JSON.parse(t.data.otherTimeSet),e.ruleForm.addUser=t.data.addUser,e.ruleForm.canShare=t.data.canShare,e.ruleForm.isSendMsg=t.data.isSendMsg,e.ruleForm.phone=t.data.phone,e.ruleForm.isOwnUse=t.data.isOwnUse,e.ruleForm1.brandName=t.data.brandName,e.ruleForm1.loginUrl=t.data.domain+t.data.loginUrl,e.ruleForm1.color=t.data.color,e.ruleForm1.servicePhone=t.data.servicePhone,e.ruleForm1.iconUrlList=t.data.domain+t.data.iconUrlList,e.ruleForm1.summary=t.data.summary,e.ruleForm1.description=t.data.description;var r=[];if(JSON.parse(t.data.textImageList).forEach(function(e,a){var n={imageDetail:t.data.domain+e.imageDetail,textDetail:e.textDetail};r.push(n)}),e.ruleForm1.textImageList=r,e.ruleForm2.number=t.data.number,e.ruleForm2.isBuy=t.data.isBuy,e.ruleForm2.buyMoney=t.data.buyMoney,e.ruleForm2.isJifen=t.data.isJifen,e.ruleForm2.isFenbi=t.data.isFenbi,e.ruleForm2.isDiscount=t.data.isDiscount,3==t.data.cardType){var o=[];JSON.parse(t.data.giftBuyMoney).forEach(function(e,t){var a={limiteData:[new Date(e.startTime),new Date(e.endTime)],money:e.money};o.push(a)}),e.ruleForm2.giftBuyMoney=o}else e.ruleForm2.giftBuyMoney=null;e.ruleForm2.isReceiveNum=t.data.isReceiveNum,e.ruleForm2.limitType=t.data.limitType,e.ruleForm2.limitNum=t.data.limitNum,e.ruleForm2.isRecommend=t.data.isRecommend,e.ruleForm2.jifen=t.data.jifen,e.ruleForm2.fenbi=t.data.fenbi,e.ruleForm2.flow=t.data.flow,e.$nextTick(function(){var t=new wangEditor("editor-trigger");e.editor1=t,t.create(),t.$txt.html(e.ruleForm1.description)}),e.$message({message:"",type:"success"})}else e.$message({message:"优惠券已被删除",type:"success"})},error:function(t){e.$message({message:t.msg,type:"error"})},warning:function(t){e.$message({message:"请联系客服",type:"warning"})}})},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1==a.ruleForm.otherTime){if(a.disableOtherData(a.ruleForm.otherTimeSet),-1!=a.connectArray.indexOf(!1))return!1;t.stepActive++>3&&(t.stepActive=0)}else t.stepActive++>3&&(t.stepActive=0)})},submitForm1:function(e){var t=this,a=this;this.$refs[e].validate(function(e){return a.RichTextEditor(),""==a.ruleForm1.description||"<p><br></p>"==a.ruleForm1.description?(a.ruleForm1.descriptionState=!0,m()(".wangEditor-container").css("border-color","#f56c6c"),!1):(a.ruleForm1.descriptionState=!1,m()(".wangEditor-container").css("border-color","#dfe6ec"),!!e&&void(t.stepActive++>3&&(t.stepActive=0)))})},nextStep:function(){this.stepActive++>3&&(this.stepActive=0)},previousStep:function(){this.stepActive>0&&this.stepActive--}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editCoupon"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("优惠券管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("创建多粉类型")])],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{staticClass:"selectType",attrs:{label:"选择优惠券类型",name:"first"}},[e._e(),e._v(" "),a("el-row",{staticClass:"style marginBottom30 marginTop10"},[a("el-col",{staticClass:"colorGray marginTop20",attrs:{span:3}},[a("span",{staticStyle:{color:"red"}},[e._v("*")]),a("span",{staticStyle:{"font-size":"14px"}},[e._v("选择类型：")])]),e._v(" "),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"discont",style:{borderColor:1==e.cardType?"#bfcbd9":"#dddddd"}},[a("div",{staticClass:"middle"},[a("p",[e._v("折扣券")]),e._v(" "),a("span",[e._v("消费者领取后可用于消费时获取折扣")])]),e._v(" "),1==e.cardType?a("i",{staticClass:"iconfont corlorForbid fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"voucher",style:{borderColor:2==e.cardType?"#bfcbd9":"#dddddd"}},[a("div",{staticClass:"middle"},[a("p",[e._v("代金券")]),e._v(" "),a("span",[e._v("提供满减设置，消费者领取后可用于抵扣现金")])]),e._v(" "),2==e.cardType?a("i",{staticClass:"iconfont corlorForbid fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"gift",style:{borderColor:3==e.cardType?"#bfcbd9":"#dddddd"}},[a("div",{staticClass:"middle"},[a("p",[e._v("礼品兑换券")]),e._v(" "),a("span",[e._v("消费者购买或领取后可用于兑换商品")])]),e._v(" "),3==e.cardType?a("i",{staticClass:"iconfont corlorForbid fontSize26"},[e._v("")]):e._e()]),e._v(" "),a("div",{staticClass:"common",style:{borderColor:4==e.cardType?"#bfcbd9":"#dddddd"}},[a("div",{staticClass:"middle"},[a("p",[e._v("自定义券")]),e._v(" "),a("span",[e._v("当以上模板无法满足所设优惠需求时，提供更灵活的优惠设置")])]),e._v(" "),4==e.cardType?a("i",{staticClass:"iconfont corlorForbid fontSize26"},[e._v("")]):e._e()])])],1)],1),e._v(" "),a("el-tab-pane",{staticClass:"WriteCoupon",attrs:{label:"填写基本信息",name:"second"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content marginRight55"},[a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginBottom30 marginLeft55"},[a("span",{staticClass:"marginLeft30"},[e._v("优惠券信息")])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"180px"}},[1==e.cardType?a("div",[a("el-form-item",{attrs:{label:"折扣券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：95折优惠券"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"折扣额度：",prop:"discount"}},[a("el-input",{attrs:{placeholder:"请输入折扣额度",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.discount,callback:function(t){e.$set(e.ruleForm,"discount",e._n(t))},expression:"ruleForm.discount"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("请填写1-9.8之间的数字，精确到小数点后1位")])],1)],1):e._e(),e._v(" "),2==e.cardType?a("div",{staticClass:"cashCouponName"},[a("el-form-item",{attrs:{label:"代金券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：十元代金券或满100减20元",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft10 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"减免额度：",required:""}},[a("el-form-item",[a("div",{staticClass:"cashBox"},[a("div",[a("span",{staticClass:"marginRight10"},[e._v("满")]),e._v(" "),a("el-form-item",{attrs:{prop:"cashLeastCost"}},[a("el-input",{staticClass:"width120",attrs:{disabled:2==e.queryCardStatus},model:{value:e.ruleForm.cashLeastCost,callback:function(t){e.$set(e.ruleForm,"cashLeastCost",e._n(t))},expression:"ruleForm.cashLeastCost"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10"},[e._v("元，减")])],1),e._v(" "),a("div",{staticClass:"marginLeft15"},[a("el-form-item",{attrs:{prop:"reduceCost"}},[a("el-input",{staticClass:"width120 marginRight10",attrs:{placeholder:"请输入减免金额",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.reduceCost,callback:function(t){e.$set(e.ruleForm,"reduceCost",e._n(t))},expression:"ruleForm.reduceCost"}})],1)],1),e._v(" "),a("div",[a("span",[e._v("元")]),e._v(" "),a("span",{staticClass:"marginLeft10 colorLowerGray",style:{fontSize:"12px",color:"#999999"}},[e._v("抵扣金额不输入时默认0元：消费任意金额皆可用券")])])])])],1)],1):e._e(),e._v(" "),3==e.cardType?a("div",[a("el-form-item",{attrs:{label:"礼品兑换券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：月饼兑换券",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),e._v(" "),a("el-tooltip",{staticClass:"item marginLeft5",attrs:{effect:"light",placement:"right-start"}},[a("div",{staticClass:"colorLowerGray",attrs:{slot:"content"},slot:"content"},[e._v("免费兑换示例：月饼兑换券"),a("br"),e._v("购买兑换示例1（单件礼品）：月饼礼品券；"),a("br"),e._v("购买兑换示例2（多件礼品）：月饼大礼包 "),a("br"),e._v(" 字数上限为9个汉字")]),e._v(" "),a("i",{staticClass:"iconfont iconColor"},[e._v("")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"兑换物品名称：",prop:"gift"}},[a("el-input",{attrs:{placeholder:"请输入物品兑换名称",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.gift,callback:function(t){e.$set(e.ruleForm,"gift",t)},expression:"ruleForm.gift"}})],1)],1):e._e(),e._v(" "),4==e.cardType?a("div",[a("el-form-item",{attrs:{label:"自定义券名称：",prop:"title",required:""}},[a("el-input",{attrs:{placeholder:"示例：美容体验券"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}}),a("span",{staticClass:"marginLeft5 colorLowerGray"},[e._v("字数上限为9个汉字")])],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠详情：",prop:"defaultDetail"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入优惠详情",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.defaultDetail,callback:function(t){e.$set(e.ruleForm,"defaultDetail",t)},expression:"ruleForm.defaultDetail"}})],1)],1):e._e(),e._v(" "),a("div",{staticClass:"validTime"},[a("el-form-item",{attrs:{label:"有效期：",required:""}},[a("el-radio",{attrs:{label:0,disabled:2==e.queryCardStatus,click:"validTimeClear"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._v("固定时间有效")]),e._v(" "),a("el-radio",{attrs:{label:1,disabled:2==e.queryCardStatus,click:"validTimeClear"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._v("领取后有效")])],1)],1),e._v(" "),0==e.ruleForm.type?a("div",{staticClass:"fixedBorder margin180 marginBottom22"},[a("el-form-item",{attrs:{prop:"type","label-width":"0px"}},[a("el-date-picker",{attrs:{disabled:2==e.queryCardStatus,type:"daterange","range-separator":"至","picker-options":e.pickerOptions1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.fixedavailableDate,callback:function(t){e.$set(e.ruleForm,"fixedavailableDate",t)},expression:"ruleForm.fixedavailableDate"}})],1)],1):e._e(),e._v(" "),1==e.ruleForm.type?a("el-form-item",[a("div",{staticClass:"receiveBorder"},[a("div",[a("span",{staticClass:"marginRight10"},[e._v("领取")]),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"width110",attrs:{placeholder:"请输入内容",disabled:2==e.queryCardStatus},model:{value:e.ruleForm.fixedTerm,callback:function(t){e.$set(e.ruleForm,"fixedTerm",e._n(t))},expression:"ruleForm.fixedTerm"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10 marginRight10"},[e._v("后开始生效，有效天数为")])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"fixedBeginTerm"}},[a("el-input",{staticClass:"width110",attrs:{disabled:2==e.queryCardStatus},model:{value:e.ruleForm.fixedBeginTerm,callback:function(t){e.$set(e.ruleForm,"fixedBeginTerm",e._n(t))},expression:"ruleForm.fixedBeginTerm"}})],1)],1),e._v(" "),a("div",[a("span",{staticClass:"marginLeft10"},[e._v("天")])])])]):e._e(),e._v(" "),a("div",{staticClass:"useTime"},[a("el-form-item",{attrs:{label:"使用时段选择："}},[a("el-radio",{attrs:{label:0,disabled:2==e.queryCardStatus},on:{click:e.useTimeClear},model:{value:e.ruleForm.useTime,callback:function(t){e.$set(e.ruleForm,"useTime",t)},expression:"ruleForm.useTime"}},[e._v("全部时段")]),e._v(" "),a("el-radio",{attrs:{label:1,disabled:2==e.queryCardStatus},model:{value:e.ruleForm.useTime,callback:function(t){e.$set(e.ruleForm,"useTime",t)},expression:"ruleForm.useTime"}},[e._v("部分时段")])],1)],1),e._v(" "),1==e.ruleForm.useTime?a("div",{staticClass:"fixedBorder margin180",style:{borderColor:e.ruleForm.week.length<=0?"#f56c6c":"#eeeeee"}},[a("div",{staticClass:"partTime"},[a("el-form-item",{attrs:{label:"选择可用日期：",prop:"week"}},[a("el-checkbox-group",{model:{value:e.ruleForm.week,callback:function(t){e.$set(e.ruleForm,"week",t)},expression:"ruleForm.week"}},[a("el-checkbox",{attrs:{label:1,disabled:2==e.queryCardStatus}},[e._v("周一")]),e._v(" "),a("el-checkbox",{attrs:{label:2,disabled:2==e.queryCardStatus}},[e._v("周二")]),e._v(" "),a("el-checkbox",{attrs:{label:3,disabled:2==e.queryCardStatus}},[e._v("周三")]),e._v(" "),a("el-checkbox",{attrs:{label:4,disabled:2==e.queryCardStatus}},[e._v("周四")]),e._v(" "),a("el-checkbox",{attrs:{label:5,disabled:2==e.queryCardStatus}},[e._v("周五")]),e._v(" "),a("el-checkbox",{attrs:{label:6,disabled:2==e.queryCardStatus}},[e._v("周六")]),e._v(" "),a("el-checkbox",{attrs:{label:0,disabled:2==e.queryCardStatus}},[e._v("周日")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"法定节假日不可以："}},[a("el-switch",{attrs:{disabled:2==e.queryCardStatus,"active-value":1,"inactive-value":0,"active-color":"#20a0ff","inactive-color":"#bfcbd9"},model:{value:e.ruleForm.holidays,callback:function(t){e.$set(e.ruleForm,"holidays",t)},expression:"ruleForm.holidays"}}),e._v(" "),a("el-popover",{ref:"popover1",attrs:{placement:"right",title:"按钮开启后，以下相应的国家法定节假日不可用该优惠券",width:"525",height:"20",trigger:"hove"}},[a("el-table",{attrs:{data:e.holidayData}},[a("el-table-column",{attrs:{width:"160",property:"name",label:"法定节假日"}}),e._v(" "),a("el-table-column",{attrs:{property:"forbidTime",label:"休假时间"}})],1)],1),e._v(" "),a("span",{staticClass:"colorLowerGray"},[e._v("开启后，没逢国家法定节假日，该优惠券不可用"),a("i",{directives:[{name:"popover",rawName:"v-popover:popover1",arg:"popover1"}],staticClass:"iconfont icond4 fontSize14 marginLeft5"},[e._v("")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"其他不可用日期："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#20a0ff",disabled:2==e.queryCardStatus,"inactive-color":"#bfcbd9"},model:{value:e.ruleForm.otherTime,callback:function(t){e.$set(e.ruleForm,"otherTime",t)},expression:"ruleForm.otherTime"}}),e._v(" "),a("span",{staticClass:"colorLowerGray"},[e._v("开启后，可设置优惠券券的不可以日期")])],1),e._v(" "),e.ruleForm.week.length>0?a("div",{staticClass:"disableData"},[e.ruleForm.otherTime?a("el-form-item",{staticClass:"margin120",attrs:{prop:"otherTimeSet"}},e._l(e.ruleForm.otherTimeSet,function(t,n){return a("div",{key:n,staticClass:"marginTop20"},[a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择",disabled:2==e.queryCardStatus},on:{change:e.sectionMonthChange},model:{value:t.month_start,callback:function(a){e.$set(t,"month_start",a)},expression:"item.month_start"}},e._l(e.sectionMonthOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                        月\n                        "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择",disabled:2==e.queryCardStatus},model:{value:t.day_start,callback:function(a){e.$set(t,"day_start",a)},expression:"item.day_start"}},e._l(e.sectionDayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                        日  ——\n                        "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择",disabled:2==e.queryCardStatus},on:{change:e.sectionMonthChange},model:{value:t.month_end,callback:function(a){e.$set(t,"month_end",a)},expression:"item.month_end"}},e._l(e.sectionMonthOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                        月\n                        "),a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择",disabled:2==e.queryCardStatus},model:{value:t.day_end,callback:function(a){e.$set(t,"day_end",a)},expression:"item.day_end"}},e._l(e.sectionDayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n                        日\n                        "),0==n&&e.ruleForm.otherTimeSet.length<20?a("el-button",{staticClass:"sectionAddBtn marginLeft10 fontSize32",on:{click:function(t){e.addSectionTime(n)}}},[a("i",{staticClass:"iconfont colorBlue fontSize40"},[e._v("")])]):e._e(),e._v(" "),0!=n?a("el-button",{staticClass:"sectionAddBtn fontSize34 marginLeft17",on:{click:function(t){e.removeSectionTime(n)}}},[a("i",{staticClass:"iconfont colorLowerGray fontSize24"},[e._v("")])]):e._e(),e._v(" "),0==e.sectionDayNoRepeat[n]?a("span",{staticClass:"otherTimeTipOne colorRed fontSize12"},[e._v("不能包含已被设置的日期")]):e._e(),e._v(" "),0==e.sectionDayCompare[n]?a("span",{staticClass:"otherTimeTipTwo colorRed fontSize12"},[e._v("请设置大于开始日期的结束日期")]):e._e()],1)})):e._e()],1):e._e()],1)]):e._e(),e._v(" "),a("div",{staticClass:"grid-content bg-purple-light vertical marginLeft55 marginBottom30 marginTop30"},[a("span",{staticClass:"marginLeft30",style:{color:"#333"}},[e._v("更多功能")]),e._v(" "),a("span",{staticClass:"textRight iconDirection"},[a("i",{staticClass:"el-dropdown__icon el-icon-arrow-down moreFunctionIcon",class:e.ruleForm.moreFunction?"rotateLeft":"rotateRight",on:{click:e.moreFunctionButton}})])]),e._v(" "),1==e.ruleForm.moreFunction?a("div",[2==e.cardType?a("el-form-item",{attrs:{label:"允许叠加使用："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.addUser,callback:function(t){e.$set(e.ruleForm,"addUser",e._n(t))},expression:"ruleForm.addUser"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，粉丝允许同时使用两张或以上代金券抵扣现金")])],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"允许分享："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.canShare,callback:function(t){e.$set(e.ruleForm,"canShare",t)},expression:"ruleForm.canShare"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("优惠券允许分享到朋友券、微信好友、qq好友等社交渠道")])],1),e._v(" "),a("el-form-item",{attrs:{label:"短信提示："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.ruleForm.isSendMsg,callback:function(t){e.$set(e.ruleForm,"isSendMsg",e._n(t))},expression:"ruleForm.isSendMsg"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时粉丝领取优惠券后，商家将收到短信通知")])],1),e._v(" "),1==e.ruleForm.isSendMsg?a("el-form-item",[a("div",{staticClass:"messageBox"},[a("el-form-item",{staticClass:"marginTop20",attrs:{label:"短信接收码：",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入商家手机号码"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",e._n(t))},expression:"ruleForm.phone"}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"短信内容示例：【多粉平台】尊敬的商家用户您好，您的一张卡券被粉丝领取，查看详情请登陆多年粉平台",placement:"top-start"}},[a("i",{staticClass:"iconfont iconColor"},[e._v("")])])],1)],1)]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开启自助核销："}},[a("el-switch",{attrs:{disabled:2==e.queryCardStatus,"active-value":1,"inactive-value":0},model:{value:e.ruleForm.isOwnUse,callback:function(t){e.$set(e.ruleForm,"isOwnUse",e._n(t))},expression:"ruleForm.isOwnUse"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，该优惠券除员工核销外，同时允许粉丝自助核销")])],1)],1):e._e()],1)],1)])],1),e._v(" "),a("div",{staticClass:"clear"})],1),e._v(" "),a("el-tab-pane",{staticClass:"pageSetup",attrs:{label:"进行页面设置",name:"third"}},[a("el-form",{ref:"ruleForm1",attrs:{model:e.ruleForm1,rules:e.rules1,"label-width":"170px"}},[a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginLeft55 marginBottom30"},[a("span",{staticClass:"marginLeft30"},[e._v("页面设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"LOGO编辑：",required:""}},[a("div",{staticClass:"pictureBox"},[a("div",{staticClass:"marginLeft20"},[a("el-form-item",{attrs:{prop:"loginUrl"}},[a("div",{staticClass:"Logo textCenter",on:{click:e.addPictureLogo}},[e.ruleForm1.loginUrl?a("img",{attrs:{src:e.ruleForm1.loginUrl}}):e._e(),e._v(" "),e.ruleForm1.loginUrl?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"72px",color:"#8c939d"}},[e._v("+")])])]),e._v(" "),a("div",[e._v("建议上传64*64尺寸的图片")])],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft20 marginBottom45",attrs:{prop:"brandName"}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.brandName,callback:function(t){e.$set(e.ruleForm1,"brandName",t)},expression:"ruleForm1.brandName"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券颜色：",required:""}},[a("el-color-picker",{model:{value:e.ruleForm1.color,callback:function(t){e.$set(e.ruleForm1,"color",t)},expression:"ruleForm1.color"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客服电话：",prop:"servicePhone"}},[a("el-input",{staticClass:"width220",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.servicePhone,callback:function(t){e.$set(e.ruleForm1,"servicePhone",t)},expression:"ruleForm1.servicePhone"}})],1),e._v(" "),a("div",{staticClass:"grid-content bg-purple-light vertical marginTop30 marginLeft55 marginBottom30"},[a("span",{staticClass:"marginLeft30"},[e._v("详情页设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"封面图文：",required:""}},[a("div",{staticClass:"pictureBox"},[a("div",{staticClass:"marginLeft20"},[a("el-form-item",{attrs:{prop:"iconUrlList"}},[a("div",{staticClass:"Logo textCenter",on:{click:e.addPictureCover}},[e.ruleForm1.iconUrlList?a("img",{attrs:{src:e.ruleForm1.iconUrlList}}):e._e(),e._v(" "),e.ruleForm1.iconUrlList?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"72px",color:"#8c939d"}},[e._v("+")])])]),e._v(" "),a("div",[e._v("建议上传64*64尺寸的图片")])],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft20",attrs:{prop:"summary"}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm1.summary,callback:function(t){e.$set(e.ruleForm1,"summary",t)},expression:"ruleForm1.summary"}})],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"优惠券使用说明：",required:""}},[a("div",{attrs:{id:"editor-trigger"}}),e._v(" "),1==e.ruleForm1.descriptionState?a("div",{staticClass:"colorRed fontSize12 noUsePosition",style:{lineHeight:1,marginTop:"4px"}},[e._v("优惠券使用说明不能为空")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"图文介绍：",required:""}},[a("div",{staticClass:"pictureIntroduce"},e._l(e.ruleForm1.textImageList,function(t,n){return a("div",{key:n},[a("div",{staticClass:"Introduceuploaded"},[a("div",{staticClass:"pictureText textCenter",on:{click:function(t){e.addPictureIntroduce(n)}}},[a("el-form-item",{attrs:{prop:"textImageList."+n+".imageDetail",rules:[{required:!0,message:"您还未上传图片"}]}},[t.imageDetail?a("img",{attrs:{src:t.imageDetail,alt:""}}):e._e(),e._v(" "),t.imageDetail?e._e():a("span",{staticClass:"fontSize40",style:{lineHeight:"70px",color:"#8c939d"}},[e._v("+")])])],1),e._v(" "),a("div",[e._v("建议上传680*300尺寸的图片")])]),e._v(" "),a("el-form-item",{staticClass:"marginLeft20",attrs:{prop:"textImageList."+n+".textDetail",rules:[{required:!0,message:"图片说明不能为空"}]}},[a("el-input",{staticClass:"width220 marginTop25",attrs:{placeholder:"请输入内容"},model:{value:t.textDetail,callback:function(a){e.$set(t,"textDetail",a)},expression:"item.textDetail"}}),a("br")],1),e._v(" "),0==n&&e.ruleForm1.textImageList.length<20?a("el-button",{staticClass:"marginLeft20 marginTop45 marginBottom20",attrs:{type:"primary"},on:{click:function(t){e.addImageTextDescription(n)}}},[e._v("添加")]):e._e(),e._v(" "),n>0?a("el-button",{staticClass:"marginLeft20 marginTop45 marginBottom20",on:{click:function(t){e.deleteImageTextDescription(n)}}},[e._v("删除")]):e._e()],1)}))])],1)],1),e._v(" "),a("el-tab-pane",{staticClass:"publishSetup",attrs:{label:"进行发布设置",name:"fourth"}},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm marginTop30",attrs:{model:e.ruleForm2,rules:e.rules2,"label-width":"150px"}},[a("div",{staticClass:"marginLeft55"},[a("el-form-item",{attrs:{label:"优惠券发行总数：",prop:"number"}},[a("el-input",{model:{value:e.ruleForm2.number,callback:function(t){e.$set(e.ruleForm2,"number",t)},expression:"ruleForm2.number"}}),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("不输入则默认发行优惠券不限张数")])],1),e._v(" "),a("el-form-item",{attrs:{label:"开启购买："}},[a("el-switch",{attrs:{disabled:2==e.queryCardStatus,"active-value":1,"inactive-value":0},on:{click:e.isBuyClear},model:{value:e.ruleForm2.isBuy,callback:function(t){e.$set(e.ruleForm2,"isBuy",e._n(t))},expression:"ruleForm2.isBuy"}})],1),e._v(" "),1==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"buyFlagBox"},[a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"优惠券购买金额：",prop:"buyMoney"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:2==e.queryCardStatus},model:{value:e.ruleForm2.buyMoney,callback:function(t){e.$set(e.ruleForm2,"buyMoney",e._n(t))},expression:"ruleForm2.buyMoney"}},[a("template",{slot:"prepend"},[e._v("￥")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"marginTop20 marginLeft10",attrs:{label:" "}},[3!=e.cardType?a("el-checkbox-group",{model:{value:e.ruleForm2.discountType,callback:function(t){e.$set(e.ruleForm2,"discountType",t)},expression:"ruleForm2.discountType"}},[a("el-checkbox",{attrs:{label:1,name:"discountType",disabled:2==e.queryCardStatus}},[e._v("购买时可享受会员折扣")]),a("br"),e._v(" "),a("el-checkbox",{attrs:{label:2,name:"discountType",disabled:2==e.queryCardStatus}},[e._v("购买时可用积分做抵扣")]),a("br"),e._v(" "),a("el-checkbox",{attrs:{label:3,name:"discountType",disabled:2==e.queryCardStatus}},[e._v("购买时可用粉币做抵扣")]),a("br")],1):e._e(),e._v(" "),3==e.cardType?a("div",e._l(e.ruleForm2.giftBuyMoney,function(t,n){return a("div",{key:n,staticClass:"giftDate"},[a("div",[a("el-form-item",{attrs:{prop:"giftBuyMoney."+n+".limiteData",rules:{required:!0,message:"请选择时间范围"}}},[a("el-date-picker",{attrs:{disabled:2==e.queryCardStatus,type:"daterange","range-separator":"至","picker-options":e.pickerOptions1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.limiteData,callback:function(a){e.$set(t,"limiteData",a)},expression:"item.limiteData"}}),e._v(" "),0==e.tipArray[n]?a("span",{staticClass:"colorRed datePosition"},[e._v("日期期间已存在")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"colorGray fontSize14"},[e._v("期间,礼品兑换券价格为")]),e._v(" "),a("div",{staticClass:"price"},[a("el-form-item",{attrs:{prop:"giftBuyMoney."+n+".money",rules:[{required:!0,message:"礼品兑换券价格不能为空"},{type:"number",min:0,message:"礼品兑换券价格必须为数字值"}]}},[a("el-input",{style:{width:"40px"},attrs:{placeholder:"",disabled:2==e.queryCardStatus},model:{value:t.money,callback:function(a){e.$set(t,"money",e._n(a))},expression:"item.money"}},[a("template",{slot:"prepend"},[e._v("￥")])],2),e._v("\n                        元\n                      ")],1)],1),e._v(" "),n>0?a("span",{staticClass:"deleteDataPrices",style:{color:"#20a0ff"},on:{click:function(t){e.deleteCurrentprices(n)}}},[e._v("删除")]):e._e(),e._v(" "),0==n?a("el-button",{staticClass:"marginLeft10",attrs:{type:"primary"},on:{click:function(t){e.addCurrentprices(n)}}},[e._v("添加时价")]):e._e()],1)})):e._e()],1)],1)]):e._e(),e._v(" "),0==e.ruleForm2.isBuy?a("el-form-item",{attrs:{label:"领取数量限制："}},[a("el-switch",{attrs:{disabled:2==e.queryCardStatus,"active-value":1,"inactive-value":0},on:{click:e.isReceiveNumClear}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("关联”支付有礼赠送“活动时，请不要开启领取限制")])],1):e._e(),e._v(" "),1==e.ruleForm2.isReceiveNum&0==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"LimitNumBox"},[a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"最多领取数量规则："}},[a("el-radio-group",{model:{value:e.ruleForm2.limitType,callback:function(t){e.$set(e.ruleForm2,"limitType",e._n(t))},expression:"ruleForm2.limitType"}},[a("el-radio",{attrs:{label:0,disabled:2==e.queryCardStatus}},[e._v("每人每天最多领取")]),e._v(" "),a("el-radio",{attrs:{label:1,disabled:2==e.queryCardStatus}},[e._v("该优惠券每人最多领取")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"marginLeft10",attrs:{label:"最多领取数量：",prop:"limitNum"}},[a("el-input",{attrs:{disabled:2==e.queryCardStatus},model:{value:e.ruleForm2.limitNum,callback:function(t){e.$set(e.ruleForm2,"limitNum",e._n(t))},expression:"ruleForm2.limitNum"}})],1)],1)]):e._e(),e._v(" "),0==e.ruleForm2.isBuy?a("el-form-item",{attrs:{label:"推荐有奖："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:e.isRecommendClear},model:{value:e.ruleForm2.isRecommend,callback:function(t){e.$set(e.ruleForm2,"isRecommend",e._n(t))},expression:"ruleForm2.isRecommend"}}),e._v(" "),a("span",{staticClass:"colorLowerGray",style:{marginLeft:"10px"}},[e._v("开启时，粉丝向他人推荐优惠券后可获得相应的奖励")])],1):e._e(),e._v(" "),1==e.ruleForm2.isRecommend&0==e.ruleForm2.isBuy?a("el-form-item",[a("div",{staticClass:"recommendBox"},[a("el-form-item",{attrs:{label:"赠送奖励：",prop:"reward"}},[a("el-checkbox-group",{model:{value:e.ruleForm2.reward,callback:function(t){e.$set(e.ruleForm2,"reward",t)},expression:"ruleForm2.reward"}},[a("el-checkbox",{attrs:{label:0,name:"reward"}},[e._v("积分")]),e._v(" "),a("el-checkbox",{attrs:{label:1,name:"reward"}},[e._v("粉币")]),e._v(" "),a("el-checkbox",{attrs:{label:2,name:"reward"}},[e._v("MB流量")]),e._v(" "),a("el-checkbox",{attrs:{label:3,name:"reward"}},[e._v("现金")])],1)],1),e._v(" "),e.ruleForm2.reward.length>0?a("el-form-item",{attrs:{label:"推荐成功后：",required:""}},[a("div",{staticClass:"recommendAfter fontSize14"},[-1!=e.ruleForm2.reward.indexOf(0)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10 marginLeft10 colorGray"},[e._v("赠送")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"jifen"}},[a("el-input",{model:{value:e.ruleForm2.jifen,callback:function(t){e.$set(e.ruleForm2,"jifen",e._n(t))},expression:"ruleForm2.jifen"}})],1),e._v(" "),a("span",{staticClass:"fl marginLeft10 colorGray"},[e._v("积分，")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(1)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10 colorGray"},[e._v("送粉币")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"fenbi"}},[a("el-input",{model:{value:e.ruleForm2.fenbi,callback:function(t){e.$set(e.ruleForm2,"fenbi",e._n(t))},expression:"ruleForm2.fenbi"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10 colorGray"},[e._v("个")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(2)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10 colorGray"},[e._v("送流量")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"flow"}},[a("el-input",{model:{value:e.ruleForm2.flow,callback:function(t){e.$set(e.ruleForm2,"flow",e._n(t))},expression:"ruleForm2.flow"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10 colorGray"},[e._v("MB，")])],1):e._e(),e._v(" "),-1!=e.ruleForm2.reward.indexOf(3)?a("div",{staticClass:"marginBottom20"},[a("span",{staticClass:"fl marginRight10 colorGray"},[e._v("送金额")]),e._v(" "),a("el-form-item",{staticClass:"fl",attrs:{prop:"money"}},[a("el-input",{model:{value:e.ruleForm2.money,callback:function(t){e.$set(e.ruleForm2,"money",e._n(t))},expression:"ruleForm2.money"}})],1),e._v(" "),a("span",{staticClass:"marginLeft10 colorGray"},[e._v("元")])],1):e._e()])]):e._e()],1)]):e._e()],1)])],1)],1),e._v(" "),a("div",{staticClass:"textCenter buttonPosition bottomButton"},[a("el-button",{staticClass:"saveButton",attrs:{type:"primary"},on:{click:e.saveEditorCoupon}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var J=a("X4nt")(Q,K,!1,function(e){a("VRlY")},null,null).exports;n.default.use(o.a);var X=new o.a({routes:[{path:"/",redirect:"/couponMainMenu"},{path:"/couponAdmin",name:"CouponAdmin",component:F},{path:"/createCoupon",name:"CreateCoupon",component:C},{path:"/couponDetail",name:"CouponDetail",component:$},{path:"/couponVerification",name:"CouponVerification",component:T},{path:"/editCoupon",name:"EditCoupon",component:J},{path:"/couponMainMenu",name:"CouponMainMenu",component:G},{path:"/test",name:"Test",component:W},{path:"/recommend",name:"Recommend",component:P},{path:"/dataStatistics",name:"DataStatistics",component:q},{path:"/recommendList",name:" RecommendList",component:O}]}),Y=a("mwE6"),Z=a.n(Y),ee=(a("cU5d"),a("orjq")),te={division:function(e,t){for(var a=[[]],n=0,i=0,r=0;i<e.length;i++,r++)i&&i%t==0&&(r=0,++n),a[n]||(a[n]=[]),a[n][r]=e[i];return a},copy:function(e){var t=e.constructor===Array?[]:{};for(var a in e)e.hasOwnProperty(a)&&("object"==h()(e[a])?t[a]=this.copy(e[a]):t[a]=e[a]);return t},merge:function(e){for(var t=1,a=arguments.length;t<a;t++){var n=arguments[t]||{};for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];void 0!==r&&(e[i]=r)}}return e}},ae={name:"GtTransfer",props:{data:{type:Array},selected:{type:Array},prop:{type:Array},label:{type:Array},visible:{type:Boolean},pageSize:{type:[Number,String]},total:{type:[Number,String]}},data:function(){return{dialogVisible:!1,flip:!1,changeArrayList:[],changeList:[],changeListOld:[],page:1}},watch:{data:function(e){var t=this,a=t.changeList,n=t.changeListOld,i=t.changeArrayList;if(void 0!=e&&""!=e){a.length>0&&t.flip&&(n=n.concat(a)),n.length>0&&(e.forEach(function(e){for(var a=0;a<n.length;a++)if(e.id==n[a].id){void 0==i[t.page]&&(i[t.page]=[]),i[t.page].push(e),n.splice(a,1);break}}),this.changeArrayList.splice(1,0));i=te.copy(i[t.page]||[]);t.flip=!0,i.length>0&&t.$nextTick(function(){e.forEach(function(e){for(var a=0;a<i.length;a++)if(e.id==i[a].id){t.$refs.multipleTable.toggleRowSelection(e),i.splice(a,1);break}})})}},selected:function(e){this.changeListOld=e},visible:function(e){this.dialogVisible=e},dialogVisible:function(e){var t=this;t.$emit("update:visible",e),e||t.$nextTick(function(){t.flip=!1,t.changeArrayList=[],t.changeList=[],t.changeListOld=[],t.page=1})},changeArrayList:function(e){var t=this;t.changeList=[],e.forEach(function(e){t.changeList=t.changeList.concat(e)}),t.changeList=t.changeList.concat(t.changeListOld)}},components:{},beforeCreate:function(){},beforeMount:function(){this.dialogVisible=this.visible},mounted:function(){},methods:{handleSelectionChange:function(e){this.changeArrayList[this.page]=e,this.changeArrayList.splice(1,0)},handleCurrentChange:function(e){this.flip=!1,this.page=e,this.$emit("current-change",e)},confirm:function(){this.$emit("confirm",this.changeList),this.dialogVisible=!1},tapRemvoe:function(e){e=e;var t=this.changeArrayList,a=this.changeList,n=this.changeListOld;for(var i in t){var r=!1;for(var o in t[i])if(t[i][o].id==e){t[i].splice(o,1),r=!0;break}if(r)break}for(var s in n)if(n[s].id==e){n.splice(s,1);break}for(var l in a)if(a[l].id==e){a.splice(l,1);break}}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gt-transfer"},[a("el-dialog",{attrs:{title:"分配餐桌",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._t("default"),e._v(" "),a("div",{staticClass:"gt-transfer-content"},[e.label?a("div",{staticClass:"gt-transfer-left"},[a("el-table",{ref:"multipleTable",attrs:{data:e.data},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),e._l(e.label,function(t,n){return a("el-table-column",{key:n,attrs:{prop:e.prop[n],label:t}})})],2)],1):e._e(),e._v(" "),a("div",{staticClass:"gt-transfer-right"},[a("header",[e._v("已选择："+e._s(e.changeList.length))]),e._v(" "),a("section",[a("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},e._l(e.changeList,function(t){return t?a("tr",{key:t.id},[a("td",[a("span",{staticClass:"fl-l"},[e._v(e._s(t.tabName))]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.tapRemvoe(t.id)}}},[e._v("删除")])],1)]):e._e()}))])])]),e._v(" "),e.dialogVisible?a("div",{staticClass:"gt-transfer-footer"},[a("div",{staticClass:"inb-block"},[a("el-pagination",{attrs:{"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"fl-r"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)]):e._e()],2)],1)},staticRenderFns:[]};var ie,re,oe=a("X4nt")(ae,ne,!1,function(e){a("jsIo")},"data-v-ce91060e",null).exports,se=(a("yHt3"),function(e){ie&&e(ie,m.a)});(re=function(e){var t=m()("#"+e);if(1===t.length){var a=t[0].nodeName;"TEXTAREA"!==a&&"DIV"!==a||(this.valueNodeName=a.toLowerCase(),this.$valueContainer=t,this.$prev=t.prev(),this.$parent=t.parent(),this.init())}}).fn=re.prototype,re.$body=m()("body"),re.$document=m()(document),re.$window=m()(window),re.userAgent=navigator.userAgent,re.getComputedStyle=window.getComputedStyle,re.w3cRange="function"==typeof document.createRange,re.hostname=location.hostname.toLowerCase(),re.isOnWebsite=re.hostname===(re.websiteHost="wangeditor.github.io"),re.docsite="http://www.kancloud.cn/wangfupeng/wangeditor2/113961",ie=re,re.plugin=function(e){re._plugins||(re._plugins=[]),"function"==typeof e&&re._plugins.push(e)},se(function(e,t){e.fn.init=function(){this.initDefaultConfig(),this.addEditorContainer(),this.addTxt(),this.addMenuContainer(),this.menus={},this.commandHooks()}}),se(function(e,t){e.fn.ready=function(e){this.readyFns||(this.readyFns=[]),this.readyFns.push(e)},e.fn.readyHeadler=function(){for(var e=this.readyFns;e.length;)e.shift().call(this)},e.fn.updateValue=function(){var e=this.$valueContainer,t=this.txt.$txt;if(e!==t){var a=t.html();e.val(a)}},e.fn.getInitValue=function(){var e=this.$valueContainer,t="",a=this.valueNodeName;return"div"===a?t=e.html():"textarea"===a&&(t=e.val()),t},e.fn.updateMenuStyle=function(){var e=this.menus;t.each(e,function(e,t){t.updateSelected()})},e.fn.enableMenusExcept=function(e){this._disabled||("string"==typeof(e=e||[])&&(e=[e]),t.each(this.menus,function(t,a){e.indexOf(t)>=0||a.disabled(!1)}))},e.fn.disableMenusExcept=function(e){this._disabled||("string"==typeof(e=e||[])&&(e=[e]),t.each(this.menus,function(t,a){e.indexOf(t)>=0||a.disabled(!0)}))},e.fn.hideDropPanelAndModal=function(){var e=this.menus;t.each(e,function(e,t){var a=t.dropPanel||t.dropList||t.modal;a&&a.hide&&a.hide()})}}),se(function(e,t){var a=!e.w3cRange;function n(){}e.fn.currentRange=function(e){if(!e)return this._rangeData;this._rangeData=e},e.fn.collapseRange=function(e,t){t="start"===(t=t||"end"),(e=e||this.currentRange())&&(e.collapse(t),this.currentRange(e))},e.fn.getRangeText=a?n:function(e){if(e=e||this.currentRange())return e.toString()},e.fn.getRangeElem=a?n:function(e){var t=(e=e||this.currentRange()).commonAncestorContainer;return 1===t.nodeType?t:t.parentNode},e.fn.isRangeEmpty=a?n:function(e){return!(!(e=e||this.currentRange())||!e.startContainer||e.startContainer!==e.endContainer||e.startOffset!==e.endOffset)},e.fn.saveSelection=a?n:function(e){var a,n,i=this.txt.$txt.get(0);e?a=e.commonAncestorContainer:(n=document.getSelection()).getRangeAt&&n.rangeCount&&(a=(e=document.getSelection().getRangeAt(0)).commonAncestorContainer),a&&(t.contains(i,a)||i===a)&&this.currentRange(e)},e.fn.restoreSelection=a?n:function(t){var a;if(t=t||this.currentRange())try{(a=document.getSelection()).removeAllRanges(),a.addRange(t)}catch(t){e.error("执行 editor.restoreSelection 时，IE可能会有异常，不影响使用")}},e.fn.restoreSelectionByElem=a?n:function(e,t){e&&(t=t||"end",this.setRangeByElem(e),"start"===t&&this.collapseRange(this.currentRange(),"start"),"end"===t&&this.collapseRange(this.currentRange(),"end"),this.restoreSelection())},e.fn.initSelection=a?n:function(){if(!this.currentRange()){var e=this.txt.$txt.children().first();e.length&&this.restoreSelectionByElem(e.get(0))}},e.fn.setRangeByElem=a?n:function(e){var a=this.txt.$txt.get(0);if(e&&t.contains(a,e)){for(var n=e.firstChild;n&&3!==n.nodeType;)n=n.firstChild;for(var i=e.lastChild;i&&3!==i.nodeType;)i=i.lastChild;var r=document.createRange();n&&i?(r.setStart(n,0),r.setEnd(i,i.textContent.length)):(r.setStart(e,0),r.setEnd(e,0)),this.saveSelection(r)}}}),se(function(e,t){e.w3cRange||(e.fn.getRangeText=function(e){if(e=e||this.currentRange())return e.text},e.fn.getRangeElem=function(e){if(e=e||this.currentRange()){var t=e.parentElement();return 1===t.nodeType?t:t.parentNode}},e.fn.isRangeEmpty=function(e){return!(e=e||this.currentRange())||!e.text},e.fn.saveSelection=function(e){var a,n=this.txt.$txt.get(0);(a=e?e.parentElement():void 0===(e=document.selection.createRange()).parentElement?null:e.parentElement())&&(t.contains(n,a)||n===a)&&this.currentRange(e)},e.fn.restoreSelection=function(e){var t;if(e=e||this.currentRange()){t=document.selection.createRange();try{t.setEndPoint("EndToEnd",e)}catch(e){}if(0===e.text.length)try{t.collapse(!1)}catch(e){}else t.setEndPoint("StartToStart",e);t.select()}})}),se(function(e,t){e.fn.commandHooks=function(){var e=this,a={insertHtml:function(a){var n,i=t(a),r=e.getRangeElem();(n=e.getLegalTags(r))&&t(n).after(i)}};e.commandHooks=a}}),se(function(e,t){e.fn.command=function(e,t,a,n){var i,r=this;this.customCommand(e,function(){t&&(r.queryCommandSupported(t)?document.execCommand(t,!1,a):(i=r.commandHooks,t in i&&i[t](a)))},n)},e.fn.commandForElem=function(e,t,a,n,i){var r,o;"string"==typeof e?r=e:(r=e.selector,o=e.check);var s=this.getRangeElem();(s=this.getSelfOrParentByName(s,r,o))&&this.setRangeByElem(s),this.command(t,a,n,i)},e.fn.customCommand=function(e,t,a){var n=this,i=n.currentRange();i?(n.undoRecord(),this.restoreSelection(i),t.call(n),this.saveSelection(),this.restoreSelection(),a&&"function"==typeof a&&a.call(n),n.txt.insertEmptyP(),n.updateValue(),n.updateMenuStyle(),setTimeout(function(){n.hideDropPanelAndModal()},200),e&&e.preventDefault()):e&&e.preventDefault()},e.fn.queryCommandValue=function(e){var t="";try{t=document.queryCommandValue(e)}catch(e){}return t},e.fn.queryCommandState=function(e){var t=!1;try{t=document.queryCommandState(e)}catch(e){}return t},e.fn.queryCommandSupported=function(e){var t=!1;try{t=document.queryCommandSupported(e)}catch(e){}return t}}),se(function(e,t){var a;function n(e){var a=this,n=!1;return t(e).each(function(){if(this===a)return n=!0,!1}),n}e.fn.getLegalTags=function(t){var a=this.config.legalTags;if(a)return this.getSelfOrParentByName(t,a);e.error("配置项中缺少 legalTags 的配置")},e.fn.getSelfOrParentByName=function(e,i,r){if(e&&i){a||(a=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector),a||(a=n);for(var o=this.txt.$txt.get(0);e&&o!==e&&t.contains(o,e);){if(a.call(e,i)){if(!r)return e;if(r(e))return e}e=e.parentNode}}}}),se(function(e,t){var a=[],n=[];function i(e,t){var a=t.val,n=e.txt.$txt.html();null!=a&&a!==n&&(e.txt.$txt.html(a),e.updateValue())}e.fn.undoRecord=function(){var e=this.txt.$txt.html();e!==(n.length?n[0]:"")&&(a.length&&(a=[]),n.unshift({range:this.currentRange(),val:e}),n.length>20&&n.pop())},e.fn.undo=function(){if(n.length){var e=n.shift();a.unshift(e),i(this,e)}},e.fn.redo=function(){if(a.length){var e=a.shift();n.unshift(e),i(this,e)}}}),se(function(e,t){e.fn.create=function(){var a=this;a.addMenus(),a.renderMenus(),a.renderMenuContainer(),a.renderTxt(),a.renderEditorContainer(),a.eventMenus(),a.eventMenuContainer(),a.eventTxt(),a.readyHeadler(),a.initSelection();var n=e._plugins;n&&n.length&&t.each(n,function(e,t){t.call(a)}),a.$txt=a.txt.$txt},e.fn.disable=function(){this.txt.$txt.removeAttr("contenteditable"),this.disableMenusExcept(),this._disabled=!0},e.fn.enable=function(){this._disabled=!1,this.txt.$txt.attr("contenteditable","true"),this.enableMenusExcept()},e.fn.destroy=function(){var e=this.$valueContainer,t=this.$editorContainer;"div"===this.valueNodeName?(e.removeAttr("contenteditable"),t.after(e),t.hide()):(e.show(),t.hide())},e.fn.undestroy=function(){var e=this.$valueContainer,t=this.$editorContainer,a=this.menuContainer.$menuContainer;"div"===this.valueNodeName?(e.attr("contenteditable","true"),a.after(e),t.show()):(e.hide(),t.show())},e.fn.clear=function(){var e=this.txt.$txt;e.html("<p><br></p>"),this.restoreSelectionByElem(e.find("p").get(0))}}),se(function(e,t){var a=function(e){this.editor=e,this.init()};a.fn=a.prototype,e.MenuContainer=a}),se(function(e,t){var a=e.MenuContainer;a.fn.init=function(){var e=t('<div class="wangEditor-menu-container clearfix"></div>');this.$menuContainer=e,this.changeShadow()},a.fn.changeShadow=function(){var e=this.$menuContainer,t=this.editor.txt.$txt;t.on("scroll",function(){t.scrollTop()>10?e.addClass("wangEditor-menu-shadow"):e.removeClass("wangEditor-menu-shadow")})}}),se(function(e,t){var a=e.MenuContainer;a.fn.render=function(){var e=this.$menuContainer;this.editor.$editorContainer.append(e)},a.fn.height=function(){return this.$menuContainer.height()},a.fn.appendMenu=function(e,t){return this._addGroup(e),this._addOneMenu(t)},a.fn._addGroup=function(e){var a,n=this.$menuContainer;this.$currentGroup&&this.currentGroupIdx===e||(a=t('<div class="menu-group clearfix"></div>'),n.append(a),this.$currentGroup=a,this.currentGroupIdx=e)},a.fn._addOneMenu=function(e){var a=e.$domNormal,n=e.$domSelected,i=this.$currentGroup,r=t('<div class="menu-item clearfix"></div>');return n.hide(),r.append(a).append(n),i.append(r),r}}),se(function(e,t){var a=function(e){this.editor=e.editor,this.id=e.id,this.title=e.title,this.$domNormal=e.$domNormal,this.$domSelected=e.$domSelected||e.$domNormal,this.commandName=e.commandName,this.commandValue=e.commandValue,this.commandNameSelected=e.commandNameSelected||e.commandName,this.commandValueSelected=e.commandValueSelected||e.commandValue};a.fn=a.prototype,e.Menu=a}),se(function(e,t){e.Menu.fn.initUI=function(){var a=this.editor.UI.menus,n=this.id,i=a[n];this.$domNormal&&this.$domSelected||(null==i&&(e.warn('editor.UI配置中，没有菜单 "'+n+'" 的UI配置，只能取默认值'),i=a.default),this.$domNormal=t(i.normal),/^\./.test(i.selected)?this.$domSelected=this.$domNormal.clone().addClass(i.selected.slice(1)):this.$domSelected=t(i.selected))}}),se(function(e,t){var a=e.Menu;a.fn.render=function(e){this.initUI();var t=this.editor.menuContainer.appendMenu(e,this),a=this.onRender;this._renderTip(t),a&&"function"==typeof a&&a.call(this)},a.fn._renderTip=function(a){var n,i,r=this,o=r.editor,s=r.title,l=t('<div class="menu-tip"></div>');function c(){l.show()}function u(){l.hide()}r.tipWidth||(n=t('<p style="opacity:0; filter:Alpha(opacity=0); position:absolute;top:-10000px;">'+s+"</p>"),e.$body.append(n),o.ready(function(){var e=n.outerWidth()+5,t=l.outerWidth(),a=parseFloat(l.css("margin-left"),10);n.remove(),n=null,l.css({width:e,"margin-left":a+(t-e)/2}),r.tipWidth=e})),l.append(s),a.append(l),a.find("a").on("mouseenter",function(e){r.active()||r.disabled()||(i=setTimeout(c,200))}).on("mouseleave",function(e){i&&clearTimeout(i),u()}).on("click",u)},a.fn.bindEvent=function(){var t=this,a=t.$domNormal,n=t.$domSelected,i=t.clickEvent;i||(i=function(a){var n=t.dropPanel||t.dropList||t.modal;if(n&&n.show)n.isShowing?n.hide():n.show();else{var i,r,o=t.editor;t.selected?(i=t.commandNameSelected,r=t.commandValueSelected):(i=t.commandName,r=t.commandValue),i?o.command(a,i,r):(e.warn('菜单 "'+t.id+'" 未定义click事件'),a.preventDefault())}});var r=t.clickEventSelected||i;a.click(function(e){if(!t.disabled()){if("img"==t.id)return Object(ee.a)({modal:!0,selecType:!1,width:820,height:500,lockScroll:!1,closeOnClickModal:!0,closeOnPressEscape:!0}).then(function(a){var n='<img style="max-width:100%;" src="'+a[0].url+'"/>';t.editor.command(e,"insertHtml",n)}).catch(function(e){}),!1;i.call(t,e),t.updateSelected()}e.preventDefault()}),n.click(function(e){t.disabled()||(r.call(t,e),t.updateSelected()),e.preventDefault()})},a.fn.updateSelected=function(){this.editor;var e=this.updateSelectedEvent;e||(e=function(){var e=this.editor,t=this.commandName,a=this.commandValue;if(a){if(e.queryCommandValue(t).toLowerCase()===a.toLowerCase())return!0}else if(e.queryCommandState(t))return!0;return!1});var t=e.call(this);t=!!t,this.changeSelectedState(t)},a.fn.changeSelectedState=function(e){var t=this,a=t.selected;if(null!=e&&"boolean"==typeof e){if(a===e)return;t.selected=e,e?(t.$domNormal.hide(),t.$domSelected.show()):(t.$domNormal.show(),t.$domSelected.hide())}},a.fn.active=function(e){if(null==e)return this._activeState;this._activeState=e},a.fn.activeStyle=function(e){this.selected;var t=this.$domNormal,a=this.$domSelected;e?(t.addClass("active"),a.addClass("active")):(t.removeClass("active"),a.removeClass("active")),this.active(e)},a.fn.disabled=function(e){if(null==e)return!!this._disabled;if(this._disabled!==e){var t=this.$domNormal,a=this.$domSelected;e?(t.addClass("disable"),a.addClass("disable")):(t.removeClass("disable"),a.removeClass("disable")),this._disabled=e}}}),se(function(e,t){var a=function(e,t,a){this.editor=e,this.menu=t,this.data=a.data,this.tpl=a.tpl,this.selectorForELemCommand=a.selectorForELemCommand,this.init()};a.fn=a.prototype,e.DropList=a}),se(function(e,t){var a=e.DropList;a.fn.init=function(){this.initDOM(),this.bindEvent(),this.initHideEvent()},a.fn.initDOM=function(){var e,a,n=this.data,i=this.tpl||"<span>{#title}</span>",r=t('<div class="wangEditor-drop-list clearfix"></div>');t.each(n,function(n,o){e=i.replace(/{#commandValue}/gi,n).replace(/{#title}/gi,o),(a=t('<a href="#" commandValue="'+n+'"></a>')).append(e),r.append(a)}),this.$list=r},a.fn.bindEvent=function(){var e=this.editor,a=this.menu,n=a.commandName,i=this.selectorForELemCommand;this.$list.on("click","a[commandValue]",function(r){var o=t(r.currentTarget).attr("commandValue");a.selected&&e.isRangeEmpty()&&i?e.commandForElem(i,r,n,o):e.command(r,n,o)})},a.fn.initHideEvent=function(){var a=this,n=a.$list.get(0);e.$body.on("click",function(e){if(a.isShowing){var i,r=e.target,o=a.menu;(i=o.selected?o.$domSelected.get(0):o.$domNormal.get(0))===r||t.contains(i,r)||n===r||t.contains(n,r)||a.hide()}}),e.$window.scroll(function(){a.hide()}),e.$window.on("resize",function(){a.hide()})}}),se(function(e,t){var a=e.DropList;a.fn._render=function(){var e=this.editor,t=this.$list;e.$editorContainer.append(t),this.rendered=!0},a.fn._position=function(){var e=this.$list,t=this.editor,a=this.menu,n=t.menuContainer.$menuContainer,i=a.selected?a.$domSelected:a.$domNormal,r=i.offsetParent().position(),o=r.top,s=r.left,l=i.offsetParent().height(),c=i.offsetParent().width(),u=o+l,d=s+c/2,m=0-c/2,p=d+e.outerWidth()-t.txt.$txt.outerWidth();p>-10&&(m=m-p-10),e.css({top:u,left:d,"margin-left":m}),t._isMenufixed&&(u+=n.offset().top+n.outerHeight()-e.offset().top,e.css({top:u}))},a.fn.show=function(){var e=this,t=e.menu;(e.rendered||e._render(),e.isShowing)||(e.$list.show(),e._position(),e.isShowing=!0,t.activeStyle(!0))},a.fn.hide=function(){var e=this.menu;this.isShowing&&(this.$list.hide(),this.isShowing=!1,e.activeStyle(!1))}}),se(function(e,t){var a=function(e,t,a){this.editor=e,this.menu=t,this.$content=a.$content,this.width=a.width||200,this.height=a.height,this.onRender=a.onRender,this.init()};a.fn=a.prototype,e.DropPanel=a}),se(function(e,t){var a=e.DropPanel;a.fn.init=function(){this.initDOM(),this.initHideEvent()},a.fn.initDOM=function(){var e=this,a=e.$content,n=e.width,i=e.height,r=t('<div class="wangEditor-drop-panel clearfix"></div>'),o=t('<div class="tip-triangle"></div>');r.css({width:n,height:i||"auto"}),r.append(o),r.append(a),e.$panel=r,e.$triangle=o},a.fn.initHideEvent=function(){var a=this,n=a.$panel.get(0);e.$body.on("click",function(e){if(a.isShowing){var i,r=e.target,o=a.menu;(i=o.selected?o.$domSelected.get(0):o.$domNormal.get(0))===r||t.contains(i,r)||n===r||t.contains(n,r)||a.hide()}}),e.$window.scroll(function(){a.hide()}),e.$window.on("resize",function(){a.hide()})}}),se(function(e,t){var a=e.DropPanel;a.fn._render=function(){var e=this,t=e.onRender,a=e.editor,n=e.$panel;a.$editorContainer.append(n),t&&t.call(e),e.rendered=!0},a.fn._position=function(){var e=this.$panel,t=this.$triangle,a=this.editor,n=a.menuContainer.$menuContainer,i=this.menu,r=i.selected?i.$domSelected:i.$domNormal,o=r.offsetParent().position(),s=o.top,l=o.left,c=r.offsetParent().height(),u=r.offsetParent().width(),d=e.outerWidth(),m=a.txt.$txt.outerWidth(),p=s+c,f=l+u/2,v=0-d/2,h=v;0-v>f-10&&(v=0-(f-10));var g=f+d+v-m;g>-10&&(v=v-g-10),e.css({top:p,left:f,"margin-left":v}),a._isMenufixed&&(p+=n.offset().top+n.outerHeight()-e.offset().top,e.css({top:p})),t.css({"margin-left":h-v-5})},a.fn.focusFirstInput=function(){this.$panel.find("input[type=text],textarea").each(function(){var e=t(this);if(null==e.attr("disabled"))return e.focus(),!1})},a.fn.show=function(){var t=this,a=t.menu;if(t.rendered||t._render(),!t.isShowing){var n=t.$panel;n.show(),t._position(),t.isShowing=!0,a.activeStyle(!0),e.w3cRange?t.focusFirstInput():e.placeholderForIE8(n)}},a.fn.hide=function(){var e=this.menu;this.isShowing&&(this.$panel.hide(),this.isShowing=!1,e.activeStyle(!1))}}),se(function(e,t){var a=function(e,t,a){this.editor=e,this.menu=t,this.$content=a.$content,this.init()};a.fn=a.prototype,e.Modal=a}),se(function(e,t){var a=e.Modal;a.fn.init=function(){this.initDom(),this.initHideEvent()},a.fn.initDom=function(){var e=this.$content,a=t('<div class="wangEditor-modal"></div>'),n=t('<div class="wangEditor-modal-close"><i class="wangeditor-menu-img-cancel-circle"></i></div>');a.append(n),a.append(e),this.$modal=a,this.$close=n},a.fn.initHideEvent=function(){var a=this,n=a.$close,i=a.$modal.get(0);n.click(function(){a.hide()}),e.$body.on("click",function(e){if(a.isShowing){var n,r=e.target,o=a.menu;o&&((n=o.selected?o.$domSelected.get(0):o.$domNormal.get(0))===r||t.contains(n,r))||i===r||t.contains(i,r)||a.hide()}})}}),se(function(e,t){var a=e.Modal;a.fn._render=function(){var t=this.editor,a=this.$modal;a.css("z-index",t.config.zindex+10+""),e.$body.append(a),this.rendered=!0},a.fn._position=function(){var e=this.$modal,t=e.offset().top,a=e.outerWidth(),n=e.outerHeight(),i=0-a/2,r=0-n/2;n/2>t&&(r=0-t),e.css({"margin-left":i+"px","margin-top":r+"px"})},a.fn.show=function(){var e=this,t=e.menu;(e.rendered||e._render(),e.isShowing)||(e.isShowing=!0,e.$modal.show(),e._position(),t&&t.activeStyle(!0))},a.fn.hide=function(){var e=this.menu;this.isShowing&&(this.isShowing=!1,this.$modal.hide(),e&&e.activeStyle(!1))}}),se(function(e,t){var a=function(e){this.editor=e,this.init()};a.fn=a.prototype,e.Txt=a}),se(function(e,t){var a=e.Txt;a.fn.init=function(){var e,a=this,n=a.editor,i=n.$valueContainer,r=n.getInitValue();"DIV"===i.get(0).nodeName?((e=i).addClass("wangEditor-txt"),e.attr("contentEditable","true")):e=t('<div class="wangEditor-txt" contentEditable="true">'+r+"</div>"),n.ready(function(){a.insertEmptyP()}),a.$txt=e,a.contentEmptyHandle(),a.bindEnterForDiv(),a.bindTabEvent(),a.bindPasteFilter(),a.bindFormatText(),a.bindHtml()},a.fn.contentEmptyHandle=function(){var e,a=this.editor,n=this.$txt;n.on("keyup",function(i){if(8===i.keyCode){var r=t.trim(n.html());r&&"<br>"!==r||(e=t("<p><br/></p>"),n.html(""),n.append(e),a.restoreSelectionByElem(e.get(0)))}})},a.fn.bindEnterForDiv=function(){e.config.legalTags;var a,n=this.editor;function i(){if(a){var e=t("<p>"+a.html()+"</p>");a.after(e),a.remove()}}this.$txt.on("keydown keyup",function(e){if(13===e.keyCode){var r,o,s=n.getRangeElem(),l=n.getLegalTags(s);if(!l){if(!(l=n.getSelfOrParentByName(s,"div")))return;r=t(l),"keydown"===e.type&&(a=r,setTimeout(i,0)),"keyup"===e.type&&(o=t("<p>"+r.html()+"</p>"),r.after(o),r.remove(),n.restoreSelectionByElem(o.get(0),"start"))}}})},a.fn.bindTabEvent=function(){var e=this.editor;this.$txt.on("keydown",function(t){9===t.keyCode&&e.queryCommandSupported("insertHtml")&&e.command(t,"insertHtml","&nbsp;&nbsp;&nbsp;&nbsp;")})},a.fn.bindPasteFilter=function(){var e=this.editor,a="",n=this.$txt,i=e.config.legalTags.split(",");function r(e){var a=e.attributes||[],n=[],i=["href","target","src","alt","rowspan","colspan"];t.each(a,function(e,t){t&&2===t.nodeType&&n.push(t.nodeName)}),t.each(n,function(t,a){i.indexOf(a)<0&&e.removeAttribute(a)});var o=e.childNodes;return o.length&&t.each(o,function(e,t){r(t)}),e}n.on("paste",function(n){if(e.config.pasteFilter){var o=e.getRangeElem().nodeName;if("TD"!==o&&"TH"!==o){var s;a="";var l=n.clipboardData||n.originalEvent.clipboardData;if(l&&l.getData)(s=l.getData("text/html"))?function e(n){if(!n||!n.nodeType||!n.nodeName)return;var o;var s=n.nodeName.toLowerCase();var l=n.nodeType;if(3!==l&&1!==l)return;if("div"===s)return void(o=t(n)).children().each(function(){e(this)});if(i.indexOf(s)>=0)a+=(d=(c=n).nodeName.toLowerCase(),m="",p="",["blockquote"].indexOf(d)>=0?(u=t(c),"<"+d+">"+u.text()+"</"+d+">"):["p","h1","h2","h3","h4","h5"].indexOf(d)>=0?(c=r(c),u=t(c),m=(m=u.html()).replace(/<.*?>/gi,function(e){return"</a>"===e||0===e.indexOf("<a ")||0===e.indexOf("<img ")?e:""}),"<"+d+">"+m+"</"+d+">"):["ul","ol"].indexOf(d)>=0?((u=t(c)).children().each(function(){var e=t(r(this)),a=e.html();a=a.replace(/<.*?>/gi,function(e){return"</a>"===e||0===e.indexOf("<a ")||0===e.indexOf("<img ")?e:""}),p+="<li>"+a+"</li>"}),"<"+d+">"+p+"</"+d+">"):(u=t(r(c)),t("<div>").append(u).html()));else if(3===l)a+="<p>"+n.textContent+"</p>";else{if(["meta","style","script","object","form","iframe"].indexOf(s)>=0)return;o=t(r(n)),a+=t("<div>").append(o).html()}var c,u,d,m,p}(t("<div>"+s+"</div>").get(0)):(s=l.getData("text/plain"))&&(s=s.replace(/[ ]/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>"),a=(a="<p>"+s+"</p>").replace(/<p>(https?:\/\/.*?)<\/p>/gi,function(e,t){return'<p><a href="'+t+'" target="_blank">'+t+"</p>"}));else{if(!window.clipboardData||!window.clipboardData.getData)return;if(!(a=window.clipboardData.getData("text")))return;a=(a="<p>"+a+"</p>").replace((new RegExp("\n","g"),"</p><p>"))}a&&e.command(n,"insertHtml",a)}}})},a.fn.bindFormatText=function(){this.editor;var a=this.$txt,n=e.config.legalTags.split(","),i=(n.length,[]);t.each(n,function(e,t){var a=">\\s*<("+t+")>";i.push(new RegExp(a,"ig"))}),i.push(new RegExp(">\\s*<(li)>","ig")),i.push(new RegExp(">\\s*<(tr)>","ig")),i.push(new RegExp(">\\s*<(code)>","ig")),a.formatText=function(){var e=t("<div>"),n=a.html();return n=n.replace(/\s*</gi,"<"),t.each(i,function(e,t){t.test(n)&&(n=n.replace(t,function(e,t){return">\n<"+t+">"}))}),e.html(n),e.text()}},a.fn.bindHtml=function(){var e=this.editor,a=this.$txt,n=e.$valueContainer,i=e.valueNodeName;a.html=function(e){var r;if("div"===i&&(r=t.fn.html.call(a,e)),void 0===e?r=t.fn.html.call(a):(r=t.fn.html.call(a,e),n.val(e)),void 0===e)return r}}}),se(function(e,t){var a=e.Txt,n="propertychange change click keyup input paste";a.fn.render=function(){var e=this.$txt;this.editor.$editorContainer.append(e)},a.fn.initHeight=function(){var e=this.editor,t=this.$txt,a=e.$valueContainer.height(),n=e.menuContainer.height(),i=a-n;i=i<50?50:i,t.height(i),e.valueContainerHeight=a,this.initMaxHeight(i,n)},a.fn.initMaxHeight=function(e,a){var n=this.editor,i=n.menuContainer.$menuContainer,r=this.$txt,o=t("<div>");if(window.getComputedStyle&&"max-height"in window.getComputedStyle(r.get(0))){var s=parseInt(n.$valueContainer.css("max-height"));if(isNaN(s))return;n.useMaxHeight=!0,o.css({"max-height":s-a+"px","overflow-y":"auto"}),r.css({height:"auto","overflow-y":"visible","min-height":e+"px"}),o.on("scroll",function(){r.parent().scrollTop()>10?i.addClass("wangEditor-menu-shadow"):i.removeClass("wangEditor-menu-shadow")}),r.wrap(o)}},a.fn.saveSelectionEvent=function(){var e,a=this.$txt,i=this.editor,r=Date.now();function o(){i.saveSelection()}function s(){Date.now()-r<100||(t("#saverichText").click(),r=Date.now(),o())}function l(){e&&clearTimeout(e),e=setTimeout(o,300)}a.on(n+" focus blur",function(e){s(),l()}),a.on("mousedown",function(){a.on("mouseleave.saveSelection",function(e){s(),l(),i.updateMenuStyle()})}).on("mouseup",function(){a.off("mouseleave.saveSelection")})},a.fn.updateValueEvent=function(){var e,t,a=this.$txt,i=this.editor;function r(){var e=a.html();t!==e&&(i.onchange&&"function"==typeof i.onchange&&i.onchange.call(i),i.updateValue(),t=e)}a.on(n,function(n){null==t&&(t=a.html()),e&&clearTimeout(e),e=setTimeout(r,100)})},a.fn.updateMenuStyleEvent=function(){var e=this.$txt,t=this.editor;e.on(n,function(e){t.updateMenuStyle()})},a.fn.insertEmptyP=function(){var e=this.$txt,a=e.children();0!==a.length?"<br>"!==a.last().html()&&e.append(t("<p><br></p>")):e.append(t("<p><br></p>"))},a.fn.showHeightOnHover=function(){var e=this.editor,a=e.$editorContainer,n=e.menuContainer,i=this.$txt,r=t('<i class="height-tip"><i>'),o=!1;i.on("mouseenter","ul,ol,blockquote,p,h1,h2,h3,h4,h5,table,pre",function(e){!function(e){o||(a.append(r),o=!0),i.position().top,i.outerHeight();var t=e.height(),s=e.position().top,l=parseInt(e.css("margin-top"),10),c=parseInt(e.css("padding-top"),10),u=parseInt(e.css("margin-bottom"),10),d=parseInt(e.css("padding-bottom"),10);n.height(),r.css({height:t+c+l+d+u,top:s+n.height()})}(t(e.currentTarget))}).on("mouseleave",function(){o&&(r.remove(),o=!1)})}}),se(function(e,t){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0,a=this.length;t<a;t++)if(this[t]===e)return t;return-1},Array.prototype.lastIndexOf=function(e){var t=this.length;for(t-=1;t>=0;t--)if(this[t]===e)return t;return-1}),Date.now||(Date.now=function(){return(new Date).valueOf()});var a=window.console,n=function(){};t.each(["info","log","warn","error"],function(t,i){e[i]=null==a?n:function(t){e.config&&e.config.printLog&&a[i]("wangEditor提示: "+t)}}),e.random=function(){return Math.random().toString().slice(2)},e.placeholder="placeholder"in document.createElement("input"),e.placeholderForIE8=function(a){e.placeholder||a.find("input[placeholder]").each(function(){var e=t(this),a=e.attr("placeholder");""===e.val()&&(e.css("color","#666"),e.val(a),e.on("focus.placeholder click.placeholder",function(){e.val(""),e.css("color","#333"),e.off("focus.placeholder click.placeholder")}))})}}),se(function(e,t){e.langs={},e.langs["zh-cn"]={bold:"粗体",underline:"下划线",italic:"斜体",forecolor:"文字颜色",bgcolor:"背景色",strikethrough:"删除线",eraser:"清空格式",source:"源码",quote:"引用",fontfamily:"字体",fontsize:"字号",head:"标题",orderlist:"有序列表",unorderlist:"无序列表",alignleft:"左对齐",aligncenter:"居中",alignright:"右对齐",link:"链接",text:"文本",submit:"提交",cancel:"取消",unlink:"取消链接",table:"表格",emotion:"表情",img:"图片",video:"视频",width:"宽",height:"高",location:"位置",loading:"加载中",searchlocation:"搜索位置",dynamicMap:"动态地图",clearLocation:"清除位置",langDynamicOneLocation:"动态地图只能显示一个位置",insertcode:"插入代码",undo:"撤销",redo:"重复",fullscreen:"全屏"},e.langs.en={bold:"Bold",underline:"Underline",italic:"Italic",forecolor:"Color",bgcolor:"Backcolor",strikethrough:"Strikethrough",eraser:"Eraser",source:"Codeview",quote:"Quote",fontfamily:"Font family",fontsize:"Font size",head:"Head",orderlist:"Ordered list",unorderlist:"Unordered list",alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",link:"Insert link",text:"Text",submit:"Submit",cancel:"Cancel",unlink:"Unlink",table:"Table",emotion:"Emotions",img:"Image",video:"Video",width:"width",height:"height",location:"Location",loading:"Loading",searchlocation:"search",dynamicMap:"Dynamic",clearLocation:"Clear",langDynamicOneLocation:"Only one location in dynamic map",insertcode:"Insert Code",undo:"Undo",redo:"Redo",fullscreen:"Full screnn"}}),se(function(e,t){e.config={},e.config.zindex=1e4,e.config.printLog=!0,e.config.menuFixed=0,e.config.jsFilter=!0,e.config.legalTags="p,h1,h2,h3,h4,h5,h6,blockquote,table,ul,ol,pre",e.config.lang=e.langs["zh-cn"],e.config.menus=["source","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","link","unlink","table","emotion","img","video","location","insertcode","undo","redo","fullscreen"],e.config.colors={"#880000":"暗红色","#800080":"紫色","#ff0000":"红色","#ff00ff":"鲜粉色","#000080":"深蓝色","#0000ff":"蓝色","#00ffff":"湖蓝色","#008080":"蓝绿色","#008000":"绿色","#808000":"橄榄色","#00ff00":"浅绿色","#ffcc00":"橙黄色","#808080":"灰色","#c0c0c0":"银色","#000000":"黑色","#ffffff":"白色"},e.config.familys=["宋体","黑体","楷体","微软雅黑","Arial","Verdana","Georgia","Times New Roman","Microsoft JhengHei","Trebuchet MS","Courier New","Impact","Comic Sans MS"],e.config.fontsizes={1:"10px",2:"13px",3:"16px",4:"19px",5:"22px",6:"25px",7:"28px"},e.config.emotions={default:{title:"默认",size:18,imgs:["../static/emotions/default/1.gif","../static/emotions/default/2.gif","../static/emotions/default/3.gif","../static/emotions/default/4.gif","../static/emotions/default/5.gif","../static/emotions/default/6.gif","../static/emotions/default/7.gif","../static/emotions/default/8.gif","../static/emotions/default/9.gif","../static/emotions/default/10.gif","../static/emotions/default/11.gif","../static/emotions/default/12.gif","../static/emotions/default/13.gif","../static/emotions/default/14.gif","../static/emotions/default/15.gif","../static/emotions/default/16.gif","../static/emotions/default/17.gif","../static/emotions/default/18.gif","../static/emotions/default/19.gif","../static/emotions/default/20.gif","../static/emotions/default/21.gif","../static/emotions/default/22.gif","../static/emotions/default/23.gif","../static/emotions/default/24.gif","../static/emotions/default/25.gif","../static/emotions/default/26.gif","../static/emotions/default/27.gif","../static/emotions/default/28.gif","../static/emotions/default/29.gif","../static/emotions/default/30.gif","../static/emotions/default/31.gif","../static/emotions/default/32.gif","../static/emotions/default/33.gif","../static/emotions/default/34.gif","../static/emotions/default/35.gif","../static/emotions/default/36.gif","../static/emotions/default/37.gif","../static/emotions/default/38.gif","../static/emotions/default/39.gif","../static/emotions/default/40.gif","../static/emotions/default/41.gif","../static/emotions/default/42.gif","../static/emotions/default/43.gif","../static/emotions/default/44.gif","../static/emotions/default/45.gif","../static/emotions/default/46.gif","../static/emotions/default/47.gif","../static/emotions/default/48.gif","../static/emotions/default/49.gif","../static/emotions/default/50.gif"]},jinxing:{title:"金星",size:50,imgs:["../static/emotions/jinxing/1.gif","../static/emotions/jinxing/2.gif","../static/emotions/jinxing/3.gif","../static/emotions/jinxing/4.gif","../static/emotions/jinxing/5.gif","../static/emotions/jinxing/6.gif"]}},e.config.mapAk="TVhjYjq1ICT2qqL5LdS8mwas",e.config.uploadImgUrl="",e.config.uploadTimeout=2e4,e.config.uploadImgFns={},e.config.customUpload=!1,e.config.pasteFilter=!0}),se(function(e,t){e.UI={},e.UI.menus={default:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-command"></i></a>',selected:".selected"},bold:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-bold"></i></a>',selected:".selected"},underline:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-underline"></i></a>',selected:".selected"},italic:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-italic"></i></a>',selected:".selected"},forecolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-pencil"></i></a>',selected:".selected"},bgcolor:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-brush"></i></a>',selected:".selected"},strikethrough:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-strikethrough"></i></a>',selected:".selected"},eraser:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-eraser"></i></a>',selected:".selected"},quote:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-quotes-left"></i></a>',selected:".selected"},source:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-code"></i></a>',selected:".selected"},fontfamily:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-font2"></i></a>',selected:".selected"},fontsize:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-text-height"></i></a>',selected:".selected"},head:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-header"></i></a>',selected:".selected"},orderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-numbered"></i></a>',selected:".selected"},unorderlist:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-list-bullet"></i></a>',selected:".selected"},alignleft:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-left"></i></a>',selected:".selected"},aligncenter:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-center"></i></a>',selected:".selected"},alignright:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-align-right"></i></a>',selected:".selected"},link:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-link"></i></a>',selected:".selected"},unlink:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-unlink"></i></a>',selected:".selected"},table:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-table"></i></a>',selected:".selected"},emotion:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-happy"></i></a>',selected:".selected"},img:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-picture"></i></a>',selected:".selected"},video:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-play"></i></a>',selected:".selected"},location:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-location"></i></a>',selected:".selected"},insertcode:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-terminal"></i></a>',selected:".selected"},undo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-ccw"></i></a>',selected:".selected"},redo:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-cw"></i></a>',selected:".selected"},fullscreen:{normal:'<a href="#" tabindex="-1"><i class="wangeditor-menu-img-enlarge2"></i></a>',selected:'<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-shrink2"></i></a>'}}}),se(function(e,t){e.fn.initDefaultConfig=function(){this.config=t.extend({},e.config),this.UI=t.extend({},e.UI)}}),se(function(e,t){e.fn.addEditorContainer=function(){this.$editorContainer=t('<div class="wangEditor-container"></div>')}}),se(function(e,t){e.fn.addTxt=function(){var t=new e.Txt(this);this.txt=t}}),se(function(e,t){e.fn.addMenuContainer=function(){this.menuContainer=new e.MenuContainer(this)}}),se(function(e,t){e.createMenuFns=[],e.createMenu=function(t){e.createMenuFns.push(t)},e.fn.addMenus=function(){var a=this,n=a.config.menus;function i(e){return n.indexOf(e)>=0}t.each(e.createMenuFns,function(e,t){t.call(a,i)})}}),se(function(e,t){e.createMenu(function(t){var a="bold";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.bold,commandName:"Bold"});r.clickEventSelected=function(e){n.isRangeEmpty()?n.commandForElem("b,strong,h1,h2,h3,h4,h5",e,"Bold"):n.command(e,"Bold")},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(t){var a="underline";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.underline,commandName:"Underline"});r.clickEventSelected=function(e){n.isRangeEmpty()?n.commandForElem("u,a",e,"Underline"):n.command(e,"Underline")},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(t){var a="italic";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.italic,commandName:"Italic"});r.clickEventSelected=function(e){n.isRangeEmpty()?n.commandForElem("i",e,"Italic"):n.command(e,"Italic")},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(a){var n="forecolor";if(a(n)){var i=this,r=i.config.lang,o=i.config.colors,s=new e.Menu({editor:i,id:n,title:r.forecolor}),l=t("<div></div>");t.each(o,function(e,t){l.append(['<a href="#" class="color-item"','    title="'+t+'" commandValue="'+e+'" ','    style="color: '+e+'" ','><i class="wangeditor-menu-img-pencil"></i></a>'].join(""))}),l.on("click","a[commandValue]",function(e){var a=t(this).attr("commandValue");s.selected&&i.isRangeEmpty()?i.commandForElem("font[color]",e,"forecolor",a):i.command(e,"forecolor",a)}),s.dropPanel=new e.DropPanel(i,s,{$content:l,width:125}),s.updateSelectedEvent=function(){var e=i.getRangeElem();return!!(e=i.getSelfOrParentByName(e,"font[color]"))},i.menus[n]=s}})}),se(function(e,t){e.createMenu(function(a){var n="bgcolor";if(a(n)){var i=this,r=i.config.lang,o=i.config.colors,s=new e.Menu({editor:i,id:n,title:r.bgcolor}),l=t("<div></div>");t.each(o,function(e,t){l.append(['<a href="#" class="color-item"','    title="'+t+'" commandValue="'+e+'" ','    style="color: '+e+'" ','><i class="wangeditor-menu-img-brush"></i></a>'].join(""))}),l.on("click","a[commandValue]",function(e){var a=t(this).attr("commandValue");s.selected&&i.isRangeEmpty()?i.commandForElem({selector:"span,font",check:c},e,"BackColor",a):i.command(e,"BackColor",a)}),s.dropPanel=new e.DropPanel(i,s,{$content:l,width:125}),s.updateSelectedEvent=function(){var e=i.getRangeElem();return!!(e=i.getSelfOrParentByName(e,"span,font",c))},i.menus[n]=s}function c(e){var t;return!!(e&&e.style&&null!=e.style.cssText&&(t=e.style.cssText)&&t.indexOf("background-color:")>=0)}})}),se(function(e,t){e.createMenu(function(t){var a="strikethrough";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.strikethrough,commandName:"StrikeThrough"});r.clickEventSelected=function(e){n.isRangeEmpty()?n.commandForElem("strike",e,"StrikeThrough"):n.command(e,"StrikeThrough")},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(a){var n="eraser";if(a(n)){var i=this,r=i.config.lang,o=new e.Menu({editor:i,id:n,title:r.eraser,commandName:"RemoveFormat"});o.clickEvent=function(e){var a;i.isRangeEmpty()?i.customCommand(e,function(){var e,n,i,r,o,s,l;e=this.getRangeElem(),(r=this.getSelfOrParentByName(e,"blockquote"))&&(o=t(r),a=t("<p>"+o.text()+"</p>"),o.after(a).remove()),(n=this.getSelfOrParentByName(e,"p,h1,h2,h3,h4,h5"))&&(i=t(n),a=t("<p>"+i.text()+"</p>"),i.after(a).remove()),(s=this.getSelfOrParentByName(e,"ul,ol"))&&(l=t(s),a=t("<p>"+l.text()+"</p>"),l.after(a).remove())},function(){a&&this.restoreSelectionByElem(a.get(0))}):i.command(e,"RemoveFormat")},i.menus[n]=o}})}),se(function(e,t){e.createMenu(function(a){var n="source";if(a(n)){var i,r=this,o=r.config.lang,s=new e.Menu({editor:r,id:n,title:o.source});s.isShowCode=!1,s.clickEvent=function(e){var a=this.editor,n=a.txt.$txt,r=n.outerHeight(),o=n.height();this.$codeTextarea||(this.$codeTextarea=t('<textarea class="code-textarea"></textarea>'));var l=this.$codeTextarea;l.css({height:o,"margin-top":r-o}),l.val(n.html()),n.after(l).hide(),l.show(),s.isShowCode=!0,this.updateSelected(),a.disableMenusExcept("source"),i=n.html()},s.clickEventSelected=function(e){var t,a,n,o=this.editor,l=o.txt.$txt,c=this.$codeTextarea;c&&(t=s.$codeTextarea,a=r.txt.$txt,n=t.val(),r.config.jsFilter&&(n=n.replace(/<script[\s\S]*?<\/script>/gi,"")),a.html(n),c.after(l).hide(),l.show(),s.isShowCode=!1,this.updateSelected(),o.enableMenusExcept("source"),l.html()!==i&&o.onchange&&"function"==typeof o.onchange&&o.onchange.call(o))},s.updateSelectedEvent=function(){return this.isShowCode},r.menus[n]=s}})}),se(function(e,t){e.createMenu(function(a){var n="quote";if(a(n)){var i=this,r=i.config.lang,o=new e.Menu({editor:i,id:n,title:r.quote,commandName:"formatBlock",commandValue:"blockquote"});o.clickEvent=function(e){var a,n,r=i.getRangeElem();r?i.getSelfOrParentByName(r,"blockquote")?e.preventDefault():(r=i.getLegalTags(r),(a=t(r)).text()&&(r?i.customCommand(e,function(){n=t("<p>"+a.text()+"</p>"),a.after(n).remove(),n.wrap("<blockquote>")},function(){n&&this.restoreSelectionByElem(n.get(0))}):i.command(e,"formatBlock","blockquote"))):e.preventDefault()},o.clickEventSelected=function(e){var a,n,r;a=i.getRangeElem(),(n=i.getSelfOrParentByName(a,"blockquote"))?i.customCommand(e,function(){var e,a;if((a=(e=t(n)).children()).length)return a.each(function(a){var n=t(this);"P"===n.get(0).nodeName?e.after(n):e.after("<p>"+n.text()+"</p>"),r=n}),void e.remove()},function(){r&&this.restoreSelectionByElem(r.get(0))}):e.preventDefault()},o.updateSelectedEvent=function(){var e,t=this.editor;return e=t.getRangeElem(),!!(e=t.getSelfOrParentByName(e,"blockquote"))},i.menus[n]=o,i.ready(function(){var e=this,a=!1;e.txt.$txt.on("keydown",function(n){if(13===n.keyCode){var i=e.getRangeElem();if(i=e.getSelfOrParentByName(i,"blockquote"))if(a){var r=e.getRangeElem(),o=t(r);o.length&&o.parent().after(o),e.restoreSelectionByElem(r,"start"),a=!1,n.preventDefault()}else a=!0;else a=!1}else a=!1})}),i.ready(function(){var e,a=this;function n(){e&&e.remove()}function i(){if(e){var t=e.prev();t.length?a.restoreSelectionByElem(t.get(0)):a.initSelection()}}a.txt.$txt.on("keydown",function(r){if(8===r.keyCode){var o=a.getRangeElem();if(o=a.getSelfOrParentByName(o,"blockquote"))(e=t(o)).text()||a.customCommand(r,n,i)}})})}})}),se(function(e,t){e.createMenu(function(a){var n="fontfamily";if(a(n)){var i=this,r=i.config.lang,o=i.config.familys,s=new e.Menu({editor:i,id:n,title:r.fontfamily,commandName:"fontName"}),l={};t.each(o,function(e,t){l[t]=t});s.dropList=new e.DropList(i,s,{data:l,tpl:'<span style="font-family:{#commandValue};">{#title}</span>',selectorForELemCommand:"font[face]"}),s.updateSelectedEvent=function(){var e=i.getRangeElem();return!!(e=i.getSelfOrParentByName(e,"font[face]"))},i.menus[n]=s}})}),se(function(e,t){e.createMenu(function(t){var a="fontsize";if(t(a)){var n=this,i=n.config.lang,r=n.config.fontsizes,o=new e.Menu({editor:n,id:a,title:i.fontsize,commandName:"fontSize"}),s=r;o.dropList=new e.DropList(n,o,{data:s,tpl:'<span style="font-size:{#title};">{#title}</span>',selectorForELemCommand:"font[size]"}),o.updateSelectedEvent=function(){var e=n.getRangeElem();return!!(e=n.getSelfOrParentByName(e,"font[size]"))},n.menus[a]=o}})}),se(function(e,t){e.createMenu(function(t){var a="head";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.head,commandName:"formatBlock"});r.dropList=new e.DropList(n,r,{data:{"<h1>":"标题1","<h2>":"标题2","<h3>":"标题3","<h4>":"标题4","<h5>":"标题5"},tpl:"{#commandValue}{#title}"}),r.updateSelectedEvent=function(){var e=n.getRangeElem();return!!(e=n.getSelfOrParentByName(e,"h1,h2,h3,h4,h5"))},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(t){var a="unorderlist";if(t(a)){var n=this.config.lang,i=new e.Menu({editor:this,id:a,title:n.unorderlist,commandName:"InsertUnorderedList"});this.menus[a]=i}})}),se(function(e,t){e.createMenu(function(t){var a="orderlist";if(t(a)){var n=this.config.lang,i=new e.Menu({editor:this,id:a,title:n.orderlist,commandName:"InsertOrderedList"});this.menus[a]=i}})}),se(function(e,t){e.createMenu(function(t){var a="alignleft";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.alignleft,commandName:"JustifyLeft"});r.updateSelectedEvent=function(){var e=n.getRangeElem();return!!(e=n.getSelfOrParentByName(e,"p,h1,h2,h3,h4,h5,li",function(e){var t;return!!(e&&e.style&&null!=e.style.cssText&&(t=e.style.cssText)&&/text-align:\s*left;/.test(t))}))},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(t){var a="aligncenter";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.aligncenter,commandName:"JustifyCenter"});r.updateSelectedEvent=function(){var e=n.getRangeElem();return!!(e=n.getSelfOrParentByName(e,"p,h1,h2,h3,h4,h5,li",function(e){var t;return!!(e&&e.style&&null!=e.style.cssText&&(t=e.style.cssText)&&/text-align:\s*center;/.test(t))}))},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(t){var a="alignright";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.alignright,commandName:"JustifyRight"});r.updateSelectedEvent=function(){var e=n.getRangeElem();return!!(e=n.getSelfOrParentByName(e,"p,h1,h2,h3,h4,h5,li",function(e){var t;return!!(e&&e.style&&null!=e.style.cssText&&(t=e.style.cssText)&&/text-align:\s*right;/.test(t))}))},n.menus[a]=r}})}),se(function(e,t){e.createMenu(function(a){var n="link";if(a(n)){var i=this,r=i.config.lang,o=new e.Menu({editor:i,id:n,title:r.link}),s=t("<div></div>"),l=t('<div style="margin:20px 10px;" class="clearfix"></div>'),c=l.clone(),u=l.clone().css("margin","0 10px"),d=t('<input type="text" class="block" placeholder="'+r.text+'"/>'),m=t('<input type="text" class="block" placeholder="'+r.link+'"/>'),p=t('<button class="right">'+r.submit+"</button>"),f=t('<button class="right gray">'+r.cancel+"</button>");l.append(d),c.append(m),u.append(p).append(f),s.append(l).append(c).append(u),o.dropPanel=new e.DropPanel(i,o,{$content:s,width:300}),o.clickEvent=function(e){var t=this.dropPanel;if(t.isShowing)t.hide();else{d.val(""),m.val("");var a="",n=i.getRangeElem();(n=i.getSelfOrParentByName(n,"a"))&&(a=n.href||"");var r="",o=i.isRangeEmpty();o?n&&(r=n.textContent||n.innerHTML):r=i.getRangeText()||"",a&&m.val(a),r&&d.val(r),o?d.removeAttr("disabled"):d.attr("disabled",!0),t.show()}},o.updateSelectedEvent=function(){var e=i.getRangeElem();return!!(e=i.getSelfOrParentByName(e,"a"))},f.click(function(e){e.preventDefault(),o.dropPanel.hide()}),p.click(function(a){a.preventDefault();var n,r,s,l,c,u=i.getRangeElem(),p=i.getSelfOrParentByName(u,"a"),f=i.isRangeEmpty(),v=i.txt.$txt,h="link"+e.random(),g=t.trim(m.val()),_=t.trim(d.val());g?(_||(_=g),f?p?(n=t(p),s=function(){n.attr("href",g),n.text(_)},l=function(){this.restoreSelectionByElem(p)},i.customCommand(a,s,l)):(r='<a href="'+g+'" target="_blank">'+_+"</a>",e.userAgent.indexOf("Firefox")>0&&(r+="<span>&nbsp;</span>"),i.command(a,"insertHtml",r)):((c=v.find("a")).attr(h,"1"),i.command(a,"createLink",g),v.find("a").not("["+h+"]").attr("target","_blank"),c.removeAttr(h))):o.dropPanel.focusFirstInput()}),i.menus[n]=o}})}),se(function(e,t){e.createMenu(function(a){var n="unlink";if(a(n)){var i=this,r=i.config.lang,o=new e.Menu({editor:i,id:n,title:r.unlink,commandName:"unLink"});o.clickEvent=function(e){if(i.isRangeEmpty()){var a=i.getRangeElem(),n=i.getSelfOrParentByName(a,"a");if(n){var r=t(n),o=t("<span>"+r.text()+"</span>");i.customCommand(e,function(){r.after(o).remove()},function(){i.restoreSelectionByElem(o.get(0))})}else e.preventDefault()}else i.command(e,"unLink")},i.menus[n]=o}})}),se(function(e,t){e.createMenu(function(a){var n="table";if(a(n)){var i,r,o,s=this,l=s.config.lang,c=new e.Menu({editor:s,id:n,title:l.table}),u=t('<div style="font-size: 14px; color: #666; text-align:right;"></div>'),d=t('<table class="choose-table" style="margin-bottom:10px;margin-top:5px;">'),m=t("<span>0</span>"),p=t("<span> 行 </span>"),f=t("<span>0</span>"),v=t("<span> 列</span>");for(r=0;r<10;r++){for(i=t('<tr index="'+(r+1)+'">'),o=0;o<10;o++)i.append(t('<td index="'+(o+1)+'">'));d.append(i)}u.append(d),u.append(m).append(p).append(f).append(v),d.on("mouseenter","td",function(e){var a=t(e.currentTarget),n=a.attr("index"),i=a.parent().attr("index");m.text(i),f.text(n),d.find("tr").each(function(){var e=t(this),a=e.attr("index");parseInt(a,10)<=parseInt(i,10)?e.find("td").each(function(){var e=t(this),a=e.attr("index");parseInt(a,10)<=parseInt(n,10)?e.addClass("active"):e.removeClass("active")}):e.find("td").removeClass("active")})}).on("mouseleave",function(e){d.find("td").removeClass("active")}),d.on("click","td",function(e){var a,n,i=t(e.currentTarget),r=i.attr("index"),o=i.parent().attr("index"),l=parseInt(o,10),c=parseInt(r,10),u="\n<table>";for(a=0;a<l;a++){for(u+="\n  <tr>",n=0;n<c;n++)u+="\n    <td><span>&nbsp;</span></td>";u+="\n  </tr>"}u+="\n</table>\n",s.command(e,"insertHtml",u)}),c.dropPanel=new e.DropPanel(s,c,{$content:u,width:181}),s.menus[n]=c}})}),se(function(e,t){e.createMenu(function(a){var n="emotion";if(a(n)){var i=this,r=i.config.lang,o=i.config.emotions,s=new e.Menu({editor:i,id:n,title:r.emotion}),l=t('<div class="panel-tab"></div>'),c=t('<div class="tab-container"></div>'),u=t('<div class="content-container"></div>');t.each(o,function(e,a){var n=a.title,i=a.size,r=a.imgs,o=t('<a href="#">'+n+" </a>");c.append(o);var s=t('<div class="content"></div>');u.append(s),t.each(r,function(e,a){var n=t('<a href="#" commandValue="'+a+'"></a>'),r=t("<img>");r.css({width:i+"px",height:i+"px"}),r.attr("_src",a),n.append(r),s.append(n)}),o.click(function(e){c.children().removeClass("selected"),u.children().removeClass("selected"),s.addClass("selected"),o.addClass("selected"),e.preventDefault()})}),l.append(c).append(u),c.children().first().addClass("selected"),u.children().first().addClass("selected"),u.on("click","a[commandValue]",function(e){var a=t(e.currentTarget).attr("commandValue");i.command(e,"InsertImage",a)}),s.dropPanel=new e.DropPanel(i,s,{$content:l,width:350}),s.clickEvent=function(a){var n=this.dropPanel;n.isShowing?n.hide():(n.show(),this.imgLoaded||(u.find("img").each(function(){var a=t(this),n=a.attr("_src");a.on("error",function(){e.error("加载不出表情图片 "+n)}),a.attr("src",n),a.removeAttr("_src")}),this.imgLoaded=!0))},i.menus[n]=s}})}),se(function(e,t){e.createMenu(function(a){if(a("img")){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:"img",title:i.img}),o=t('<div class="panel-tab"></div>'),s=t('<div class="tab-container"></div>'),l=t('<div class="content-container"></div>');o.append(s).append(l);var c=t('<a href="#">上传图片</a>'),u=t('<a href="#">网络图片</a>');s.append(c).append(u);var d=t('<div class="content"></div>');l.append(d);var m=t('<div class="content"></div>');l.append(m),function(e,a,n){var i=e.config.lang,r=t('<div style="margin:20px 10px 10px 10px;"></div>'),o=t('<input type="text" class="block" placeholder="http://"/>');r.append(o);var s=t('<button class="right">'+i.submit+"</button>"),l=t('<button class="right gray">'+i.cancel+"</button>");function c(){o.val("")}n.append(r).append(s).append(l),l.click(function(e){e.preventDefault(),a.dropPanel.hide()}),s.click(function(a){a.preventDefault();var n=t.trim(o.val());if(n){var i='<img style="max-width:100%;" src="'+n+'"/>';e.command(a,"insertHtml",i,c)}else o.focus()})}(n,r,m),r.dropPanel=new e.DropPanel(n,r,{$content:o,width:400,onRender:function(){var e=n.config.customUploadInit;e&&e.call(n)}}),n.menus.img=r,n.ready(function(){var t=this.config,a=t.uploadImgUrl,n=t.customUpload;function i(){r.dropPanel.hide()}a||n?(this.$uploadContent=d,c.click(function(e){s.children().removeClass("selected"),l.children().removeClass("selected"),d.addClass("selected"),c.addClass("selected"),e.preventDefault()}),u.click(function(t){s.children().removeClass("selected"),l.children().removeClass("selected"),m.addClass("selected"),u.addClass("selected"),t.preventDefault(),e.placeholder&&m.find("input[type=text]").focus()}),c.click()):(s.remove(),d.remove(),m.addClass("selected")),d.click(function(){setTimeout(i)})})}})}),se(function(e,t){e.createMenu(function(a){var n="video";if(a(n)){var i=this,r=i.config.lang,o=/^\s*(http:\/\/|https:\/\/).+(\.swf|\.ogg|\.mp4|\.webm)/i,s=new e.Menu({editor:i,id:n,title:r.video,commandName:"unLink"}),l=['<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ','        codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" ','        width="#{width}" ','        height="#{height}" >','   <param name="movie" ','          value="#{videoUrl}" />','   <param name="allowFullScreen" value="true" />','   <param name="allowScriptAccess" value="always" />','   <param value="transparent" name="wmode" />','   <embed src="#{videoUrl}"','          width="#{width}" ','          height="#{height}" ','          name="cc_8E6888CDEA7087C49C33DC5901307461" ','          allowFullScreen="true" ','          wmode="transparent" ','          allowScriptAccess="always" ','          pluginspage="http://www.macromedia.com/go/getflashplayer" ','          type="application/x-shockwave-flash"/>',"</object>","<p><br></p>"].join(""),c=['<video src="#{videoUrl}" controls="controls" width="#{width}" height="#{height}">',"</video>","<p><br></p>"].join(""),u=t("<div></div>"),d=t('<div style="margin:20px 10px;"></div>'),m=t('<input type="text" class="block" placeholder="*.swf, *.mp4, *.ogg, *.webm"/>');d.append(m);var p=t('<div style="margin:20px 10px;"></div>'),f=t('<input type="text" value="480" style="width:50px;text-align:center;"/>'),v=t('<input type="text" value="360" style="width:50px;text-align:center;"/>');p.append("<span> "+r.width+" </span>").append(f).append("<span> px &nbsp;&nbsp;&nbsp;</span>").append("<span> "+r.height+" </span>").append(v).append("<span> px </span>");var h=t("<div></div>"),g=t('<button class="right">'+r.submit+"</button>"),_=t('<button class="right gray">'+r.cancel+"</button>");h.append(g).append(_),u.append(d).append(p).append(h),_.click(function(e){e.preventDefault(),m.val(""),s.dropPanel.hide()}),g.click(function(e){e.preventDefault();var a,n=t.trim(m.val()),r=parseInt(f.val()),u=parseInt(v.val());if(n)return o.test(n)?void(isNaN(r)||isNaN(u)?alert("宽度或高度不是数字！"):(a=/.swf/i.test(n)?l.replace(/#{videoUrl}/gi,n).replace(/#{width}/gi,r).replace(/#{height}/gi,u):c.replace(/#{videoUrl}/gi,n).replace(/#{width}/gi,r).replace(/#{height}/gi,u),i.command(e,"insertHtml",a),m.val(""))):(alert("视频链接格式错误！"),void s.dropPanel.focusFirstInput());s.dropPanel.focusFirstInput()}),s.dropPanel=new e.DropPanel(i,s,{$content:u,width:400}),i.menus[n]=s}})}),se(function(e,t){var a="onkeyup"in document.createElement("input");e.baiduMapAk="TVhjYjq1ICT2qqL5LdS8mwas";var n=1;e.createMenu(function(i){var r="location";if(i(r))if(n++>1)e.error("目前不支持在一个页面多个编辑器上同时使用地图，可通过自定义菜单配置去掉地图菜单");else{var o=this,s=o.config,l=s.lang,c=s.mapAk;o.mapData={};var u=o.mapData;u.markers=[],u.mapContainerId="map"+e.random(),u.clearLocations=function(){var e=u.map;e&&(e.clearOverlays(),u.markers=[])},u.searchMap=function(){var e=u.map;if(e){var t,a=window.BMap,n=v.val(),i=h.val();""!==n&&(i&&""!==i||e.centerAndZoom(n,11),i&&""!==i&&(new a.Geocoder).getPoint(i,function(i){i?(e.centerAndZoom(i,13),t=new a.Marker(i),e.addOverlay(t),t.enableDragging(),u.markers.push(t)):e.centerAndZoom(n,11)},n))}};var d=!1;window.baiduMapCallBack=function(){if(!d){d=!0;var t=window.BMap;u.map||(u.map=new t.Map(u.mapContainerId));var n=u.map;n.centerAndZoom(new t.Point(116.404,39.915),11),n.addControl(new t.MapTypeControl),n.setCurrentCity("北京"),n.enableScrollWheelZoom(!0),(new t.LocalCity).get(function(t){var i,r,o=t.name;n.setCenter(o),v.val(o),e.placeholder&&h.focus(),a?(r=function(e){"keyup"===e.type&&13===e.keyCode&&e.preventDefault(),i&&clearTimeout(i),i=setTimeout(u.searchMap,500)},v.on("keyup change paste",r),h.on("keyup change paste",r)):(r=function(){if(p.is(":visible")){var e="",t="",a=v.val(),n=h.val();a===e&&n===t||(u.searchMap(),e=a,t=n),i&&clearTimeout(i),i=setTimeout(r,1e3)}else clearTimeout(i)},i=setTimeout(r,1e3))}),n.addEventListener("click",function(e){var a=new t.Marker(new t.Point(e.point.lng,e.point.lat));n.addOverlay(a),a.enableDragging(),u.markers.push(a)},!1)}},u.loadMapScript=function(){var t=document.createElement("script");t.type="text/javascript",t.src="http://api.map.baidu.com/api?v=2.0&ak="+c+"&callback=baiduMapCallBack";try{document.body.appendChild(t)}catch(t){e.error("加载地图过程中发生错误")}},u.initMap=function(){window.BMap?window.baiduMapCallBack():u.loadMapScript()};var m=new e.Menu({editor:o,id:r,title:l.location});o.menus[r]=m;var p=t("<div></div>"),f=t('<div style="margin:10px 0;"></div>'),v=t('<input type="text"/>');v.css({width:"80px","text-align":"center"});var h=t('<input type="text"/>');h.css({width:"300px","margin-left":"10px"}).attr("placeholder",l.searchlocation);var g=t('<button class="right link">'+l.clearLocation+"</button>");f.append(g).append(v).append(h),p.append(f),g.click(function(e){h.val(""),h.focus(),u.clearLocations(),e.preventDefault()});var _=t('<div id="'+u.mapContainerId+'"></div>');_.css({height:"260px",width:"100%",position:"relative","margin-top":"10px",border:"1px solid #f1f1f1"});var b=t("<span>"+l.loading+"</span>");b.css({position:"absolute",width:"100px","text-align":"center",top:"45%",left:"50%","margin-left":"-50px"}),_.append(b),p.append(_);var y=t('<div style="margin:10px 0;"></div>'),C=t('<button class="right">'+l.submit+"</button>"),w=t('<button class="right gray">'+l.cancel+"</button>"),x=t('<label style="display:inline-block;margin-top:10px;color:#666;"></label>'),T=t('<input type="checkbox">');x.append(T).append('<span style="display:inline-block;margin-left:5px;">  '+l.dynamicMap+"</span>"),y.append(x).append(C).append(w),p.append(y),w.click(function(e){e.preventDefault(),S(),m.dropPanel.hide()}),C.click(function(e){e.preventDefault();var a,n,i,r=u.map,s=T.is(":checked"),c=u.markers,d=r.getCenter(),m=d.lng,p=d.lat,f=r.getZoom(),v=r.getSize(),h=v.width,g=v.height;if(n=(n=s?"http://ueditor.baidu.com/ueditor/dialogs/map/show.html#":"http://api.map.baidu.com/staticimage?")+"center="+m+","+p+"&zoom="+f+"&width="+h+"&height="+g,c.length>0&&(n+="&markers=",t.each(c,function(e,t){a=t.getPosition(),e>0&&(n+="|"),n=n+a.lng+","+a.lat})),s){if(c.length>1)return void alert(l.langDynamicOneLocation);i=(i='<iframe class="ueditor_baidumap" src="{src}" frameborder="0" width="'+h+'" height="'+g+'"></iframe>').replace("{src}",n+="&markerStyles=l,A"),o.command(e,"insertHtml",i,S)}else o.command(e,"insertHtml",'<img style="max-width:100%;" src="'+n+'"/>',S)}),m.dropPanel=new e.DropPanel(o,m,{$content:p,width:500}),m.onRender=function(){c===e.baiduMapAk&&e.warn("建议在配置中自定义百度地图的mapAk，否则可能影响地图功能，文档："+e.docsite)},m.clickEvent=function(e){var t=this.dropPanel,a=!1;t.isShowing?t.hide():(u.map||(a=!0),u.initMap(),t.show(),a||h.focus())}}function S(){h.val("")}})}),se(function(e,t){function a(){if(!(e.userAgent.indexOf("MSIE 8")>0)){var t=document.createElement("script");t.type="text/javascript",t.src="http://apps.bdimg.com/libs/highlight.js/9.1.0/highlight.min.js",document.body.appendChild(t)}}e.createMenu(function(n){var i="insertcode";if(n(i)){setTimeout(a,0);var r=this,o=r.config.lang,s=r.txt.$txt,l=new e.Menu({editor:r,id:i,title:o.insertcode});l.clickEvent=function(e){var a=this.dropPanel;if(a.isShowing)a.hide();else{u.val(""),a.show();var n=window.hljs;n&&n.listLanguages?(d.css({"margin-top":"9px","margin-left":"5px"}),t.each(n.listLanguages(),function(e,t){d.append('<option value="'+t+'">'+t+"</option>")})):d.hide()}},l.clickEventSelected=function(e){var a=this.dropPanel;if(a.isShowing)a.hide();else{a.show();var n,i,o=r.getRangeElem(),s=r.getSelfOrParentByName(o,"pre");s&&(s=r.getSelfOrParentByName(o,"code")),s&&(n=t(s),u.val(n.text()),d&&(i=n.attr("class"))&&d.val(i.split(" ")[0]))}},l.updateSelectedEvent=function(){var e,t=this.editor;return e=t.getRangeElem(),!!(e=t.getSelfOrParentByName(e,"pre"))};var c=t("<div></div>"),u=t("<textarea></textarea>"),d=t("<select></select>");!function(e){var a=t("<div></div>");a.css({margin:"15px 5px 5px 5px",height:"160px","text-align":"center"}),u.css({width:"100%",height:"100%",padding:"10px"}),u.on("keydown",function(e){9===e.keyCode&&e.preventDefault()}),a.append(u),e.append(a);var n=t("<div></div>"),i=t('<button class="right">'+o.submit+"</button>"),s=t('<button class="right gray">'+o.cancel+"</button>");n.append(i).append(s).append(d),e.append(n),s.click(function(e){e.preventDefault(),l.dropPanel.hide()});var c='<pre style="max-width:100%;overflow-x:auto;"><code{#langClass}>{#content}</code></pre>';i.click(function(e){e.preventDefault();var a=u.val();if(a){var n=r.getRangeElem();t.trim(t(n).text())&&(c="<p><br></p>"+c);var i=d?d.val():"",o="",s=function(){t("pre code").each(function(e,t){window.hljs&&window.hljs.highlightBlock(t)})};if(i&&(o=' class="'+i+' hljs"'),a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;"),l.selected){var m,p=r.getSelfOrParentByName(n,"pre");p&&(p=r.getSelfOrParentByName(n,"code")),p&&(m=t(p),r.customCommand(e,function(){i&&m.attr("class")!==i+" hljs"&&m.attr("class",i+" hljs");m.html(a)},function(){r.restoreSelectionByElem(p),s()}))}else{var f=c.replace("{#langClass}",o).replace("{#content}",a);r.command(e,"insertHtml",f,s)}}else u.focus()})}(c),l.dropPanel=new e.DropPanel(r,l,{$content:c,width:500}),r.menus[i]=l,s.on("keydown",function(e){if(13===e.keyCode){var t=r.getRangeElem();r.getSelfOrParentByName(t,"code")&&r.command(e,"insertHtml","\n")}}),s.on("keydown click",function(e){setTimeout(m)})}function m(){var e=r.getRangeElem();r.getSelfOrParentByName(e,"code")?r.disableMenusExcept("insertcode"):r.enableMenusExcept("insertcode")}})}),se(function(e,t){e.createMenu(function(t){var a="undo";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.undo});r.clickEvent=function(e){n.undo()},n.menus[a]=r,n.ready(function(){var e,t=this;function a(){t.undoRecord()}t.txt.$txt.on("keyup",function(n){var i=n.keyCode;n.ctrlKey&&90===i?t.undo():13===i?a():(e&&clearTimeout(e),e=setTimeout(a,1e3))}),t.undoRecord()})}})}),se(function(e,t){e.createMenu(function(t){var a="redo";if(t(a)){var n=this,i=n.config.lang,r=new e.Menu({editor:n,id:a,title:i.redo});r.clickEvent=function(e){n.redo()},n.menus[a]=r}})}),se(function(e,t){var a;e.createMenu(function(t){var n="fullscreen";if(t(n)){var i,r,o=this,s=o.txt.$txt,l=o.config,c=l.zindex||1e4,u=l.lang,d=!1,m=new e.Menu({editor:o,id:n,title:u.fullscreen});m.clickEvent=function(t){var n,l=o.$editorContainer;l.addClass("wangEditor-fullscreen"),i=l.css("z-index"),l.css("z-index",c);var u=s.height(),m=s.outerHeight();o.useMaxHeight&&(r=s.css("max-height"),s.css("max-height","none"),(n=s.parent()).after(s),n.remove(),s.css("overflow-y","auto"));var p=o.menuContainer;s.height(e.$window.height()-p.height()-(m-u)),o.menuContainer.$menuContainer.attr("style",""),d=!0,o.isFullScreen=!0,a=e.$window.scrollTop()},m.clickEventSelected=function(t){var n=o.$editorContainer;n.removeClass("wangEditor-fullscreen"),n.css("z-index",i),o.useMaxHeight?s.css("max-height",r):o.$valueContainer.css("height",o.valueContainerHeight),o.txt.initHeight(),d=!1,o.isFullScreen=!1,null!=a&&e.$window.scrollTop(a)},m.updateSelectedEvent=function(e){return d},o.menus[n]=m}})}),se(function(e,t){e.fn.renderMenus=function(){var e,a=this.menus,n=this.config.menus,i=(this.menuContainer,0);t.each(n,function(t,n){"|"!==n?(e=a[n])&&e.render(i):i++})}}),se(function(e,t){e.fn.renderMenuContainer=function(){var e=this.menuContainer;this.$editorContainer;e.render()}}),se(function(e,t){e.fn.renderTxt=function(){var e=this.txt;e.render(),this.ready(function(){e.initHeight()})}}),se(function(e,t){e.fn.renderEditorContainer=function(){var e,t,a=this,n=a.$valueContainer,i=a.$editorContainer;n===a.txt.$txt?(e=a.$prev,t=a.$parent,e&&e.length?e.after(i):t.prepend(i)):(n.after(i),n.hide())}}),se(function(e,t){e.fn.eventMenus=function(){var e=this.menus;t.each(e,function(e,t){t.bindEvent()})}}),se(function(e,t){e.fn.eventMenuContainer=function(){}}),se(function(e,t){e.fn.eventTxt=function(){var e=this.txt;e.saveSelectionEvent(),e.updateValueEvent(),e.updateMenuStyleEvent()}}),se(function(e,t){e.plugin(function(){var t=this.config.uploadImgFns;t.onload||(t.onload=function(t,a){e.log("上传结束，返回结果为 "+t);var n,i=this;0===t.indexOf("error|")?(e.warn("上传失败："+t.split("|")[1]),alert(t.split("|")[1])):(e.log("上传成功，即将插入编辑区域，结果为："+t),(n=document.createElement("img")).onload=function(){var a='<img src="'+t+'" style="max-width:100%;"/>';i.command(null,"insertHtml",a),e.log("已插入图片，地址 "+t),n=null},n.onerror=function(){e.error("使用返回的结果获取图片，发生错误。请确认以下结果是否正确："+t),n=null},n.src=t)}),t.ontimeout||(t.ontimeout=function(t){e.error("上传上图片发生错误"),alert("上传上图片发生错误")}),t.onerror||(t.onerror=function(t){e.error("上传图片超时"),alert("上传图片超时")})})}),se(function(e,t){window.FileReader&&window.FormData&&e.plugin(function(){var t=this,a=t.config,n=a.uploadImgUrl,i=a.uploadTimeout,r=a.uploadImgFns,o=r.onload,s=r.ontimeout,l=r.onerror;function c(e){if(e.lengthComputable){var a=e.loaded/e.total;t.showUploadProgress(100*a)}}n&&(t.xhrUploadImg=function(a){var r,u,d,m=a.event,p=a.base64,f=a.fileType||"image/png",v=a.name||"wangEditor_upload_file",h=a.loadfn||o,g=a.errorfn||l,_=a.timeoutfn||s,b="png";if(f.indexOf("/")>0&&f.split("/")[1]&&(b=f.split("/")[1]),e.isOnWebsite)return e.log("预览模拟上传"),r=p,u=m,(d=document.createElement("img")).onload=function(){var a='<img src="'+r+'" style="max-width:100%;"/>';t.command(u,"insertHtml",a),e.log("已插入图片，地址 "+r),d=null},d.onerror=function(){e.error("使用返回的结果获取图片，发生错误。请确认以下结果是否正确："+r),d=null},void(d.src=r);var y,C=new XMLHttpRequest,w=new FormData;C.onload=function(){y&&clearTimeout(y),h&&h.call(t,C.responseText,C),t.hideUploadProgress()},C.onerror=function(){y&&clearTimeout(y),m.preventDefault(),g&&g.call(t,C),t.hideUploadProgress()},C.upload.onprogress=c,w.append(v,function(e,t){var a,n=window.atob(e.split(",")[1]),i=new ArrayBuffer(n.length),r=new Uint8Array(i);for(a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return new Blob([i],{type:t})}(p,f),e.random()+"."+b),C.open("POST",n,!0),C.send(w),y=setTimeout(function(){y&&clearTimeout(y),C&&C.abort&&C.abort(),m.preventDefault(),_&&_.call(t,C),t.hideUploadProgress()},i),e.log("开始上传...并开始超时计算")})})}),se(function(e,t){e.plugin(function(){var e,a=this.menuContainer.height(),n=this.$editorContainer,i=n.width(),r=t('<div class="wangEditor-upload-progress"></div>'),o=!1;function s(){r.hide(),e=null}this.showUploadProgress=function(t){e&&clearTimeout(e),o||(o=!0,r.css({top:a+"px"}),n.append(r)),r.show(),r.width(t*i/100)},this.hideUploadProgress=function(t){e&&clearTimeout(e),t=t||750,e=setTimeout(s,t)}})}),se(function(e,t){e.plugin(function(){var a=this.config,n=a.uploadImgUrl,i=a.uploadTimeout;if(n){var r=this.$uploadContent;if(r){var o=t('<div class="upload-icon-container"><i class="wangeditor-menu-img-upload"></i></div>');r.append(o);var s=new e.UploadFile({editor:this,uploadUrl:n,timeout:i,fileAccept:"image/*"});o.click(function(e){e,s.selectFiles()})}}})}),se(function(e,t){if(window.FileReader&&window.FormData){var a=function(e){this.editor=e.editor,this.uploadUrl=e.uploadUrl,this.timeout=e.timeout,this.fileAccept=e.fileAccept,this.multiple=!0};(a.fn=a.prototype).clear=function(){this.$input.val(""),e.log("input value 已清空")},a.fn.render=function(){var a=this;if(!a._hasRender){e.log("渲染dom");var n=a.fileAccept,i=n?'accept="'+n+'"':"",r=a.multiple,o=t('<input type="file" '+i+" "+(r?'multiple="multiple"':"")+"/>"),s=t('<div style="visibility:hidden;"></div>');s.append(o),e.$body.append(s),o.on("change",function(e){a.selected(e,o.get(0))}),a.$input=o,a._hasRender=!0}},a.fn.selectFiles=function(){e.log("使用 html5 方式上传"),this.render(),e.log("选择文件"),this.$input.click()},a.fn.selected=function(a,n){var i=this,r=n.files||[];0!==r.length&&(e.log("选中 "+r.length+" 个文件"),t.each(r,function(e,t){i.upload(t)}))},a.fn.upload=function(t){var a=this,n=a.editor,i=t.name||"",r=t.type||"",o=n.config.uploadImgFns,s=o.onload,l=o.ontimeout,c=o.onerror,u=new FileReader;function d(){a.clear()}s&&l&&c?(e.log("开始执行 "+i+" 文件的上传"),u.onload=function(t){e.log("已读取"+i+"文件");var a=t.target.result||this.result;n.xhrUploadImg({event:t,base64:a,fileType:r,name:"wangEditorH5File",loadfn:function(e,t){d();s.call(this,e,t)},errorfn:function(t){d(),e.isOnWebsite&&alert("wangEditor官网暂时没有服务端，因此报错。实际项目中不会发生");c.call(this,t)},timeoutfn:function(t){d(),e.isOnWebsite&&alert("wangEditor官网暂时没有服务端，因此超时。实际项目中不会发生");l(this,t)}})},u.readAsDataURL(t)):e.error("请为编辑器配置上传图片的 onload ontimeout onerror 回调事件")},e.UploadFile=a}}),se(function(e,t){if(!window.FileReader||!window.FormData){var a=function(e){this.editor=e.editor,this.uploadUrl=e.uploadUrl,this.timeout=e.timeout,this.fileAccept=e.fileAccept,this.multiple=!1};(a.fn=a.prototype).clear=function(){this.$input.val(""),e.log("input value 已清空")},a.fn.hideModal=function(){this.modal.hide()},a.fn.render=function(){var a=this,n=a.editor;if(!a._hasRender){var i=a.uploadUrl;e.log("渲染dom");var r="iframe"+e.random(),o=t('<iframe name="'+r+'" id="'+r+'" frameborder="0" width="0" height="0"></iframe>'),s=a.multiple?'multiple="multiple"':"",l=t("<p>选择图片并上传</p>"),c=t('<input type="file" '+s+' name="wangEditorFormFile"/>'),u=t('<input type="submit" value="上传"/>'),d=t('<form enctype="multipart/form-data" method="post" action="'+i+'" target="'+r+'"></form>'),m=t('<div style="margin:10px 20px;"></div>');d.append(l).append(c).append(u),m.append(d),m.append(o),a.$input=c,a.$iframe=o;var p=new e.Modal(n,void 0,{$content:m});a.modal=p,a._hasRender=!0}},a.fn.bindLoadEvent=function(){var e=this;if(!e._hasBindLoad){var a=e.editor,n=e.$iframe.get(0),i=n.contentWindow,r=a.config.uploadImgFns.onload;n.attachEvent?n.attachEvent("onload",o):n.onload=o,e._hasBindLoad=!0}function o(){var a=t.trim(i.document.body.innerHTML);a&&(r(a),e.clear(),e.hideModal())}},a.fn.show=function(){var e=this,t=e.modal;setTimeout(function(){t.show(),e.bindLoadEvent()})},a.fn.selectFiles=function(){e.log("使用 form 方式上传"),this.render(),this.clear(),this.show()},e.UploadFile=a}}),se(function(e,t){e.plugin(function(){var a,n,i=this,r=i.txt.$txt;function o(){var o=/^data:(image\/\w+);base64/,s=r.find("img");e.log("粘贴后，检查到编辑器有"+s.length+"个图片。开始遍历图片，试图找到刚刚粘贴过来的图片"),t.each(s,function(){var r,s,l=this,c=t(l),u=c.attr("src");n.each(function(){if(l===this)return r=!0,!1}),r||(e.log("找到一个粘贴过来的图片"),o.test(u)?(e.log("src 是 base64 格式，可以上传"),s=u.match(o)[1],i.xhrUploadImg({event:a,base64:u,fileType:s,name:"wangEditorPasteFile"})):e.log("src 为 "+u+" ，不是 base64 格式，暂时不支持上传"),c.remove())}),e.log("遍历结束")}i.config.uploadImgUrl&&r.on("paste",function(s){var l,c=(a=s).clipboardData||a.originalEvent.clipboardData;(null==c?window.clipboardData&&window.clipboardData.getData("text"):c.getData("text/plain")||c.getData("text/html"))||((l=c&&c.items)?(e.log("通过 data.items 得到了数据"),t.each(l,function(t,n){var r=n.type||"";if(!(r.indexOf("image")<0)){var o=n.getAsFile(),s=new FileReader;e.log("得到一个粘贴图片"),s.onload=function(t){e.log("读取到粘贴的图片");var n=t.target.result||this.result;i.xhrUploadImg({event:a,base64:n,fileType:r,name:"wangEditorPasteFile"})},s.readAsDataURL(o)}})):(e.log("未从 data.items 得到数据，使用检测粘贴图片的方式"),n=r.find("img"),e.log("粘贴前，检查到编辑器有"+n.length+"个图片"),setTimeout(o,0)))})})}),se(function(e,t){e.plugin(function(){var a=this,n=a.txt.$txt;a.config.uploadImgUrl&&(e.$document.on("dragleave drop dragenter dragover",function(e){e.preventDefault()}),n.on("drop",function(n){n.preventDefault();var i=n.originalEvent,r=i.dataTransfer&&i.dataTransfer.files;r&&r.length&&t.each(r,function(t,i){var r=i.type,o=i.name;if(!(r.indexOf("image/")<0)){e.log("得到图片 "+o);var s=new FileReader;s.onload=function(t){e.log("读取到图片 "+o);var i=t.target.result||this.result;a.xhrUploadImg({event:n,base64:i,fileType:r,name:"wangEditorDragFile"})},s.readAsDataURL(i)}})}))})}),se(function(e,t){e.plugin(function(){var a,n=this,i=n.txt.$txt,r=!1,o=t('<div class="txt-toolbar"></div>'),s=t('<div class="tip-triangle"></div>'),l=t('<a href="#"><i class="wangeditor-menu-img-trash-o"></i></a>'),c=t('<a href="#"><i class="wangeditor-menu-img-search-minus"></i></a>'),u=t('<a href="#"><i class="wangeditor-menu-img-search-plus"></i></a>');function d(){r||(!function(){var e;function t(t,a){e&&n.customCommand(t,e,a)}l.click(function(n){e=function(){a.remove()},t(n,function(){setTimeout(p,100)})}),u.click(function(n){e=function(){a.css({width:"100%"})},t(n,function(){setTimeout(m)})}),c.click(function(n){e=function(){a.css({width:"auto"})},t(n,function(){setTimeout(m)})})}(),o.append(s).append(l).append(c).append(u),n.$editorContainer.append(o),r=!0)}function m(){if(!n._disabled&&null!=a){a.addClass("clicked");var e,t=a.position(),r=t.top,l=t.left,c=a.outerHeight(),u=a.outerWidth(),d=r+c,m=l,p=i.position().top,f=i.outerHeight();d>p+f&&(d=p+f),o.show(),e=u/2-o.outerWidth()/2,o.css({top:d+5,left:m,"margin-left":e}),e<0?(o.css("margin-left","0"),s.hide()):s.show()}}function p(){null!=a&&(a.removeClass("clicked"),a=null,o.hide())}i.on("click","table",function(e){var n=t(e.currentTarget);d(),a&&a.get(0)===n.get(0)?setTimeout(p,100):(a=n,m(),e.preventDefault(),e.stopPropagation())}).on("click keypress scroll",function(e){setTimeout(p,100)}),e.$body.on("click keypress scroll",function(e){setTimeout(p,100)})})}),se(function(e,t){e.userAgent.indexOf("MSIE 8")>0||e.plugin(function(){var a,n=this,i=n.txt.$txt,r=(n.$editorContainer,!1),o=t('<div class="img-drag-point"></div>'),s=t('<div class="txt-toolbar"></div>'),l=t('<div class="tip-triangle"></div>'),c=t('<a href="#"><i class="wangeditor-menu-img-trash-o"></i></a>'),u=t('<a href="#"><i class="wangeditor-menu-img-search-minus"></i></a>'),d=t('<a href="#"><i class="wangeditor-menu-img-search-plus"></i></a>'),m=t('<a href="#"><i class="wangeditor-menu-img-align-left"></i></a>'),p=t('<a href="#"><i class="wangeditor-menu-img-align-justify"></i></a>'),f=t('<a href="#"><i class="wangeditor-menu-img-align-right"></i></a>'),v=!1;function h(){r||(!function(){var e;function t(t,a){e&&n.customCommand(t,e,a)}c.click(function(n){e=function(){a.remove()},t(n,function(){setTimeout(_,100)})}),d.click(function(n){e=function(){var e=a.get(0),t=e.width,n=e.height;t*=1.1,n*=1.1,a.css({width:t+"px",height:n+"px"})},t(n,function(){setTimeout(g)})}),u.click(function(n){e=function(){var e=a.get(0),t=e.width,n=e.height;t*=.9,n*=.9,a.css({width:t+"px",height:n+"px"})},t(n,function(){setTimeout(g)})}),m.click(function(n){e=function(){a.css({float:"left"})},t(n,function(){setTimeout(_,100)})}),f.click(function(n){e=function(){a.css({float:"right"})},t(n,function(){setTimeout(_,100)})}),p.click(function(n){e=function(){a.css({float:"none"})},t(n,function(){setTimeout(_,100)})})}(),function(){var t,n,i,r,l,c;function u(e){var s,u;s=e.pageX-t,u=e.pageY-n;var d=i+s,m=r+u;o.css({"margin-left":d,"margin-top":m});var p=l+s,f=c+u;a&&a.css({width:p,height:f})}o.on("mousedown",function(d){a&&(t=d.pageX,n=d.pageY,i=parseFloat(o.css("margin-left"),10),r=parseFloat(o.css("margin-top"),10),l=a.width(),c=a.height(),s.hide(),e.$document.on("mousemove._dragResizeImg",u),e.$document.on("mouseup._dragResizeImg",function(t){e.$document.off("mousemove._dragResizeImg"),e.$document.off("mouseup._dragResizeImg"),_(),o.css({"margin-left":i,"margin-top":r}),v=!1}),v=!0)})}(),s.append(l).append(c).append(u).append(d).append(m).append(p).append(f),n.$editorContainer.append(s).append(o),r=!0)}function g(){if(!n._disabled&&null!=a){a.addClass("clicked");var e=a.position(),t=e.top,r=e.left,c=a.outerHeight(),u=a.outerWidth();o.css({top:t+c,left:r+u});var d,m=t+c,p=r,f=i.position().top,v=i.outerHeight();m>f+v?m=f+v:o.show(),s.show(),d=u/2-s.outerWidth()/2,s.css({top:m+5,left:p,"margin-left":d}),d<0?(s.css("margin-left","0"),l.hide()):l.show(),n.disableMenusExcept()}}function _(){null!=a&&(a.removeClass("clicked"),a=null,s.hide(),o.hide(),n.enableMenusExcept())}var b=n.config.emotions;i.on("mousedown","img",function(e){e.preventDefault()}).on("click","img",function(e){var n,i,r=t(e.currentTarget),o=r.attr("src");o&&(n=o,i=!1,t.each(b,function(e,a){var r=!1;if(t.each(a.imgs,function(e,t){if(n===t)return i=!0,r=!0,!1}),r)return!1}),!i)&&(h(),a&&a.get(0)===r.get(0)?setTimeout(_,100):(a=r,g(),e.preventDefault(),e.stopPropagation()))}).on("click keypress scroll",function(e){v||setTimeout(_,100)})})}),se(function(e,t){e.plugin(function(){var t=this,a=t.config.menuFixed;if(!1!==a&&"number"==typeof a){var n=parseFloat(e.$body.css("margin-top"),10);isNaN(n)&&(n=0);var i,r=t.$editorContainer,o=r.offset().top,s=r.outerHeight(),l=t.menuContainer.$menuContainer,c=l.css("position"),u=l.css("top"),d=l.outerHeight(),m=l.offset().top;t.txt.$txt;e.$window.scroll(function(){if(!t.isFullScreen){i=l.width();var r=e.$window.scrollTop();r>=m&&r+a+d+30<o+s?(l.css({position:"fixed",top:a}),l.width(i),e.$body.css({"margin-top":n+d}),t._isMenufixed||(t._isMenufixed=!0)):(l.css({position:c,top:u}),l.css("width","100%"),e.$body.css({"margin-top":n}),t._isMenufixed&&(t._isMenufixed=!1))}})}})}),se(function(e,t){e.createMenu(function(a){var n="indent";if(a(n)){var i=this,r=new e.Menu({editor:i,id:n,title:"缩进",$domNormal:t('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-indent-left"></i></a>'),$domSelected:t('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-indent-left"></i></a>')});r.clickEvent=function(e){var a,n=i.getRangeElem(),r=i.getSelfOrParentByName(n,"p");if(!r)return e.preventDefault();a=t(r),i.customCommand(e,function(){a.css("text-indent","2em")})},r.clickEventSelected=function(e){var a,n=i.getRangeElem(),r=i.getSelfOrParentByName(n,"p");if(!r)return e.preventDefault();a=t(r),i.customCommand(e,function(){a.css("text-indent","0")})},r.updateSelectedEvent=function(){var e,a=i.getRangeElem(),n=i.getSelfOrParentByName(a,"p");return!!n&&!(!(e=t(n).css("text-indent"))||"0px"===e)},i.menus[n]=r}})}),se(function(e,t){e.createMenu(function(a){var n="lineheight";if(a(n)){var i=this;i.commandHooks.lineHeight=function(e){var a=i.getRangeElem(),n=i.getSelfOrParentByName(a,"p,h1,h2,h3,h4,h5,pre");n&&t(n).css("line-height",e+"")};var r=new e.Menu({editor:i,id:n,title:"行高",commandName:"lineHeight",$domNormal:t('<a href="#" tabindex="-1"><i class="wangeditor-menu-img-arrows-v"></i></a>'),$domSelected:t('<a href="#" tabindex="-1" class="selected"><i class="wangeditor-menu-img-arrows-v"></i></a>')});r.dropList=new e.DropList(i,r,{data:{"1.0":"1.0倍",1.5:"1.5倍",1.8:"1.8倍","2.0":"2.0倍",2.5:"2.5倍","3.0":"3.0倍"},tpl:'<span style="line-height:{#commandValue}">{#title}</span>'}),i.menus[n]=r}})}),se(function(e,t){e.plugin(function(){if(this.config.customUpload){if(this.config.uploadImgUrl)return alert("自定义上传无效，详看浏览器日志console.log"),void e.error("已经配置了 uploadImgUrl ，就不能再配置 customUpload ，两者冲突。将导致自定义上传无效。");var a=this.$uploadContent;a||e.error("自定义上传，无法获取 editor.$uploadContent");var n=t('<a href="#" class="upload-icon-container"><i class="wangeditor-menu-img-upload"></i></a>');a.append(n);var i="upload"+e.random(),r="upload"+e.random();n.attr("id",i),a.attr("id",r),this.customUploadBtnId=i,this.customUploadContainerId=r}})});var le=ie,ce=[oe],ue=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];ce.map(function(t){e.component(t.name,t)}),e.prototype.$material=ee.a.show,window.wangEditor=le};"undefined"!=typeof window&&window.Vue&&ue(window.Vue);var de={version:"1.0.0",install:ue};a("5b71");n.default.use(Z.a),n.default.use(_),n.default.use(de),n.default.config.productionTip=!1,new n.default({el:"#app",router:X,Vue:n.default,template:"<App/>",components:{App:r}})},NbyU:function(e,t){},"OAV+":function(e,t){},"Rmo/":function(e,t){},Rs03:function(e,t){},VRlY:function(e,t){},WUmY:function(e,t){},cU5d:function(e,t){},jsIo:function(e,t){},mazs:function(e,t){},orjq:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__=__webpack_require__("hRKE"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__=__webpack_require__("rVsN"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_2_vue__=__webpack_require__("VCXJ"),__WEBPACK_IMPORTED_MODULE_3__source_material_vue__=__webpack_require__("8vEe"),__WEBPACK_IMPORTED_MODULE_4__util_merge__=__webpack_require__("3Brj"),CONFIRM_TEXT="确定",CANCEL_TEXT="取消",defaults={title:"提示",message:"",type:"",showInput:!1,showClose:!0,modalFade:!1,lockScroll:!1,closeOnClickModal:!0,inputValue:null,inputPlaceholder:"",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:CONFIRM_TEXT,cancelButtonText:CANCEL_TEXT,confirmButtonClass:"",cancelButtonClass:""},sourceConstructor=__WEBPACK_IMPORTED_MODULE_2_vue__.default.extend(__WEBPACK_IMPORTED_MODULE_3__source_material_vue__.a),currentMsg,instance,msgQueue=[],initInstance=function(){(instance=new sourceConstructor({el:document.createElement("div")})).callback=defaultCallback},defaultCallback=function(e){if(currentMsg){var t=currentMsg.callback;"function"==typeof t&&(instance.showInput?t(instance.inputValue,e):t(e)),currentMsg.resolve&&("cancel"==e?currentMsg.reject("cancel"):currentMsg.resolve(e))}},showNextMsg=function(){if(instance||initInstance(),(!instance.value||instance.closeTimer)&&msgQueue.length>0){var e=(currentMsg=msgQueue.shift()).options;for(var t in e)e.hasOwnProperty(t)&&(instance[t]=e[t]);instance.selecType?instance.materialUrl=instance.imageboxUrl+"?selectType="+instance.selecType+"&retUrl="+window.location.href:instance.materialUrl=instance.imageboxUrl+"?retUrl="+window.location.href,void 0===e.callback&&(instance.callback=defaultCallback),["modal","showClose","closeOnClickModal","closeOnPressEscape"].forEach(function(e){void 0===instance[e]&&(instance[e]=!0)}),document.body.appendChild(instance.$el),__WEBPACK_IMPORTED_MODULE_2_vue__.default.nextTick(function(){instance.value=!0})}},Material=function e(t,a){if("string"==typeof t?(t={title:t},arguments[1]&&(t.message=arguments[1]),arguments[2]&&(t.type=arguments[2])):t.callback&&!a&&(a=t.callback),void 0!==__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a)return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function(n,i){msgQueue.push({options:Object(__WEBPACK_IMPORTED_MODULE_4__util_merge__.a)({},defaults,e.defaults||{},t),callback:a,resolve:n,reject:i}),showNextMsg()});msgQueue.push({options:Object(__WEBPACK_IMPORTED_MODULE_4__util_merge__.a)({},defaults,e.defaults||{},t),callback:a}),showNextMsg()};Material.setDefaults=function(e){__WEBPACK_IMPORTED_MODULE_3__source_material_vue__.a.defaults=e},Material.show=function(e,t,a){return"object"===(void 0===e?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(e))?(a=e,e=""):"object"===(void 0===t?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(t))&&(a=t,t=""),Material(Object(__WEBPACK_IMPORTED_MODULE_4__util_merge__.a)({$type:"material"},a))},Material.close=function(){instance&&(instance.value=!1,msgQueue=[],currentMsg=null)},!__WEBPACK_IMPORTED_MODULE_2_vue__.default.prototype.$isServer&&window.addEventListener("message",function(e){"string"==typeof e.data&&(instance&&!instance.value||(window.image||(window.image=function(e,t){instance.selecType?instance.handleAction(JSON.parse(e)):instance.handleAction([{imagesid:e,url:t}])}),window.go_back||(window.go_back=function(){instance.handleAction("cancel")}),eval(e.data)))}),__webpack_exports__.a=Material},pbeH:function(e,t){},vY0I:function(e,t){},yHt3:function(e,t){}},["NHnr"]);